/*! 26.0.0.0 */
/*! VersionVI: 01F260101d   */
function WDCarteAPI(n){arguments.length&&(this.m_bModeWebDev=!!n,this.m_clCarte=undefined,this.m_sId="",this.m_nStyle=WDCarteAPI.nStyleDefaut,this.m_tabMarker=[],this.m_tabItineraire=[],this.m_tabForme=[],this.m_tabImage=[],this.m_nTypeCarte_Initial=1,this.m_bAfficheControleZoom_Initial=!0,this.m_sImageMarqueur_Initial=null,this.m_nLatitude_Initial=null,this.m_nLongitude_Initial=null,this.m_sAdresse_Initial=null,this.m_nZoom_Initial=null,this.m_fChangementPosition=undefined,this.m_oChamp=undefined,WDCarteAPI.gclSingleton=this)}function CWDCarteApiObjet(){arguments.length}function CWDCarteApiObjetAvecImage(){arguments.length&&CWDCarteApiObjet.prototype.constructor.apply(this,arguments)}function CWDCarteApiGestionClusterMarqueur(n,t,i){var r,u;arguments.length&&(google.maps.OverlayView.prototype.constructor.apply(this,[]),this.m_nId=0,this.map_=n,this.markers_=[],this.clusters_=[],this.m_tabForme=[{m_nSeuil:2,m_nTaille:40,m_sCouleur:"#003b99"},{m_nSeuil:3,m_nTaille:40,m_sCouleur:"#003d99"},{m_nSeuil:4,m_nTaille:40,m_sCouleur:"#004299"},{m_nSeuil:5,m_nTaille:40,m_sCouleur:"#004699"},{m_nSeuil:6,m_nTaille:40,m_sCouleur:"#004899"},{m_nSeuil:7,m_nTaille:40,m_sCouleur:"#004c99"},{m_nSeuil:8,m_nTaille:40,m_sCouleur:"#005099"},{m_nSeuil:9,m_nTaille:40,m_sCouleur:"#005499"},{m_nSeuil:10,m_nTaille:45,m_sCouleur:"#005999"},{m_nSeuil:20,m_nTaille:45,m_sCouleur:"#007b99"},{m_nSeuil:50,m_nTaille:45,m_sCouleur:"#009954"},{m_nSeuil:100,m_nTaille:48,m_sCouleur:"#489900"},{m_nSeuil:200,m_nTaille:48,m_sCouleur:"#993d00"},{m_nSeuil:500,m_nTaille:48,m_sCouleur:"#990000"},{m_nSeuil:1e3,m_nTaille:55,m_sCouleur:"#990000"}],this.ready_=!1,r=i||{},this.zIndex_=r.zIndex||google.maps.Marker.MAX_ZINDEX+1,this.gridSize_=r.gridSize||60,this.minClusterSize_=r.minimumClusterSize||2,this.maxZoom_=r.maxZoom||null,this.zoomOnClick_=!0,r.zoomOnClick!=undefined&&(this.zoomOnClick_=r.zoomOnClick),this.averageCenter_=!1,r.averageCenter!=undefined&&(this.averageCenter_=r.averageCenter),this.m_clCarte=r.m_clCarte,this.setMap(n),this.prevZoom_=this.map_.getZoom(),u=this,google.maps.event.addListener(this.map_,"zoom_changed",function(){var n=u.map_.getZoom(),t=u.map_.minZoom||0,i=Math.min(u.map_.maxZoom||100,u.map_.mapTypes[u.map_.getMapTypeId()].maxZoom);n=Math.min(Math.max(n,t),i);u.prevZoom_!=n&&(u.prevZoom_=n,u.resetViewport())}),google.maps.event.addListener(this.map_,"idle",function(){u.redraw()}),t&&(t.length||Object.keys(t).length)&&this.addMarkers(t,!1))}function CWDCarteApiCluster(n){arguments.length&&(this.markerClusterer_=n,this.m_sId=this.markerClusterer_.sGetId(),this.map_=n.getMap(),this.gridSize_=n.getGridSize(),this.minClusterSize_=n.getMinClusterSize(),this.averageCenter_=n.isAverageCenter(),this.center_=null,this.markers_=[],this.bounds_=null,this.clusterIcon_=new CWDCarteApiIconeCluster(this,n.getGridSize()))}function CWDCarteApiIconeCluster(n){arguments.length&&(google.maps.Marker.prototype.constructor.apply(this),this.cluster_=n,this.center_=null,this.map_=n.getMap(),this.sums_=null,this.visible_=!1,this.setMap(this.map_))}function CWDCarteApiMarqueur(){arguments.length&&CWDCarteApiObjetAvecImage.prototype.constructor.apply(this,arguments)}function CWDCarteApiForme(){arguments.length&&CWDCarteApiObjet.prototype.constructor.apply(this,arguments)}function CWDCarteApiPolyligne(){arguments.length&&CWDCarteApiForme.prototype.constructor.apply(this,arguments)}function CWDCarteApiPolygone(){arguments.length&&CWDCarteApiPolyligne.prototype.constructor.apply(this,arguments)}function CWDCarteApiCercle(){arguments.length&&CWDCarteApiForme.prototype.constructor.apply(this,arguments)}function CImageGoogleMapAvecRotation(){arguments.length&&google.maps.OverlayView.prototype.constructor.apply(this,[])}function CWDCarteApiImage(){arguments.length&&CWDCarteApiObjetAvecImage.prototype.constructor.apply(this,arguments)}function WDCarteGoogleMaps(){arguments.length&&WDCarteAPI.prototype.constructor.apply(this,arguments)}WDCarteAPI.nTypeTraitContinu=1;WDCarteAPI.nTypeTraitTiret=2;WDCarteAPI.nTypeTraitPointille=3;WDCarteAPI.nTypeTraitMixte=4;WDCarteAPI.nFormeNonDefini=-1;WDCarteAPI.nFormeRond=3;WDCarteAPI.nFormeCarre=4;WDCarteAPI.nFormeCarreArrondi=6;WDCarteAPI.nOpaciteCouleurWLMax=255;WDCarteAPI.nStyleAuto=0;WDCarteAPI.nStyleDefaut=1;WDCarteAPI.nStyleSombre=2;WDCarteAPI.nStyleNuit=3;WDCarteAPI.nStyleArgent=4;WDCarteAPI.nStyleRetro=5;WDCarteAPI.nStyleAubergine=6;WDCarteAPI.nStylePerso=7;WDCarteAPI.tabStyle=[];WDCarteAPI.tabStyle[WDCarteAPI.nStyleSombre]=[{elementType:"geometry",stylers:[{color:"#212121"}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{elementType:"labels.text.stroke",stylers:[{color:"#212121"}]},{featureType:"administrative",elementType:"geometry",stylers:[{color:"#757575"}]},{featureType:"administrative.country",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"administrative.land_parcel",stylers:[{visibility:"off"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{color:"#bdbdbd"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#181818"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"poi.park",elementType:"labels.text.stroke",stylers:[{color:"#1b1b1b"}]},{featureType:"road",elementType:"geometry.fill",stylers:[{color:"#2c2c2c"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#8a8a8a"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#373737"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#3c3c3c"}]},{featureType:"road.highway.controlled_access",elementType:"geometry",stylers:[{color:"#4e4e4e"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"transit",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#000000"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#3d3d3d"}]}];WDCarteAPI.tabStyle[WDCarteAPI.nStyleNuit]=[{elementType:"geometry",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.fill",stylers:[{color:"#746855"}]},{elementType:"labels.text.stroke",stylers:[{color:"#242f3e"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#263c3f"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#6b9a76"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#38414e"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{color:"#212a37"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#9ca5b3"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#746855"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#1f2835"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#f3d19c"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#2f3948"}]},{featureType:"transit.station",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#17263c"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#515c6d"}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{color:"#17263c"}]}];WDCarteAPI.tabStyle[WDCarteAPI.nStyleArgent]=[{elementType:"geometry",stylers:[{color:"#f5f5f5"}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{elementType:"labels.text.stroke",stylers:[{color:"#f5f5f5"}]},{featureType:"administrative.land_parcel",elementType:"labels.text.fill",stylers:[{color:"#bdbdbd"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#ffffff"}]},{featureType:"road.arterial",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#dadada"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"transit.line",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"transit.station",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#c9c9c9"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]}];WDCarteAPI.tabStyle[WDCarteAPI.nStyleRetro]=[{elementType:"geometry",stylers:[{color:"#ebe3cd"}]},{elementType:"labels.text.fill",stylers:[{color:"#523735"}]},{elementType:"labels.text.stroke",stylers:[{color:"#f5f1e6"}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#c9b2a6"}]},{featureType:"administrative.land_parcel",elementType:"geometry.stroke",stylers:[{color:"#dcd2be"}]},{featureType:"administrative.land_parcel",elementType:"labels.text.fill",stylers:[{color:"#ae9e90"}]},{featureType:"landscape.natural",elementType:"geometry",stylers:[{color:"#dfd2ae"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#dfd2ae"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#93817c"}]},{featureType:"poi.park",elementType:"geometry.fill",stylers:[{color:"#a5b076"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#447530"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#f5f1e6"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#fdfcf8"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#f8c967"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#e9bc62"}]},{featureType:"road.highway.controlled_access",elementType:"geometry",stylers:[{color:"#e98d58"}]},{featureType:"road.highway.controlled_access",elementType:"geometry.stroke",stylers:[{color:"#db8555"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{color:"#806b63"}]},{featureType:"transit.line",elementType:"geometry",stylers:[{color:"#dfd2ae"}]},{featureType:"transit.line",elementType:"labels.text.fill",stylers:[{color:"#8f7d77"}]},{featureType:"transit.line",elementType:"labels.text.stroke",stylers:[{color:"#ebe3cd"}]},{featureType:"transit.station",elementType:"geometry",stylers:[{color:"#dfd2ae"}]},{featureType:"water",elementType:"geometry.fill",stylers:[{color:"#b9d3c2"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#92998d"}]}];WDCarteAPI.tabStyle[WDCarteAPI.nStyleAubergine]=[{elementType:"geometry",stylers:[{color:"#1d2c4d"}]},{elementType:"labels.text.fill",stylers:[{color:"#8ec3b9"}]},{elementType:"labels.text.stroke",stylers:[{color:"#1a3646"}]},{featureType:"administrative.country",elementType:"geometry.stroke",stylers:[{color:"#4b6878"}]},{featureType:"administrative.land_parcel",elementType:"labels.text.fill",stylers:[{color:"#64779e"}]},{featureType:"administrative.province",elementType:"geometry.stroke",stylers:[{color:"#4b6878"}]},{featureType:"landscape.man_made",elementType:"geometry.stroke",stylers:[{color:"#334e87"}]},{featureType:"landscape.natural",elementType:"geometry",stylers:[{color:"#023e58"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#283d6a"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#6f9ba5"}]},{featureType:"poi",elementType:"labels.text.stroke",stylers:[{color:"#1d2c4d"}]},{featureType:"poi.park",elementType:"geometry.fill",stylers:[{color:"#023e58"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#3C7680"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#304a7d"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#98a5be"}]},{featureType:"road",elementType:"labels.text.stroke",stylers:[{color:"#1d2c4d"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#2c6675"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#255763"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#b0d5ce"}]},{featureType:"road.highway",elementType:"labels.text.stroke",stylers:[{color:"#023e58"}]},{featureType:"transit",elementType:"labels.text.fill",stylers:[{color:"#98a5be"}]},{featureType:"transit",elementType:"labels.text.stroke",stylers:[{color:"#1d2c4d"}]},{featureType:"transit.line",elementType:"geometry.fill",stylers:[{color:"#283d6a"}]},{featureType:"transit.station",elementType:"geometry",stylers:[{color:"#3a4762"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#0e1626"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#4e6d70"}]}];WDCarteAPI.prototype._SetTableauMarqueur=function(n){this.m_tabMarker=n};WDCarteAPI.prototype._SetTableauForme=function(n){this.m_tabForme=n};WDCarteAPI.prototype._SetTableauImage=function(n){this.m_tabImage=n};WDCarteAPI.nTypeMarqueur=0;WDCarteAPI.nTypePolyligne=1;WDCarteAPI.nTypePolygone=2;WDCarteAPI.nTypeCercle=3;WDCarteAPI.nTypeImage=4;WDCarteAPI.CreerIdentifiant=function(n){var t="";switch(n){case WDCarteAPI.nTypeMarqueur:t="Marker";break;case WDCarteAPI.nTypePolyligne:t="Polyline";break;case WDCarteAPI.nTypePolygone:t="Polygon";break;case WDCarteAPI.nTypeCercle:t="Circle";break;case WDCarteAPI.nTypeImage:t="Image"}return(t!=""?t+"#":0)+ ++WDCarteAPI.gnIdentifiant};WDCarteAPI.sCoordVersChaine=function(n,t){return""+n+","+t};WDCarteAPI.gnIdentifiant=0;WDCarteAPI.gclSingleton=undefined;WDCarteAPI.gsIDClic="";WDCarteAPI.gsIDClicForme="";WDCarteAPI.gsIDClicImage="";WDCarteAPI.gsIDDeplacement="";WDCarteAPI.gsIDClicPopup="";WDCarteAPI.gsIDClusterAffiche="";WDCarteAPI.gsIDPopupAffiche="";WDCarteAPI.gsRetVal_SetPositionLieux="";WDCarteAPI.gnLatitudeDefaut=48.856558;WDCarteAPI.gnLongitudeDefaut=2.350966;WDCarteAPI.gnZoomDefaut=3;WDCarteAPI.m_bToutEstCharge=!1;WDCarteAPI.gbModeWD=!1;WDCarteAPI.gbCallbackClusterWD=!1;WDCarteAPI.s_pclFactory=function(n,t,i,r,u){n.DeclarePrototype();var f=new n.prototype.constructor(i);return r&&r(f),f.CreateMap(t,u),f};WDCarteAPI.prototype._SetSize=function(n,t){var i=this.domGetBaliseSupport();i.style.width=n;i.style.height=t};WDCarteAPI.prototype.domGetBaliseSupport=function(){return document.getElementById(this.m_sId)};WDCarteAPI.prototype.EcouteChangementPosition=function(n){this.m_fChangementPosition=n};WDCarteAPI.prototype.EcouteAffichageCluster=function(n){this.m_fAffichageCluster=n};WDCarteAPI.prototype.AppelCallbackAffichageCluster=function(n){var i,t;if(this.m_fAffichageCluster){for(i=[],t=0;t<n.length;t++)i.push(this.clDinoMarqueurApi(n[t]));return this.m_fAffichageCluster(undefined,i)}};WDCarteAPI.bValideCoordonnees=function(n,t){return n<-90||n>90||t<-180||t>180?!1:!0};WDCarteAPI.emqHaut=0;WDCarteAPI.emqBas=1;WDCarteAPI.emqCentre=2;WDCarteAPI.emqGauche=3;WDCarteAPI.emqDroite=4;WDCarteAPI._CalculeAnchor=function(n,t,i,r){var u=0,f=0;switch(n){default:case WDCarteAPI.emqBas:u=t/2;f=0;break;case WDCarteAPI.emqHaut:u=t/2;f=i;break;case WDCarteAPI.emqCentre:u=t/2;f=i/2;break;case WDCarteAPI.emqDroite:u=0;f=i/2;break;case WDCarteAPI.emqGauche:u=t;f=i/2}r.x=u;r.y=f};WDCarteAPI.prototype.clObjetParId=function(n,t){for(var r,i=0;i<t.length;++i)if(r=t[i],r.ID_WD==n)return r;return null};WDCarteAPI.prototype.clMarqueurParId=function(n){return this.clObjetParId(n,this.m_tabMarker)};WDCarteAPI.prototype.clDinoObjetApi=function(n,t){if(!t)return null;var i=null;return clWDUtil.bForEach(t,function(t){return t.pszGetIDInterne()==n.ID_WD?(i=t,!1):!0}),i};WDCarteAPI.prototype.bChampWebDev=function(){return this.m_oChamp&&this.m_bModeWebDev};WDCarteAPI.prototype.clDinoMarqueurApi=function(n){return this.bChampWebDev()?this.clDinoObjetApi(n,this.m_oChamp.m_oDonnees.m_tabMarqueurs):null};CWDCarteApiObjet.prototype._clCreationOptionObjetApi=function(){return{}};CWDCarteApiObjet.prototype._clCreationCoordApi=function(n){return WDCarteGoogleMaps.clCreationPositionApi(n.m_dLatitude,n.m_dLongitude)};CWDCarteApiObjet.prototype._clDinoObjetApi=function(n,t){return t.m_clCarteApi.bChampWebDev()?t.m_clCarteApi.clDinoObjetApi(n,this._tabObjetChamp(t)):null};CWDCarteApiObjet.prototype._sNomPropEvenement=function(n){return"WDCallback_"+n};CWDCarteApiObjet.prototype._bDefiniNonChaineVide=function(n){return!!n&&n!=""};CWDCarteApiObjet.prototype._AppelCallbackWL=function(n,t,i,r){var u=n[i],f,e;if(u!=""&&(r&&(WDCarteAPI[r]=u),f=this._clDinoObjetApi(n,t),f!=null)){try{e=clWDUtil.s_bCommencePar(u,"javascript:")?eval(u.substr(11)):eval(u)}catch(o){e=undefined}e?e(f):window[u]?window[u](f):clWDAJAXMain.AJAXExecuteSynchrone20(u,t.m_clCarteApi.m_oChamp.m_sAliasChamp,1,f.clCloneNettoyePourJsonServeur())}};CWDCarteApiObjet.prototype._BrancheCallback=function(n,t,i,r,u,f){var c=this._bDefiniNonChaineVide(r),e=this._sNomPropEvenement(i),s=n[e]!=undefined,h,o;(c||s)&&(n[e]=r,s||(h=this,o=function(){h._AppelCallbackWL(n,t,e,u)},f?n.addEventListener(i,o):google.maps.event.addListener(n,i,o)))};CWDCarteApiObjet.prototype._sNomVarClicWD=function(){return"gsIDClic"};CWDCarteApiObjet.prototype._ApresModificationObjetApi=function(){};CWDCarteApiObjet.prototype._bModificationObjetApi=function(n,t){return(this.m_clCoordApi=this._clCreationCoordApi(t),this.m_clCoordApi==null)?!1:(this.m_clObjetApi=n,n.setOptions(this._clCreationOptionObjetApi(t)),this._BrancheCallback(n,t,"click",t.m_sActionClic,this._sNomVarClicWD()),WDCarteGoogleMaps.RefreshCarte(n,t.m_clCarteApi.m_clCarte),this._ApresModificationObjetApi(n,t),!0)};CWDCarteApiObjet.prototype.nAjout=function(n){var t=this._clCreationObjetApi(n),i=this._tabObjetApi(n);return this._bModificationObjetApi(t,n)?(i.push(t),t.ID_WD=n.m_nID||this.sCreerIdentifiant(),t.ID_WD):!1};CWDCarteApiObjet.prototype.Modification=function(n){var t=n.m_clCarteApi.clObjetParId(n.m_nID,this._tabObjetApi(n));return t==null?!1:this._bModificationObjetApi(t,n)};CWDCarteApiObjet.prototype.sPathCoord=function(n,t){return" "+n+","+t};CWDCarteApiObjet.prototype.sPathCoordV=function(n,t){return this.sPathCoord(0,n.m_nPosition+=t)};CWDCarteApiObjet.prototype.sPathPositionCoord=function(n){return"M"+n};CWDCarteApiObjet.prototype.sPathPosition=function(n,t){return this.sPathPositionCoord(this.sPathCoord(n,t))};CWDCarteApiObjet.prototype.sPathPositionV=function(n,t){return this.sPathPositionCoord(this.sPathCoordV(n,t))};CWDCarteApiObjet.prototype.sPathArc=function(n,t,i){return"a"+this.sPathCoord(n,n)+" 0 0 1"+this.sPathCoord(t,i)};CWDCarteApiObjet.prototype.sPathTrait=function(n,t){return n+t};CWDCarteApiObjet.prototype.sPathTraitH=function(n){return this.sPathTrait("h",n)};CWDCarteApiObjet.prototype.sPathTraitV=function(n){return this.sPathTrait("v",n)};CWDCarteApiObjetAvecImage.prototype=new CWDCarteApiObjet;CWDCarteApiObjetAvecImage.prototype.constructor=CWDCarteApiObjetAvecImage;CWDCarteApiObjetAvecImage.prototype._clCreationOptionObjetApi=function(n){var t=CWDCarteApiObjet.prototype._clCreationOptionObjetApi.apply(this,[n]);return t.opacity=WDCarteGoogleMaps.nOpaciteWLVersVue(n.m_nOpacite),t};CWDCarteApiObjetAvecImage.prototype.bChargeImage=function(n,t,i,r){if(!("string"==typeof t&&!!t))return!1;if(r){var f=new Image,u=this;f.onload=function(){u.TraiteChargementImage(this,i);u.m_clObjetApi&&WDCarteGoogleMaps.RefreshCarte(u.m_clObjetApi,n)};f.src=t}return!0};CWDCarteApiGestionClusterMarqueur.DeclarePrototype=function(){CWDCarteApiGestionClusterMarqueur.prototype=new google.maps.OverlayView;CWDCarteApiGestionClusterMarqueur.prototype.constructor=CWDCarteApiGestionClusterMarqueur;CWDCarteApiGestionClusterMarqueur.prototype.onAdd=function(){this.setReady_(!0);var i=0,n=this,t=function(){n.m_bDessinEnAttente&&(i++>0?n.redraw():setTimeout(t,1))};t()};CWDCarteApiGestionClusterMarqueur.prototype.draw=function(){};CWDCarteApiGestionClusterMarqueur.prototype.fitMapToMarkers=function(){for(var r=this.getMarkers(),n=new google.maps.LatLngBounds,t=0,i;i=r[t];t++)n.extend(i.getPosition());this.map_.fitBounds(n)};CWDCarteApiGestionClusterMarqueur.prototype.setZIndex=function(n){this.zIndex_=n};CWDCarteApiGestionClusterMarqueur.prototype.getZIndex=function(){return this.zIndex_};CWDCarteApiGestionClusterMarqueur.prototype.isZoomOnClick=function(){return this.zoomOnClick_};CWDCarteApiGestionClusterMarqueur.prototype.isAverageCenter=function(){return this.averageCenter_};CWDCarteApiGestionClusterMarqueur.prototype.getMarkers=function(){return this.markers_};CWDCarteApiGestionClusterMarqueur.prototype.getTotalMarkers=function(){return this.markers_.length};CWDCarteApiGestionClusterMarqueur.prototype.setMaxZoom=function(n){this.maxZoom_=n};CWDCarteApiGestionClusterMarqueur.prototype.getMaxZoom=function(){return this.maxZoom_};CWDCarteApiGestionClusterMarqueur.prototype.calculator=function(n){var t,i,u;if(this.m_clCarte&&(t=this.m_clCarte.AppelCallbackAffichageCluster(n)),i={},t&&t.m_eForme!==undefined)i={m_nFormeImage:t.m_eForme,m_nTailleFormeImage:t.m_nTaille,m_sCouleurFondFormeImage:WDDinoBaseObjetCarte.sCouleurSansOpaciteDinoCouleur(t.m_clCouleurFond),m_nOpaciteFondFormeImage:WDDinoBaseObjetCarte.nOpaciteDinoCouleur(t.m_clCouleurFond),m_sCouleurTraitFormeImage:WDDinoBaseObjetCarte.sCouleurSansOpaciteDinoCouleur(t.m_clCouleur),m_nOpaciteTraitFormeImage:WDDinoBaseObjetCarte.nOpaciteDinoCouleur(t.m_clCouleur),m_sTexteFormeImage:""+t.m_sTexte};else if(typeof t=="string"&&t.length)i.m_sUrlImage=t;else{for(var f=n.length,e=this.m_tabForme.length,r=0,r=0;r<e;r++)if(f<=this.m_tabForme[r].m_nSeuil)break;u=this.m_tabForme[Math.min(r,e-1)];i={m_nFormeImage:WDCarteAPI.nFormeRond,m_nTailleFormeImage:u.m_nTaille,m_sCouleurFondFormeImage:u.m_sCouleur,m_nOpaciteFondFormeImage:WDCarteAPI.nOpaciteCouleurWLMax,m_sCouleurTraitFormeImage:"white",m_nOpaciteTraitFormeImage:WDCarteAPI.nOpaciteCouleurWLMax/2,m_sTexteFormeImage:""+f}}return i.m_clCarteApi={m_clCarte:this.map_},i.m_nAncrageX=WDCarteAPI.emqHaut,i};CWDCarteApiGestionClusterMarqueur.prototype.AfficheCluster=function(n){for(var i,t=0;t<this.clusters_.length;t++)if(i=this.clusters_[t],i.m_sId==n.m_sId){i.clusterIcon_.show(n);return}};CWDCarteApiGestionClusterMarqueur.prototype.addMarkers=function(n,t){var r,i;if(n.length)for(r=0;i=n[r];r++)this.pushMarkerTo_(i);else if(Object.keys(n).length)for(i=0;i<n.length;i++)this.pushMarkerTo_(n[i]);t||this.redraw()};CWDCarteApiGestionClusterMarqueur.prototype.pushMarkerTo_=function(n){if(n.isAdded=!1,n.draggable){var t=this;google.maps.event.addListener(n,"dragend",function(){n.isAdded=!1;t.repaint()})}this.markers_.push(n)};CWDCarteApiGestionClusterMarqueur.prototype.addMarker=function(n,t){this.pushMarkerTo_(n);t||this.redraw()};CWDCarteApiGestionClusterMarqueur.prototype.removeMarker_=function(n,t){var i=-1,r,u;if(this.markers_.indexOf)i=this.markers_.indexOf(n);else for(r=0;u=this.markers_[r];r++)if(u==n){i=r;break}return i==-1?!1:(t||n.setMap(null),this.markers_.splice(i,1),!0)};CWDCarteApiGestionClusterMarqueur.prototype.removeMarker=function(n,t,i){var r=this.removeMarker_(n,i);return!t&&r?(this.resetViewport(),this.redraw(),!0):!1};CWDCarteApiGestionClusterMarqueur.prototype.removeMarkers=function(n,t){for(var f,e=n===this.getMarkers()?n.slice():n,i=!1,r=0,u;u=e[r];r++)f=this.removeMarker_(u),i=i||f;if(!t&&i)return this.resetViewport(),this.redraw(),!0};CWDCarteApiGestionClusterMarqueur.prototype.setReady_=function(n){this.ready_||(this.ready_=n)};CWDCarteApiGestionClusterMarqueur.prototype.getTotalClusters=function(){return this.clusters_.length};CWDCarteApiGestionClusterMarqueur.prototype.getMapApi=function(){return this.map_};CWDCarteApiGestionClusterMarqueur.prototype.setMapApi=function(n){this.map_=n};CWDCarteApiGestionClusterMarqueur.prototype.getGridSize=function(){return this.gridSize_};CWDCarteApiGestionClusterMarqueur.prototype.setGridSize=function(n){this.gridSize_=n};CWDCarteApiGestionClusterMarqueur.prototype.getMinClusterSize=function(){return this.minClusterSize_};CWDCarteApiGestionClusterMarqueur.prototype.setMinClusterSize=function(n){this.minClusterSize_=n};CWDCarteApiGestionClusterMarqueur.prototype.getExtendedBounds=function(n){var t=this.getProjection(),e=new google.maps.LatLng(n.getNorthEast().lat(),n.getNorthEast().lng()),o=new google.maps.LatLng(n.getSouthWest().lat(),n.getSouthWest().lng()),r=t.fromLatLngToDivPixel(e),i,u,f;return r.x+=this.gridSize_,r.y-=this.gridSize_,i=t.fromLatLngToDivPixel(o),i.x-=this.gridSize_,i.y+=this.gridSize_,u=t.fromDivPixelToLatLng(r),f=t.fromDivPixelToLatLng(i),n.extend(u),n.extend(f),n};CWDCarteApiGestionClusterMarqueur.prototype.isMarkerInBounds_=function(n,t){return t.contains(n.getPosition())};CWDCarteApiGestionClusterMarqueur.prototype.clearMarkers=function(){this.resetViewport(!0);this.markers_=[]};CWDCarteApiGestionClusterMarqueur.prototype.resetViewport=function(n){for(var r,i,t=0;r=this.clusters_[t];t++)r.remove();for(t=0;i=this.markers_[t];t++)i.isAdded=!1,n&&i.setMap(null);this.clusters_=[]};CWDCarteApiGestionClusterMarqueur.prototype.repaint=function(){var n=this.clusters_.slice();this.clusters_.length=0;this.resetViewport();this.redraw();setTimeout(function(){for(var t=0,i;i=n[t];t++)i.remove()},0)};CWDCarteApiGestionClusterMarqueur.prototype.redraw=function(){this.createClusters_()};CWDCarteApiGestionClusterMarqueur.prototype.distanceBetweenPoints_=function(n,t){if(!n||!t)return 0;var i=(t.lat()-n.lat())*Math.PI/180,r=(t.lng()-n.lng())*Math.PI/180,u=Math.sin(i/2)*Math.sin(i/2)+Math.cos(n.lat()*Math.PI/180)*Math.cos(t.lat()*Math.PI/180)*Math.sin(r/2)*Math.sin(r/2),f=2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u));return 6371*f};CWDCarteApiGestionClusterMarqueur.prototype.addToClosestCluster_=function(n){for(var r,u,f,e=4e4,t=null,o=0,i;i=this.clusters_[o];o++)r=i.getCenter(),r&&(u=this.distanceBetweenPoints_(r,n.getPosition()),u<e&&(e=u,t=i));t&&t.isMarkerInClusterBounds(n)?t.addMarker(n):(f=new CWDCarteApiCluster(this),f.addMarker(n),this.clusters_.push(f))};CWDCarteApiGestionClusterMarqueur.prototype.createClusters_=function(){var r,u,i,n,t;if(!this.ready_){this.m_bDessinEnAttente=!0;return}for(this.m_bDessinEnAttente=!1,r=new google.maps.LatLngBounds(this.map_.getBounds().getSouthWest(),this.map_.getBounds().getNorthEast()),u=this.getExtendedBounds(r),i=0;n=this.markers_[i];i++)!n.isAdded&&this.isMarkerInBounds_(n,u)&&this.addToClosestCluster_(n);for(t=0;t<this.clusters_.length;t++)this.clusters_[t].updateIcon()};CWDCarteApiGestionClusterMarqueur.prototype.sGetId=function(){return""+this.m_nId++}};CWDCarteApiCluster.prototype.isMarkerAlreadyAdded=function(n){if(this.markers_.indexOf)return this.markers_.indexOf(n)!=-1;for(var t=0,i;i=this.markers_[t];t++)if(i==n)return!0;return!1};CWDCarteApiCluster.prototype.addMarker=function(n){var t,r;if(this.isMarkerAlreadyAdded(n))return!1;if(this.center_){if(this.averageCenter_){var i=this.markers_.length+1,u=(this.center_.lat()*(i-1)+n.getPosition().lat())/i,f=(this.center_.lng()*(i-1)+n.getPosition().lng())/i;this.center_=new google.maps.LatLng(u,f);this.calculateBounds_()}}else this.center_=n.getPosition(),this.calculateBounds_();if(n.isAdded=!0,this.markers_.push(n),t=this.markers_.length,t<this.minClusterSize_&&n.getMap()!=this.map_&&n.setMap(this.map_),t==this.minClusterSize_)for(r=0;r<t;r++)this.markers_[r].setMap(null);return t>=this.minClusterSize_&&n.setMap(null),!0};CWDCarteApiCluster.prototype.getMarkerClusterer=function(){return this.markerClusterer_};CWDCarteApiCluster.prototype.getBounds=function(){for(var n=new google.maps.LatLngBounds(this.center_,this.center_),r=this.getMarkers(),t=0,i;i=r[t];t++)n.extend(i.getPosition());return n};CWDCarteApiCluster.prototype.remove=function(){this.clusterIcon_.remove();this.markers_.length=0;delete this.markers_};CWDCarteApiCluster.prototype.getSize=function(){return this.markers_.length};CWDCarteApiCluster.prototype.getMarkers=function(){return this.markers_};CWDCarteApiCluster.prototype.getCenter=function(){return this.center_};CWDCarteApiCluster.prototype.calculateBounds_=function(){var n=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(n)};CWDCarteApiCluster.prototype.isMarkerInClusterBounds=function(n){return this.bounds_.contains(n.getPosition())};CWDCarteApiCluster.prototype.getMap=function(){return this.map_};CWDCarteApiCluster.prototype.updateIcon=function(){var e=this.map_.getZoom(),r=this.markerClusterer_.getMaxZoom(),t,u,i,n,f;if(r&&e>r){for(t=0;u=this.markers_[t];t++)u.setMap(this.map_);return}if(this.markers_.length<this.minClusterSize_){this.clusterIcon_.hide();return}if(WDCarteAPI.gbCallbackClusterWD){for(i=this.m_sId,n=0;n<this.markers_.length;n++)i+=","+this.markers_[n].ID_WD;WDCarteAPI.gsIDClusterAffiche&&(WDCarteAPI.gsIDClusterAffiche+="\t");WDCarteAPI.gsIDClusterAffiche+=i}f=this.markerClusterer_.calculator(this.markers_);this.clusterIcon_.setCenter(this.center_);this.clusterIcon_.show(f)};CWDCarteApiIconeCluster.DeclarePrototype=function(){CWDCarteApiIconeCluster.prototype=new google.maps.Marker;CWDCarteApiIconeCluster.prototype.constructor=CWDCarteApiIconeCluster;CWDCarteApiIconeCluster.prototype.triggerClusterClick=function(){var n=this.cluster_.getBounds(),t=this.cluster_.getMarkerClusterer();google.maps.event.trigger(t.map_,"clusterclick",this.cluster_);t.isZoomOnClick()&&(this.map_.fitBounds(n),this.map_.setCenter(n.getCenter()))};CWDCarteApiIconeCluster.prototype.getPosFromLatLng_=function(n){var t=this.getProjection().fromLatLngToDivPixel(n);return t.x-=parseInt(this.width_/2,10),t.y-=parseInt(this.height_/2,10),t};CWDCarteApiIconeCluster.prototype.hide=function(){this.setMap(null);this.visible_=!1};CWDCarteApiIconeCluster.prototype.show=function(n){n&&this.setSums(n);this.setPosition(this.center_);var t={};new CWDCarteApiMarqueur(!0).InitOptionImage(t,this.sums_.m_sUrlImage,this.sums_);this.setOptions(t);this.setMap(this.map_);this.visible_=!0};CWDCarteApiIconeCluster.prototype.remove=function(){this.setMap(null)};CWDCarteApiIconeCluster.prototype.setSums=function(n){this.sums_=n};CWDCarteApiIconeCluster.prototype.setCenter=function(n){this.center_=n}};CWDCarteApiMarqueur.prototype=new CWDCarteApiObjetAvecImage;CWDCarteApiMarqueur.prototype.constructor=CWDCarteApiMarqueur;CWDCarteApiMarqueur.prototype.sCreerIdentifiant=function(){return WDCarteAPI.CreerIdentifiant(WDCarteAPI.nTypeMarqueur)};CWDCarteApiMarqueur.m_sclPopupApi=null;CWDCarteApiMarqueur.prototype.clPopupApi=function(){if(CWDCarteApiMarqueur.m_sclPopupApi==null){var n=CWDCarteApiMarqueur.m_sclPopupApi=new google.maps.InfoWindow;google.maps.event.addListener(n,"closeclick",function(){this.m_bOuvert=!1});n.m_clDivPopup=document.createElement("div");n.setContent(n.m_clDivPopup)}return CWDCarteApiMarqueur.m_sclPopupApi};CWDCarteApiMarqueur.prototype.InitOptionImage=function(n,t,i){var e,u,o,r,f,s;n.icon=WDCarteGoogleMaps.ModifieMarqueurAlignement(i.m_clCarteApi.m_clCarte,this,t,i.m_nAncrageX,i.m_nAncrageY);e=!0;u="";switch(i.m_nFormeImage){case WDCarteAPI.nFormeRond:o=i.m_nTailleFormeImage/2;u=this.sPathPosition(0,o)+this.sPathArc(o,i.m_nTailleFormeImage,0)+this.sPathArc(o,-i.m_nTailleFormeImage,0);break;case WDCarteAPI.nFormeCarre:u=this.sPathPosition(0,0)+this.sPathTraitH(i.m_nTailleFormeImage)+this.sPathTraitV(i.m_nTailleFormeImage)+this.sPathTraitH(-i.m_nTailleFormeImage)+this.sPathTraitV(-i.m_nTailleFormeImage);break;case WDCarteAPI.nFormeCarreArrondi:r=i.m_nTailleFormeImage/10;f=i.m_nTailleFormeImage-2*r;u=this.sPathPosition(r,0)+this.sPathTraitH(f)+this.sPathArc(r,r,r)+this.sPathTraitV(f)+this.sPathArc(r,-r,r)+this.sPathTraitH(-f)+this.sPathArc(r,-r,-r)+this.sPathTraitV(-f)+this.sPathArc(r,r,-r);break;default:e=!1}e&&(s=i.m_nTailleFormeImage/2,n.icon={path:u,anchor:{x:0,y:0},fillColor:i.m_sCouleurFondFormeImage,fillOpacity:WDCarteGoogleMaps.nOpaciteCouleurWLVersVue(i.m_nOpaciteFondFormeImage),strokeColor:i.m_sCouleurTraitFormeImage,strokeOpacity:WDCarteGoogleMaps.nOpaciteCouleurWLVersVue(i.m_nOpaciteTraitFormeImage),labelOrigin:{x:s,y:s}},WDCarteAPI._CalculeAnchor(i.m_nAncrageX,i.m_nTailleFormeImage,i.m_nTailleFormeImage,n.icon.anchor));n.label=e&&i.m_sTexteFormeImage?{text:""+i.m_sTexteFormeImage,color:i.m_sCouleurTraitFormeImage}:undefined};CWDCarteApiMarqueur.prototype._clCreationOptionObjetApi=function(n){var i=CWDCarteApiObjetAvecImage.prototype._clCreationOptionObjetApi.apply(this,[n]),u,r,o;i.position=this.m_clCoordApi;i.title=n.m_sLibelle;u="";n.m_clCarteApi.m_sImageMarqueur_Initial!=null&&(u=n.m_clCarteApi.m_sImageMarqueur_Initial,n.m_clCarteApi.m_sImageMarqueur_Initial=null);n.m_sImage&&n.m_sImage.length&&(u=n.m_sImage);this.InitOptionImage(i,u,n);i.zIndex=n.m_nAltitude;i.draggable=n.m_bDeplacable;var f="dragend",t=this.m_clObjetApi,e=this;return n.m_bDeplacable&&(r=this._sNomPropEvenement(f),o=t[r],t[r]=n.m_sActionDeplacement,o||google.maps.event.addListener(t,f,function(){var u=this.getPosition(),i;WDCarteAPI.gsIDDeplacement=this[r]+"\t"+WDCarteGoogleMaps.sPositionVersChaine(u);i=e._clDinoObjetApi(this,n);i!=null&&(i.SetLatitude(u.lat()),i.SetLongitude(u.lng()));e._AppelCallbackWL(t,n,r);this.m_bCluster&&n.m_clCarteApi.clGestionCluster().repaint()})),t.m_clParam=n,n.m_bAvecPopup?(t.m_clPopupApi||(t.m_clPopupApi=this.clPopupApi(),t.m_bClicOuvrePopup||(t.addListener("click",function(){n.m_clCarteApi.bAffichePopup(this)}),t.m_bClicOuvrePopup=!0)),t.m_clObjet=this):t.m_clPopupApi&&delete t.m_clPopupApi,i};CWDCarteApiMarqueur.prototype._ApresModificationObjetApi=function(n,t){if(!!t.m_bCluster!=!!n.m_bCluster){n.m_bCluster=t.m_bCluster;var i=t.m_clCarteApi.clGestionCluster();t.m_bCluster?i.addMarker(n):i.removeMarker(n,!1,!0)}else n.m_bCluster&&t.m_clCarteApi.clGestionCluster().repaint()};CWDCarteApiMarqueur.prototype._clCreationObjetApi=function(){return new google.maps.Marker};CWDCarteApiMarqueur.prototype._tabObjetApi=function(n){return n.m_clCarteApi.m_tabMarker};CWDCarteApiMarqueur.prototype._tabObjetChamp=function(n){return n.m_clCarteApi.m_oChamp.m_oDonnees.m_tabMarqueurs};CWDCarteApiMarqueur.prototype.TraiteChargementImage=function(n,t){var i=new google.maps.Point(0,0);WDCarteAPI._CalculeAnchor(t,n.width,n.height,i);this.m_clObjetApi&&(this.m_clObjetApi.icon.anchor=i)};CWDCarteApiForme.prototype=new CWDCarteApiObjet;CWDCarteApiForme.prototype.constructor=CWDCarteApiForme;CWDCarteApiForme.prototype._sNomVarClicWD=function(){return"gsIDClicForme"};CWDCarteApiForme.prototype._tabObjetApi=function(n){return n.m_clCarteApi.m_tabForme};CWDCarteApiForme.prototype._tabObjetChamp=function(n){return n.m_clCarteApi.m_oChamp.m_oDonnees.m_tabFormes};CWDCarteApiForme.prototype._bTraitContinuSeulement=function(){return!0};CWDCarteApiForme.prototype._clCreationOptionObjetApi=function(n){var t=CWDCarteApiObjet.prototype._clCreationOptionObjetApi.apply(this,[n]),e,r;if(t.strokeColor=n.m_sCouleurTrait,t.strokeWeight=n.m_nEpaisseurTrait,e=WDCarteGoogleMaps.nOpaciteCouleurWLVersVue(n.m_nOpaciteTrait),r=this._bTraitContinuSeulement(),!r){var u=3,i={m_nPosition:0},f=this.sPathPosition(0,0);switch(n.m_nTypeTrait){case WDCarteAPI.nTypeTraitMixte:f+=this.sPathCoordV(i,u)+this.sPathPositionV(i,u)+this.sPathCoordV(i,1);break;case WDCarteAPI.nTypeTraitPointille:f+=this.sPathCoordV(i,1);break;case WDCarteAPI.nTypeTraitTiret:f+=this.sPathCoordV(i,u);break;default:r=!0}r||(t.icons=[{icon:{path:f,strokeOpacity:e},repeat:""+(i.m_nPosition+u)*n.m_nEpaisseurTrait+"px"}])}return t.strokeOpacity=r?e:0,t.zIndex=n.m_nAltitude,t};CWDCarteApiForme.prototype._InitFondOptionObjetApi=function(n,t){t.fillColor=n.m_sCouleurFond;t.fillOpacity=WDCarteGoogleMaps.nOpaciteCouleurWLVersVue(n.m_nOpaciteFond)};CWDCarteApiPolyligne.prototype=new CWDCarteApiForme;CWDCarteApiPolyligne.prototype.constructor=CWDCarteApiPolyligne;CWDCarteApiPolyligne.prototype.sCreerIdentifiant=function(){return WDCarteAPI.CreerIdentifiant(WDCarteAPI.nTypePolyligne)};CWDCarteApiPolyligne.prototype._bTraitContinuSeulement=function(){return!1};CWDCarteApiPolyligne.prototype._clCreationCoordApi=function(n){for(var i,r,u=[],t=0;t<n.m_tabPoint.length;t++){if(i=n.m_tabPoint[t],r=WDCarteGoogleMaps.clCreationPositionApi(i[0],i[1]),r==null)return null;u.push(r)}return u};CWDCarteApiPolyligne.prototype._clCreationOptionObjetApi=function(n){var t=CWDCarteApiForme.prototype._clCreationOptionObjetApi.apply(this,[n]);return t.path=this.m_clCoordApi,t.geodesic=n.m_bGeodesique,t};CWDCarteApiPolyligne.prototype._clCreationObjetApi=function(){return new google.maps.Polyline};CWDCarteApiPolygone.prototype=new CWDCarteApiPolyligne;CWDCarteApiPolygone.prototype.constructor=CWDCarteApiPolygone;CWDCarteApiPolygone.prototype.sCreerIdentifiant=function(){return WDCarteAPI.CreerIdentifiant(WDCarteAPI.nTypePolygone)};CWDCarteApiPolygone.prototype._bTraitContinuSeulement=function(){return!0};CWDCarteApiPolygone.prototype._clCreationOptionObjetApi=function(n){var t=CWDCarteApiPolyligne.prototype._clCreationOptionObjetApi.apply(this,[n]);return this._InitFondOptionObjetApi(n,t),t};CWDCarteApiPolygone.prototype._clCreationObjetApi=function(){return new google.maps.Polygon};CWDCarteApiCercle.prototype=new CWDCarteApiForme;CWDCarteApiCercle.prototype.constructor=CWDCarteApiCercle;CWDCarteApiCercle.prototype.sCreerIdentifiant=function(){return WDCarteAPI.CreerIdentifiant(WDCarteAPI.nTypeCercle)};CWDCarteApiCercle.prototype._clCreationOptionObjetApi=function(n){var t=CWDCarteApiForme.prototype._clCreationOptionObjetApi.apply(this,[n]);return t.center=this.m_clCoordApi,t.radius=n.m_nRayon,this._InitFondOptionObjetApi(n,t),t};CWDCarteApiCercle.prototype._clCreationObjetApi=function(){return new google.maps.Circle};CImageGoogleMapAvecRotation.DeclarePrototype=function(){CImageGoogleMapAvecRotation.prototype=new google.maps.OverlayView;CImageGoogleMapAvecRotation.prototype.constructor=CImageGoogleMapAvecRotation;CImageGoogleMapAvecRotation.prototype.clDivImage=function(){if(!this.m_clDiv){this.m_clDiv=document.createElement("div");var n=this.m_clDiv.style;n.borderStyle="none";n.borderWidth="0px";n.position="absolute"}return this.m_clDiv};CImageGoogleMapAvecRotation.prototype.onAdd=function(){var r=document.createElement("img"),t,n,i;r.src=this.url;t=r.style;t.width="100%";t.height="100%";t.position="absolute";n=this.clDivImage();n.appendChild(r);this.getPanes().overlayMouseTarget.appendChild(n);n.ID_WD=this.ID_WD;this.m_clObjet._BrancheCallback(n,this.m_clParam,"click",this.m_clParam.m_sActionClic,this.m_clObjet._sNomVarClicWD(),!0);i=n.style;i.transform="rotate("+this.m_clParam.m_nAngle+"deg)";i.zIndex=this.m_clParam.m_nAltitude;i.opacity=WDCarteGoogleMaps.nOpaciteWLVersVue(this.m_clParam.m_nOpacite)};CImageGoogleMapAvecRotation.prototype.draw=function(){var r=this.getProjection(),u=this.bounds,t=r.fromLatLngToDivPixel(u.getSouthWest()),i=r.fromLatLngToDivPixel(u.getNorthEast()),n=this.m_clDiv.style;n.left=t.x+"px";n.top=i.y+"px";n.width=i.x-t.x+"px";n.height=t.y-i.y+"px"};CImageGoogleMapAvecRotation.prototype.onRemove=function(){this.m_clDiv.parentNode.removeChild(this.m_clDiv);this.m_clDiv=null}};CWDCarteApiImage.prototype=new CWDCarteApiObjetAvecImage;CWDCarteApiImage.prototype.constructor=CWDCarteApiImage;CWDCarteApiImage.prototype.sCreerIdentifiant=function(){return WDCarteAPI.CreerIdentifiant(WDCarteAPI.nTypeImage)};CWDCarteApiImage.prototype._sNomVarClicWD=function(){return"gsIDClicImage"};CWDCarteApiImage.prototype._tabObjetApi=function(n){return n.m_clCarteApi.m_tabImage};CWDCarteApiImage.prototype._tabObjetChamp=function(n){return n.m_clCarteApi.m_oChamp.m_oDonnees.m_tabImages};CWDCarteApiImage.nVersNord=0;CWDCarteApiImage.nVersSud=180;CWDCarteApiImage.nVersEst=90;CWDCarteApiImage.nVersOuest=270;CWDCarteApiImage.prototype._clDecalageCoordApi=function(n,t,i){return t&&(n=google.maps.geometry.spherical.computeOffset(n,t,i)),n};CWDCarteApiImage.prototype._clDecalagePositionApi=function(n,t,i,r){return this._clDecalageCoordApi(this._clDecalageCoordApi(n,t,r?CWDCarteApiImage.nVersEst:CWDCarteApiImage.nVersOuest),i,r?CWDCarteApiImage.nVersNord:CWDCarteApiImage.nVersSud)};CWDCarteApiImage.prototype._clCalculCoordApi=function(n,t){var i={},r=this.m_dLargeur/2,u=n/2;switch(t){case WDCarteAPI.emqBas:i=this._clDecalagePositionApi(this.m_clPositionApi,r,n);break;case WDCarteAPI.emqHaut:i=this._clDecalagePositionApi(this.m_clPositionApi,r);break;case WDCarteAPI.emqCentre:default:i=this._clDecalagePositionApi(this.m_clPositionApi,r,u);break;case WDCarteAPI.emqDroite:i=this._clDecalagePositionApi(this.m_clPositionApi,0,u);break;case WDCarteAPI.emqGauche:i=this._clDecalagePositionApi(this.m_clPositionApi,this.m_dLargeur,u)}return new google.maps.LatLngBounds(i,this._clDecalagePositionApi(i,this.m_dLargeur,n,!0))};CWDCarteApiImage.prototype._clCreationCoordApi=function(n){return(this.m_clPositionApi=CWDCarteApiObjet.prototype._clCreationCoordApi.apply(this,[n]),this.m_clPositionApi==null)?null:(this.m_dLargeur=n.m_dLargeur,this._clCalculCoordApi(n.m_dHauteur,n.m_eAlignement))};CWDCarteApiImage.prototype._SetCoordApi=function(n){this.m_clObjetApi.bounds=n};CWDCarteApiImage.prototype._clCreationOptionObjetApi=function(n){var t=CWDCarteApiObjetAvecImage.prototype._clCreationOptionObjetApi.apply(this,[n]);return this._SetCoordApi(this.m_clCoordApi),this.bChargeImage(n.m_clCarteApi.m_clCarte,n.m_sImage,n.m_eAlignement,n.m_dHauteur==0),this.m_clObjetApi.url=n.m_sImage,this.m_clObjetApi.m_clParam=n,this.m_clObjetApi.m_clObjet=this,t};CWDCarteApiImage.prototype._clCreationObjetApi=function(){return new CImageGoogleMapAvecRotation(!0)};CWDCarteApiImage.prototype.TraiteChargementImage=function(n,t){this._SetCoordApi(this._clCalculCoordApi(this.m_dLargeur*n.height/n.width,t))};WDCarteGoogleMaps.prototype=new WDCarteAPI;WDCarteGoogleMaps.prototype.constructor=WDCarteGoogleMaps;WDCarteGoogleMaps.URL="http://maps.google.com/maps/api/js?v=3&libraries=geometry";WDCarteGoogleMaps.DeclarePrototype=function(){WDCarteGoogleMaps.bDeclarePrototype||(WDCarteGoogleMaps.bDeclarePrototype=!0,CWDCarteApiGestionClusterMarqueur.DeclarePrototype(),CWDCarteApiIconeCluster.DeclarePrototype(),CImageGoogleMapAvecRotation.DeclarePrototype())};WDCarteGoogleMaps._nModeCarteWlVersGGl=function(n){return n==1?google.maps.MapTypeId.ROADMAP:n==2?google.maps.MapTypeId.HYBRID:google.maps.MapTypeId.ROADMAP};WDCarteGoogleMaps.clCreationPositionApi=function(n,t){return WDCarteAPI.bValideCoordonnees(n,t)?new google.maps.LatLng(n,t):null};WDCarteGoogleMaps.clCreationZoneApi=function(n,t,i,r){var u,f;return n<=i||r<=t?null:(u=WDCarteGoogleMaps.clCreationPositionApi(i,t),u==null)?null:(f=WDCarteGoogleMaps.clCreationPositionApi(n,r),f==null)?null:new google.maps.LatLngBounds(u,f)};WDCarteGoogleMaps.RefreshCarte=function(n,t){n.setMap(null);n.setMap(t)};WDCarteGoogleMaps.prototype.ConvPointToWord256x256=function(n){var u=this.m_clCarte.getProjection(),f=this.domGetBaliseSupport(),o=f.clientWidth,s=f.clientHeight,e=this.m_clCarte.getBounds(),h=e.getNorthEast(),c=e.getSouthWest(),t=u.fromLatLngToPoint(h),r=u.fromLatLngToPoint(c);t.x<r.x&&(t.x+=256);var l=t.x-r.x,a=r.y-t.y,i=new google.maps.Point(0,0);return i.x=r.x+n.x*l/o,i.x>256&&(i.x-=256),i.y=t.y+n.y*a/s,i};WDCarteGoogleMaps.prototype.ConvPointToVue=function(n){var u=this.m_clCarte.getProjection(),f=this.domGetBaliseSupport(),o=f.clientWidth,s=f.clientHeight,e=this.m_clCarte.getBounds(),h=e.getNorthEast(),c=e.getSouthWest(),t=u.fromLatLngToPoint(h),i=u.fromLatLngToPoint(c);t.x<i.x&&(t.x+=256);var l=t.x-i.x,a=i.y-t.y,r=new google.maps.Point(0,0);return r.x=o*(n.x-i.x)/l,r.y=s*(n.y-t.y)/a,r};WDCarteGoogleMaps.nOpaciteWLVersVue=function(n,t){return n/(t===undefined?100:t)};WDCarteGoogleMaps.nOpaciteCouleurWLVersVue=function(n){return WDCarteGoogleMaps.nOpaciteWLVersVue(n,WDCarteAPI.nOpaciteCouleurWLMax)};WDCarteGoogleMaps.prototype._bMarqueurExiste=function(n){for(var i,t=0;t<this.m_tabMarker.length;++t)if(i=this.m_tabMarker[t],i!=null&&i.position.equals(n))return!0;return!1};WDCarteGoogleMaps.prototype._sGetLicence=function(){for(var t,n=0;n<document.scripts.length;++n){var i=document.scripts[n].src,r="//maps.google.com/maps/api/js?",u=i.indexOf(r);if(u>-1)return(t=i.substr(r.length+u),!t)?"":("&"+t).replace("&v=3","")}return""};WDCarteGoogleMaps.prototype.clJSONAppelRequeteRecupPositionAdresse=function(n){return clWDAJAXMain.JSONExecute("https://maps.googleapis.com/maps/api/geocode/json?address="+n+this._sGetLicence())};WDCarteGoogleMaps.prototype._AjouteItineraireDeVers=function(n,t,i,r,u,f){for(var s,h,v,b,c,a,l,e,g,y,k,p,d={visible:!0},o=[],w=0;w<n.length;w++){if(s=n[w],h=undefined,s instanceof Array){if(!WDCarteAPI.bValideCoordonnees(s[0],s[1]))return"";h=new google.maps.LatLng(s[0],s[1]);this._bMarqueurExiste(h)&&(d.visible=!1)}else if(h=s,t==1)if(this.m_bModeWebDev)if(v=this.clJSONAppelRequeteRecupPositionAdresse(h),v&&v.results&&v.results.length>0)b=v.results[0].geometry.location,h=new google.maps.LatLng(b.lat,b.lng);else continue;else continue;o.push(h)}c=google.maps.DirectionsTravelMode.DRIVING;switch(t){case 1:c=google.maps.DirectionsTravelMode.DRIVING;break;case 2:c=google.maps.DirectionsTravelMode.WALKING;break;case 3:c=google.maps.DirectionsTravelMode.BICYCLING;break;case 4:c=google.maps.DirectionsTravelMode.DRIVING;break;case 5:c=google.maps.DirectionsTravelMode.DRIVING}if(a=!0,l={},i!==undefined&&(l.strokeColor=i,a=!1),r!==undefined&&(l.strokeOpacity=r/100,a=!1),u!==undefined&&(l.strokeWeight=u,a=!1),o.length>2&&t!=1&&(l.path=o,a=!1),t==1)e=new google.maps.Polyline(l),e.distanceEnMetre=0,e.setPath(o);else{if(e=new google.maps.DirectionsRenderer(a?undefined:{polylineOptions:l,markerOptions:d}),e.distanceEnMetre=undefined,g=new google.maps.DirectionsService,y={origin:o[0],destination:o[o.length-1],travelMode:c},o.length>0){for(k=[],p=1;p<o.length-1;++p)k.push({location:o[p],stopover:!0});t!=5&&(y.optimizeWaypoints=!0);y.waypoints=k}g.route(y,function(n,t){if(t==google.maps.DirectionsStatus.OK){e.setDirections(n);e.distanceEnMetre=n.routes[0].legs[0].distance.value;for(var i=1;i<n.routes[0].legs.length;i++)e.distanceEnMetre+=n.routes[0].legs[i].distance.value}else e.distanceEnMetre=0})}return e.setMap(this.m_clCarte),this.m_tabItineraire.push(e),e.m_nID=f||WDCarteAPI.CreerIdentifiant()};WDCarteGoogleMaps.prototype.EcouteChangementPosition=function(){WDCarteAPI.prototype.EcouteChangementPosition.apply(this,arguments);this.m_clCarte!==undefined&&this.m_fChangementPosition!==undefined&&google.maps.event.addListener(this.m_clCarte,"center_changed",this.m_fChangementPosition)};WDCarteGoogleMaps.prototype.CreateMap=function(n,t){var e=WDCarteAPI.gnLatitudeDefaut,o=WDCarteAPI.gnLongitudeDefaut,s,f,i,r,u;if(this.m_nLatitude_Initial!=null)e=this.m_nLatitude_Initial,o=this.m_nLongitude_Initial;else if(this.m_sAdresse_Initial){s=new google.maps.Geocoder;f=this;s.geocode({address:this.m_sAdresse_Initial},function(i,r){if(r==google.maps.GeocoderStatus.OK){var u=i[0].geometry.location;f.m_nLatitude_Initial=u.lat();f.m_nLongitude_Initial=u.lng();f.CreateMap(n,t)}});return}i=WDCarteAPI.gnZoomDefaut;this.m_nZoom_Initial!=null&&(i=this.m_nZoom_Initial);i==0&&(i=4);r={center:new google.maps.LatLng(e,o),zoom:i,mapTypeControl:!0,mapTypeId:WDCarteGoogleMaps._nModeCarteWlVersGGl(this.m_nTypeCarte_Initial),mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.HORIZONTAL_BAR},navigationControl:!0,zoomControl:!0,panControl:!0,scaleControl:!0,keyboardShortcuts:!1,disableDefaultUI:!1,noClear:!1,streetViewControl:!0,streetViewControlOptions:{position:google.maps.ControlPosition.LEFT_TOP}};r.zoomControl=this.m_bAfficheControleZoom_Initial;r.panControl=this.m_bAfficheControleZoom_Initial;r.scaleControl=this.m_bAfficheControleZoom_Initial;this.m_sId=n;this.m_clCarte=new google.maps.Map(this.domGetBaliseSupport(),r);this.MAP_SetInfoTrafic(this.m_bInfoTrafic_Initial);this.MAP_SetBoussole(this.m_bBoussole_Initial);this.MAP_SetAngleRotation(this.m_nAngleRotation_Initial);this.MAP_SetInclinaison(this.m_nInclinaison_Initial);google.maps.event.addListener(this.m_clCarte,"tilesloaded",function(){WDCarteAPI.m_bToutEstCharge=!0});u=this;google.maps.event.addListener(this.m_clCarte,"zoom_changed",function(){if(u.bChampWebDev()){var n=u.MAP_GetZoom();n>0&&(u.m_oChamp.m_oDonnees.m_nZoom=n,u.m_oChamp.__UpdateChampCache())}});t&&t(this)};WDCarteGoogleMaps.prototype.MAP_bGetToutEstCharge=function(){return WDCarteAPI.m_bToutEstCharge};WDCarteGoogleMaps.prototype.MAP_SetPosition=function(n,t,i,r){if(!WDCarteAPI.bValideCoordonnees(n,t))return!1;var u=new google.maps.LatLng(n,t);i?this.m_clCarte.panTo(u):this.m_clCarte.setCenter(u);r&&r(!0)};WDCarteGoogleMaps.prototype.MAP_SetPositionLieux=function(n,t,i){WDCarteAPI.gsRetVal_SetPositionLieux="*";var u=new google.maps.Geocoder,r=this;u.geocode({address:n},function(n,u){u==google.maps.GeocoderStatus.OK?(t?r.m_clCarte.panTo(n[0].geometry.location):r.m_clCarte.setCenter(n[0].geometry.location),WDCarteAPI.gsRetVal_SetPositionLieux="1",i&&i(!0)):(WDCarteAPI.gsRetVal_SetPositionLieux="0",i&&i(!1))})};WDCarteGoogleMaps.sPositionVersChaine=function(n){return WDCarteAPI.sCoordVersChaine(n.lat(),n.lng())};WDCarteGoogleMaps.prototype.MAP_GetPositionLieux=function(n){try{WDCarteAPI.gsRetVal_SetPositionLieux="*";var t=new google.maps.Geocoder;t.geocode({address:n},function(n,t){if(t==google.maps.GeocoderStatus.OK){var i=n[0].geometry.location;WDCarteAPI.gsRetVal_SetPositionLieux=WDCarteGoogleMaps.sPositionVersChaine(i)}else WDCarteAPI.gsRetVal_SetPositionLieux="0"})}catch(i){WDCarteAPI.gsRetVal_SetPositionLieux="0"}};WDCarteGoogleMaps.prototype.MAP_GetPosition=function(){try{return WDCarteGoogleMaps.sPositionVersChaine(this.m_clCarte.getCenter())}catch(n){WDCarteAPI.gsRetVal_SetPositionLieux="0"}};WDCarteGoogleMaps.prototype.MAP_GetPositionFromPoint=function(n,t){var i=this.m_clCarte.getProjection(),r,u;return i==null?"":(r=new google.maps.Point(n,t),u=this.ConvPointToWord256x256(r),WDCarteGoogleMaps.sPositionVersChaine(i.fromPointToLatLng(u)))};WDCarteGoogleMaps.prototype.MAP_GetPointFromPosition=function(n,t){var i;if(!WDCarteAPI.bValideCoordonnees(n,t)||(i=this.m_clCarte.getProjection(),i==null))return"";var u=new google.maps.LatLng(n,t),f=i.fromLatLngToPoint(u),r=this.ConvPointToVue(f);return WDCarteAPI.sCoordVersChaine(r.x,r.y)};WDCarteGoogleMaps.prototype.MAP_SetZoom=function(n){this.m_clCarte.setZoom(n)};WDCarteGoogleMaps.prototype.MAP_SetZoomAdapte=function(){var t,n;if(!(this.m_tabMarker.length<=0)){for(t=new google.maps.LatLngBounds,n=0;n<this.m_tabMarker.length;n++)t.extend(this.m_tabMarker[n].position);this.m_clCarte.fitBounds(t)}};WDCarteGoogleMaps.prototype.MAP_AfficheZone=function(n,t,i,r){var u=WDCarteGoogleMaps.clCreationZoneApi(n,t,i,r);return u?(this.m_clCarte.fitBounds(u),!0):!1};WDCarteGoogleMaps.prototype.MAP_LimiteZone=function(n,t,i,r){var f,u;if(n!==undefined){if(u=WDCarteGoogleMaps.clCreationZoneApi(n,t,i,r),!u)return!1;f={latLngBounds:u}}return this.m_clCarte.setOptions({restriction:f}),!0};WDCarteGoogleMaps.prototype.MAP_ChangeStyle=function(n,t){var i;switch(n){case WDCarteAPI.nStyleAuto:n=WDCarteAPI.nStyleDefaut;case WDCarteAPI.nStyleDefaut:break;case WDCarteAPI.nStyleSombre:case WDCarteAPI.nStyleNuit:case WDCarteAPI.nStyleArgent:case WDCarteAPI.nStyleRetro:case WDCarteAPI.nStyleAubergine:i=WDCarteAPI.tabStyle[n];break;case WDCarteAPI.nStylePerso:i=t;break;default:return!1}return this.m_clCarte.setOptions({styles:i}),this.m_nStyle=n,!0};WDCarteGoogleMaps.prototype.MAP_RecupereStyle=function(){return this.m_nStyle};WDCarteGoogleMaps.prototype.MAP_AfficheImagePopupMarqueur=function(n){var i=CWDCarteApiMarqueur.m_sclPopupApi,t;i&&(t=i.m_clDivPopup,t)&&(t.innerHTML="<img src='"+n+"'>")};WDCarteGoogleMaps.prototype.MAP_AjouteMarqueur=function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it){return new CWDCarteApiMarqueur(!0).nAjout({m_clCarteApi:this,m_dLongitude:t,m_dLatitude:n,m_sLibelle:i,m_sActionClic:r,m_sImage:u,m_nID:f,m_nAncrageX:e,m_nAncrageY:o,m_nOpacite:s,m_nAltitude:h,m_bDeplacable:c,m_sActionDeplacement:l,m_bAvecPopup:a,m_sNom:v,m_sActionClicPopup:y,m_nFormeImage:w,m_bCluster:p,m_nTailleFormeImage:b,m_sTexteFormeImage:k,m_sCouleurTraitFormeImage:d,m_nOpaciteTraitFormeImage:g,m_sCouleurFondFormeImage:nt,m_nOpaciteFondFormeImage:tt,m_sIdPourPopup:it})};WDCarteGoogleMaps.ModifieMarqueurAlignement=function(n,t,i,r,u){var e=u===undefined,f;return t.bChargeImage(n,i,r,e)?(f={url:i,origin:new google.maps.Point(0,0)},e||(f.anchor=new google.maps.Point(r,u)),f):""};WDCarteGoogleMaps.prototype._bMAP_SupprimeObjet=function(n,t,i){for(var r,u=[],f=0;f<t.length;++f)r=t[f],r.ID_WD!=n?u.push(r):r.setMap(null);return t.length===u.length?!1:(i.apply(this,[u]),!0)};WDCarteGoogleMaps.prototype.MAP_SupprimeMarqueur=function(n){if(this.m_clGestionCluster){var t=this.clMarqueurParId(n);if(!t)return!1;t.m_bCluster&&this.m_clGestionCluster.removeMarker(t)}return this._bMAP_SupprimeObjet(n,this.m_tabMarker,this._SetTableauMarqueur)};WDCarteGoogleMaps.prototype.MAP_ModifieMarqueur=function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it){return new CWDCarteApiMarqueur(!0).Modification({m_clCarteApi:this,m_dLongitude:i,m_dLatitude:t,m_sLibelle:r,m_sActionClic:o,m_sImage:u,m_nID:n,m_nAncrageX:f,m_nAncrageY:e,m_nOpacite:s,m_nAltitude:h,m_bDeplacable:c,m_sActionDeplacement:l,m_bAvecPopup:a,m_sNom:v,m_sActionClicPopup:y,m_bCluster:p,m_nFormeImage:w,m_nTailleFormeImage:b,m_sTexteFormeImage:k,m_sCouleurTraitFormeImage:d,m_nOpaciteTraitFormeImage:g,m_sCouleurFondFormeImage:nt,m_nOpaciteFondFormeImage:tt,m_sIdPourPopup:it})};WDCarteGoogleMaps.prototype.MAP_ClusterAffiche=function(n,t,i,r,u,f,e,o,s){return this.clGestionCluster().AfficheCluster({m_clCarteApi:this,m_sId:n,m_sUrlImage:t,m_nFormeImage:i,m_nTailleFormeImage:r,m_sTexteFormeImage:u,m_sCouleurTraitFormeImage:f,m_nOpaciteTraitFormeImage:e,m_sCouleurFondFormeImage:o,m_nOpaciteFondFormeImage:s,m_nAncrageX:WDCarteAPI.emqHaut})};WDCarteGoogleMaps.prototype._MAP_SupprimeToutObjet=function(n,t){for(var i=0;i<n.length;++i)n[i].setMap(null);return t.apply(this,[[]]),!0};WDCarteGoogleMaps.prototype.MAP_SupprimeToutMarqueur=function(){return this.m_clGestionCluster&&this.m_clGestionCluster.clearMarkers(),this._MAP_SupprimeToutObjet(this.m_tabMarker,this._SetTableauMarqueur)};WDCarteGoogleMaps.prototype._clPopupMarqueur=function(n,t){if(!n||!n.m_clPopupApi)return null;var i=n.m_clPopupApi;return(t&&(i.m_clMarqueurApi=n),i.m_clMarqueurApi!=n)?null:i};WDCarteGoogleMaps.sIdFramePopupMarqueur="_PCS_ID_FRAME_POPUP_MARQUEUR";WDCarteGoogleMaps.ChangeTailleElement=function(n,t,i){var r=n.style;r.width=clWDUtil.GetDimensionPxPourStyle(t);r.height=clWDUtil.GetDimensionPxPourStyle(i)};WDCarteGoogleMaps.CharmentIframePopupMarqueur=function(){var t=this.parent.document.getElementById(WDCarteGoogleMaps.sIdFramePopupMarqueur),n;t&&(n=t.contentWindow.document.body,n&&WDCarteGoogleMaps.ChangeTailleElement(t,n.offsetWidth,n.offsetHeight))};WDCarteGoogleMaps.prototype.bAffichePopup=function(n){var i=n.m_clParam,u,r,e,o,f,s,t,h,c;return(WDCarteAPI.gsIDPopupAffiche=i.m_sIdPourPopup,u=this._clPopupMarqueur(n,!0),!u)?!1:(r=u.m_clDivPopup,r.ID_WD=n.ID_WD,n.m_clObjet._BrancheCallback(r,i,"click",i.m_sActionClicPopup,"gsIDClicPopup",!0),WDCarteAPI.gbModeWD||(e="<div align=center color=black><b>"+clWDUtil.sEncodeInnerHTML(i.m_sNom,!0)+"<\/b><\/div>",i.m_sLibelle!=""&&(e+="<div align=center color=gray>"+clWDUtil.sEncodeInnerHTML(i.m_sLibelle,!0)+"<\/div> "),r.innerHTML=e),u.open(this.m_clCarte,n),u.m_bOuvert=!0,o=this.clDinoMarqueurApi(n),!o)?!0:(f=this.m_oChamp,!f||!f.m_oDonnees)?!0:(clWDUtil&&clWDUtil.sGetPageAction&&(s=clWDUtil.sGetPageAction()),!s)?!0:(t=new XMLHttpRequest,t.open("POST",s,!0),t.onload=function(){var n,i;!1!=(t.readyState===4&&t.status===200)&&(n=document.createElement("iframe"),n.src='javascript:""',n.frameBorder="0",n.border="0",n.id=WDCarteGoogleMaps.sIdFramePopupMarqueur,clWDUtil.SupprimeFils(r),n=r.appendChild(n),WDCarteGoogleMaps.ChangeTailleElement(n,0,0),i=n.contentWindow.document,i.open(),i.write(t.responseText+"<script>window.onload=window.parent.WDCarteGoogleMaps.CharmentIframePopupMarqueur<\/script>"),i.close())},t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),h=f.m_sAliasChamp,c=o.clCloneNettoyePourJsonServeur(),t.send("WD_ACTION_=DETAILMARQUEUR&WD_BUTTON_CLICK_="+h+"&"+h+"="+c.ms_sNomPourParam+"|"+encodeURIComponent(JSON.stringify(c))),!0)};WDCarteGoogleMaps.prototype.MAP_AffichePopup=function(n){return this.bAffichePopup(this.clMarqueurParId(n))};WDCarteGoogleMaps.prototype.bFermePopup=function(n){if(!n)return!1;var t=this._clPopupMarqueur(n);return t?(t.close(),t.m_bOuvert=!1,!0):!0};WDCarteGoogleMaps.prototype.MAP_FermePopup=function(n){return this.bFermePopup(this.clMarqueurParId(n))};WDCarteGoogleMaps.prototype.MAP_PopupAffichee=function(n){var t=this._clPopupMarqueur(this.clMarqueurParId(n));return t?t.m_bOuvert:!1};WDCarteGoogleMaps.prototype.MAP_SupprimeForme=function(n){return this._bMAP_SupprimeObjet(n,this.m_tabForme,this._SetTableauForme)};WDCarteGoogleMaps.prototype.MAP_SupprimeToutForme=function(){return this._MAP_SupprimeToutObjet(this.m_tabForme,this._SetTableauForme)};WDCarteGoogleMaps.prototype.MAP_AjoutePolyligne=function(n,t,i,r,u,f,e,o,s,h){return new CWDCarteApiPolyligne(!0).nAjout({m_clCarteApi:this,m_tabPoint:n,m_sCouleurTrait:t,m_nTypeTrait:i,m_nEpaisseurTrait:r,m_nOpaciteTrait:u,m_sLibelle:f,m_sActionClic:e,m_nAltitude:o,m_bGeodesique:s,m_nID:h})};WDCarteGoogleMaps.prototype.MAP_ModifiePolyligne=function(n,t,i,r,u,f,e,o,s,h){return new CWDCarteApiPolyligne(!0).Modification({m_clCarteApi:this,m_tabPoint:t,m_sCouleurTrait:i,m_nTypeTrait:r,m_nEpaisseurTrait:u,m_nOpaciteTrait:f,m_sLibelle:e,m_sActionClic:o,m_nAltitude:s,m_bGeodesique:h,m_nID:n})};WDCarteGoogleMaps.prototype.MAP_AjoutePolygone=function(n,t,i,r,u,f,e,o,s,h,c,l){return new CWDCarteApiPolygone(!0).nAjout({m_clCarteApi:this,m_tabPoint:n,m_sCouleurTrait:t,m_nTypeTrait:i,m_nEpaisseurTrait:r,m_nOpaciteTrait:u,m_sCouleurFond:f,m_nOpaciteFond:e,m_sLibelle:o,m_sActionClic:s,m_nAltitude:h,m_bGeodesique:c,m_nID:l})};WDCarteGoogleMaps.prototype.MAP_ModifiePolygone=function(n,t,i,r,u,f,e,o,s,h,c,l){return new CWDCarteApiPolygone(!0).Modification({m_clCarteApi:this,m_tabPoint:t,m_sCouleurTrait:i,m_nTypeTrait:r,m_nEpaisseurTrait:u,m_nOpaciteTrait:f,m_sCouleurFond:e,m_nOpaciteFond:o,m_sLibelle:s,m_sActionClic:h,m_nAltitude:c,m_bGeodesique:l,m_nID:n})};WDCarteGoogleMaps.prototype.MAP_AjouteCercle=function(n,t,i,r,u,f,e,o,s,h,c,l,a){return new CWDCarteApiCercle(!0).nAjout({m_clCarteApi:this,m_dLatitude:n,m_dLongitude:t,m_nRayon:i,m_sCouleurTrait:r,m_nTypeTrait:u,m_nEpaisseurTrait:f,m_nOpaciteTrait:e,m_sCouleurFond:o,m_nOpaciteFond:s,m_sLibelle:h,m_sActionClic:c,m_nAltitude:l,m_nID:a})};WDCarteGoogleMaps.prototype.MAP_ModifieCercle=function(n,t,i,r,u,f,e,o,s,h,c,l,a){return new CWDCarteApiCercle(!0).Modification({m_clCarteApi:this,m_dLatitude:t,m_dLongitude:i,m_nRayon:r,m_sCouleurTrait:u,m_nTypeTrait:f,m_nEpaisseurTrait:e,m_nOpaciteTrait:o,m_sCouleurFond:s,m_nOpaciteFond:h,m_sLibelle:c,m_sActionClic:l,m_nAltitude:a,m_nID:n})};WDCarteGoogleMaps.prototype.MAP_AjouteImage=function(n,t,i,r,u,f,e,o,s,h,c,l){return new CWDCarteApiImage(!0).nAjout({m_clCarteApi:this,m_dLatitude:n,m_dLongitude:t,m_sImage:i,m_dLargeur:r,m_dHauteur:u,m_eAlignement:f,m_nOpacite:e,m_sLibelle:o,m_sActionClic:s,m_nAltitude:h,m_nAngle:c,m_nID:l})};WDCarteGoogleMaps.prototype.MAP_SupprimeImage=function(n){return this._bMAP_SupprimeObjet(n,this.m_tabImage,this._SetTableauImage)};WDCarteGoogleMaps.prototype.MAP_ModifieImage=function(n,t,i,r,u,f,e,o,s,h,c,l){return new CWDCarteApiImage(!0).Modification({m_clCarteApi:this,m_dLatitude:t,m_dLongitude:i,m_sImage:r,m_dLargeur:u,m_dHauteur:f,m_eAlignement:e,m_nOpacite:o,m_sLibelle:s,m_sActionClic:h,m_nAltitude:c,m_nAngle:l,m_nID:n})};WDCarteGoogleMaps.prototype.MAP_SupprimeToutImage=function(){return this._MAP_SupprimeToutObjet(this.m_tabImage,this._SetTableauImage)};WDCarteGoogleMaps.prototype.MAP_SetModeCarte=function(n){this.m_clCarte.setMapTypeId(WDCarteGoogleMaps._nModeCarteWlVersGGl(n))};WDCarteGoogleMaps.prototype.MAP_GetModeCarte=function(){var n=this.m_clCarte.getMapTypeId();return n==google.maps.MapTypeId.ROADMAP?1:n==google.maps.MapTypeId.HYBRID?2:0};WDCarteGoogleMaps.prototype.MAP_GetZoom=function(){return this.m_clCarte.getZoom()};WDCarteGoogleMaps.prototype.MAP_SetInfoTrafic=function(n){!!n!=this.MAP_GetInfoTrafic()&&(n?this.m_clInfoTrafic=new google.maps.TrafficLayer({map:this.m_clCarte}):(this.m_clInfoTrafic.setMap(null),this.m_clInfoTrafic=null))};WDCarteGoogleMaps.prototype.MAP_GetInfoTrafic=function(){return!!this.m_clInfoTrafic};WDCarteGoogleMaps.prototype.MAP_SetBoussole=function(n){this.m_bBoussole=n};WDCarteGoogleMaps.prototype.MAP_GetBoussole=function(){return this.m_bBoussole};WDCarteGoogleMaps.prototype.MajGesture=function(){this.m_clCarte.setOptions({gestureHandling:this.m_bAvecZoom||this.m_bAvecRotation||this.m_bAvecScroll||this.m_bAvecInclinaison?"auto":"none"})};WDCarteGoogleMaps.prototype.MAP_SetAvecZoom=function(n){this.m_bAvecZoom=n;this.MajGesture()};WDCarteGoogleMaps.prototype.MAP_GetAvecZoom=function(){return this.m_bAvecZoom};WDCarteGoogleMaps.prototype.MAP_SetAvecRotation=function(n){this.m_bAvecRotation=n;this.MajGesture()};WDCarteGoogleMaps.prototype.MAP_GetAvecRotation=function(){return this.m_bAvecRotation};WDCarteGoogleMaps.prototype.MAP_SetAvecScroll=function(n){this.m_bAvecScroll=n;this.MajGesture()};WDCarteGoogleMaps.prototype.MAP_GetAvecScroll=function(){return this.m_bAvecScroll};WDCarteGoogleMaps.prototype.MAP_SetAvecInclinaison=function(n){this.m_bAvecInclinaison=n;this.MajGesture()};WDCarteGoogleMaps.prototype.MAP_GetAvecInclinaison=function(){return this.m_bAvecInclinaison};WDCarteGoogleMaps.prototype.MAP_SetAngleRotation=function(n){this.m_clCarte.setHeading(n)};WDCarteGoogleMaps.prototype.MAP_GetAngleRotation=function(){return this.m_clCarte.getHeading()};WDCarteGoogleMaps.prototype.MAP_SetInclinaison=function(n){this.m_clCarte.setTilt(n)};WDCarteGoogleMaps.prototype.MAP_GetInclinaison=function(){return this.m_clCarte.getTilt()};WDCarteGoogleMaps.prototype.MAP_AjouteItineraire=function(n,t,i,r,u,f,e,o,s){return this._AjouteItineraireDeVers([[n,t],[i,r]],u,f,e,o,s)};WDCarteGoogleMaps.prototype.MAP_AjouteItineraireStr=function(n,t,i,r,u,f,e){return this._AjouteItineraireDeVers([n,t],i,r,u,f,e)};WDCarteGoogleMaps.prototype.MAP_AjouteItineraireArray=function(n,t,i,r,u,f){return this._AjouteItineraireDeVers(n,t,i,r,u,f)};WDCarteGoogleMaps.prototype.MAP_SupprimeItineraire=function(n){for(var i=[],t=0;t<this.m_tabItineraire.length;++t)this.m_tabItineraire[t].m_nID!=n?i.push(this.m_tabItineraire[t]):this.m_tabItineraire[t].setMap(null);return this.m_tabItineraire.length==i.length?!1:(this.m_tabItineraire=i,!0)};WDCarteGoogleMaps.prototype.MAP_DistanceItineraire=function(n){for(var i,t=0;t<this.m_tabItineraire.length;++t)if(this.m_tabItineraire[t].m_nID==n)return(i=this.m_tabItineraire[t],i.distanceEnMetre==undefined)?"":i.distanceEnMetre;return-1};WDCarteGoogleMaps.prototype.MAP_SupprimeToutItineraire=function(){for(var n=0;n<this.m_tabItineraire.length;++n)this.m_tabItineraire[n].setMap(null);return this.m_tabItineraire=[],!0};WDCarteGoogleMaps.prototype.MAP_SetImageMarqueur=function(n){this.m_sImageMarqueur_Initial=n};WDCarteGoogleMaps.prototype.MAP_SuitDeplacement=function(n,t){this.m_clCarte.setTilt(n?45:0);var i=this;GPSSuitDeplacement(function(n){n!=null&&(t(n)||i.MAP_SetPosition(n.GetLatitude(),n.GetLongitude(),!0))})};WDCarteGoogleMaps.prototype.MAP_FinDeplacement=function(){GPSSuitDeplacement(null)};WDCarteGoogleMaps.prototype.UpdateSize=function(){google.maps.event.trigger(this.m_clCarte,"resize")};WDCarteGoogleMaps.prototype.PasseEnLectureSeuleEx=function(n){var t=!n;this.m_clCarte.setOptions({draggable:t,zoomControl:t,scrollwheel:t,disableDoubleClickZoom:!t,disableDefaultUI:!t,panControl:t,streetViewControl:t})};WDCarteGoogleMaps.prototype.PasseEnLectureSeule=function(){this.PasseEnLectureSeuleEx(!0)};WDCarteGoogleMaps.prototype.clGestionCluster=function(){return this.m_clGestionCluster||(this.m_clGestionCluster=new CWDCarteApiGestionClusterMarqueur(this.m_clCarte,undefined,{gridSize:40,averageCenter:!1,m_clCarte:this})),this.m_clGestionCluster}