/*! VersionVI: 01F260101d   */
function extendEvent(n,t){t||(t={});var i=n.originalEvent?n.originalEvent:n;return $.extend({pageX:nGetPageX(t)||nGetPageX(n),pageY:nGetPageY(t)||nGetPageY(n),target:i.target,type:i.type,button:i.button,stopPropagation:i.stopPropagation,grfX:n.grfX,grfY:n.grfY,keyCode:i.keyCode,offsetX:i.offsetX,offsetY:i.offsetY,originalEvent:i.originalEvent,touches:i.touches,key:i.key,code:i.code,changedTouches:i.changedTouches,deltaY:i.deltaY,domEvent:n},t)}function _getPageX(n){return n?n.grfX?n.grfX:n.touches&&n.touches.length&&n.touches[0].pageX!==undefined?n.touches[0].pageX:n.pageX:undefined}function _getPageY(n){return n?n.grfY?n.grfY:n.touches&&n.touches.length&&n.touches[0].pageY!==undefined?n.touches[0].pageY:n.pageY:undefined}function nGetPageX(n,t){return n?_getPageX(n.originalEvent)||_getPageX(n)||t:t}function nGetPageY(n,t){return n?_getPageY(n.originalEvent)||_getPageY(n)||t:t}function nGetDeltaY(n,t){return n?n.deltaY||n.originalEvent.deltaY||(n.detail||n.originalEvent.detail||0)*40||t:t}function wbSansAccent(n){function i(n){return n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var t={"\u009e":"z","\u0080":"C","\u0081":"U","\u0082":"e","\u0083":"a","\u0084":"a","\u0085":"a","\u0086":"a","\u0087":"c","\u0088":"e","\u0089":"e","\u008a":"S","\u008b":"i","\u008c":"i","\u008d":"i","\u008e":"A","\u008f":"A","\u0090":"e","\u0093":"o","\u0094":"o","\u0095":"o","\u0096":"u","\u0097":"u","\u0098":"y","\u0099":"O","\u009a":"s","\u009f":"Y","\u00a0":"a","\u00a1":"i","\u00a2":"o","\u00a3":"u","\u00a4":"n","\u00a5":"N","\u00c0":"A","\u00c1":"A","\u00c2":"A","\u00c3":"A","\u00c4":"A","\u00c5":"A","\u00c7":"C","\u00c8":"E","\u00c9":"E","\u00ca":"E","\u00cb":"E","\u00cc":"I","\u00cd":"I","\u00ce":"I","\u00cf":"I","\u00d0":"D","\u00d1":"N","\u00d2":"O","\u00d3":"O","\u00d4":"O","\u00d5":"O","\u00d6":"O","\u00d7":"X","\u00d8":"O","\u00d9":"U","\u00da":"U","\u00db":"U","\u00dc":"U","\u00dd":"Y","\u00e0":"a","\u00e1":"a","\u00e2":"a","\u00e3":"a","\u00e4":"a","\u00e5":"a","\u00e7":"c","\u00e8":"e","\u00e9":"e","\u00ea":"e","\u00eb":"e","\u00ec":"i","\u00ed":"i","\u00ee":"i","\u00ef":"i","\u00f1":"n","\u00f2":"o","\u00f3":"o","\u00f4":"o","\u00f5":"o","\u00f6":"o","\u00f8":"o","\u00f9":"u","\u00fa":"u","\u00fb":"u","\u00fc":"u","\u00fd":"y","\u00ff":"y"};for(sAccent in t)t.hasOwnProperty(sAccent)&&(n=n.replace(new RegExp(i(sAccent),"g"),t[sAccent]));return n}function wbAutocompleteDeclare(){function t(n){return n.split(/,\s*/)}function n(n){return t(n).pop()}function i(n){return(n+"").replace(/([\\\.\+\*\?\[\^\]\$\(\)\{\}\=\!\<\>\|\:])/g,"\\$1")}$.widget("ui.autocomplete",$.ui.autocomplete,{wbAutocompleteProg:[],wbCache:{},wbOuvreAutocompleteProg:function(){var n=$(this.element),t=$(this.element).data("saisieassistee-ouvertureauto")==0;t&&n.data("saisieassistee-ouvertureauto",1);n.autocomplete("search");t&&n.data("saisieassistee-ouvertureauto",0)},wbConcatAutocompleteProg:function(n){return this.wbAutocompleteProg=this.wbAutocompleteProg.concat(n),this},wbAddAutocompleteProg:function(n){return this.wbAutocompleteProg=this.wbAutocompleteProg.concat([n]),this},wbRazAutocompleteProg:function(){return this.wbAutocompleteProg=[],this},_renderItem:function(t,r){var u=!1==$(this.element).hasClass("wbAutocompleteMultiple")?this.term:n(this.term);return $("<li>").append($("<a>").html(r.label.replace(new RegExp("("+i(u)+")","gi"),'<span class="ui-autocomplete-term">$1<\/span>'))).appendTo(t)},_trigger:function(n,t,i){if($(this.element).data("saisieassistee-ouvertureauto")==0&&(n=="open"||n=="close")){$(this.menu.element).hide();return}return this._super(n,t,i)},_searchTimeout:function(n){return this.options.delay=$(this.element).data("saisieassistee-delai")>0?parseInt($(this.element).data("saisieassistee-delai")):this.options.delay,this._super(n)}});wbAutocompleteInit=function(i){var u=$(document.body).data("wbAutocomplete"),r;if(u)return r=$(i),r.hasClass("wbSaisieJetonsWrap")&&(r=r.find(".wbSaisieJetonsInput").first()),r.filter(function(){if($(this).data("wbAutocompleteInit"))return!1;var t=this.className.toString().split(" "),i=t.indexOf("wbAutocomplete"),n=t[i+1];return u[n]?(u[n][0]($(this)),$(this).data("wbAutocompleteInitCallbackValeur",u[n][1]),!0):!1}).data("wbAutocompleteInit",1).bind("keydown",function(n){n.keyCode===$.ui.keyCode.TAB&&$(this).data("ui-autocomplete").menu.active&&n.preventDefault()}).bind("focus",function(){}).on("trigger.wb.saisie.jeton.cree",function(){r.autocomplete("close")}).autocomplete({classes:{"ui-autocomplete":"-webdev-bc-3 -webdev-c-13 SAI"},delay:200,minLength:0,source:function(t,i){function a(n){var r,t,u,i;if(n&&e&&!e.m_bJetonAutoriseDoublon){for(r=[],t=0;t<n.length;++t){for(u=!1,i=0;i<e.m_tabJetons.length;++i)if(n[t]==e.m_tabJetons[i].m_sValeur){u=!0;break}u||r.push(n[t])}return r}return n}var u=$(this.element),h=!1==u.hasClass("wbAutocompleteMultiple")?t.term:n(t.term),l,f,e,s;if(t.term=h,t.term in this.wbCache){i(this.wbCache[t.term]);return}var o=[],v=u.data("saisieassistee-filtre")==undefined?31979:parseInt(u.data("saisieassistee-filtre")),c=u.data("saisieassistee-sanscasse")==undefined?!0:parseInt(u.data("saisieassistee-sanscasse")),r=undefined;if(h)switch(v){case 31978:r=function(n,t){return n==t};break;case 31979:r=function(n,t){return n.substr(0,t.length)==t};break;case 31980:r=function(n,t){return n.indexOf(t)>-1};break;case 31981:r=function(n,t){return n.substr(n.length-t.length)==t};break;case 31982:r=function(n,t){return n!=t};break;case 31983:r=function(n,t){return n.substr(0,t.length)!=t};break;case 31984:r=function(n,t){return n.indexOf(t)==-1};break;case 31985:r=function(n,t){return n.substr(n.length-t.length)!=t};break;case 31986:r=function(n,t){return n>t};break;case 31987:r=function(n,t){return n>=t};break;case 31988:r=function(n,t){return n<t};break;case 31989:r=function(n,t){return n<=t}}if(r!==undefined)for(l=c?wbSansAccent(t.term.toLowerCase()):t.term,f=0;f<this.wbAutocompleteProg.length;++f)r(c?wbSansAccent(this.wbAutocompleteProg[f].toLowerCase()):this.wbAutocompleteProg[f],l)&&(o=o.concat([this.wbAutocompleteProg[f]]));else o=this.wbAutocompleteProg;e=$("#"+this.element[0].name+"_DATA").wbJsonParseAttr("value",!0);s=this;u.hasClass("wbAutocompleteFichier")?clWDAJAXMain.AJAXExecuteEvenement(_PAGE_,u.attr("id")||u.closest(".wbSaisieJetonsWrap").attr("id"),0,11,function(){i(a(s.wbAutocompleteProg));s.wbAutocompleteProg=[]}):i(a(o))},search:function(){var i=n(this.value),t=parseInt($(this).data("saisieassistee-taillemin"));return t===0?!0:(t=Math.max(1,t),i.length<t?!1:void 0)},focus:function(){return!1},select:function(n,i){var u=$(this),r;return u.hasClass("wbAutocompleteMultiple")?(r=t(this.value),r.pop(),r.push(i.item.value),r.push(""),this.value=r.join(", ")):u.val(i.item.value),u.trigger("trigger.wb.autocomplete.select.post"),!1}}).each(function(){var n=$(this).data("wbAutocompleteInitCallbackValeur");n&&(n($(this)),$(this).removeData("wbAutocompleteInitCallbackValeur"))}),r};wbAutocompleteInit(".wbAutocomplete");window.clWDUtil!==undefined&&(clWDUtil.m_oNotificationsAjoutHTML&&clWDUtil.m_oNotificationsAjoutHTML.AddNotification(function(){wbAutocompleteInit(".wbAutocomplete")}),clWDUtil.m_oNotificationsFinAJAX&&clWDUtil.m_oNotificationsFinAJAX.AddNotification(function(){wbAutocompleteInit(".wbAutocomplete")}))}function wbAutocompleteChargeData(n,t,i){$(document.body).data("wbAutocomplete")||$(document.body).data("wbAutocomplete",{});var r=$(document.body).data("wbAutocomplete");r[n]=[t,i];wbAutocompleteInit(".wbAutocomplete")}function eIMG_MODE(){}function getOrientation(n,t){if(!window.fetch||!window.FileReader||!window.DataView){t(1,undefined);return}var i=new FileReader;try{fetch(n).then(function(n){return n.blob()}).then(function(n){i.onload=function(i){var u=new DataView(i.target.result),s,r,o,f,h,e;if(u.getUint16(0,!1)!=65496)return t(-2,n);for(s=u.byteLength,r=2;r<s;){if(u.getUint16(r+2,!1)<=8)return t(-1,n);if(o=u.getUint16(r,!1),r+=2,o==65505){if(u.getUint32(r+=2,!1)!=1165519206)return t(-1,n);for(f=u.getUint16(r+=6,!1)==18761,r+=u.getUint32(r+4,f),h=u.getUint16(r,f),r+=2,e=0;e<h;e++)if(u.getUint16(r+e*12,f)==274)return t(u.getUint16(r+e*12+8,f),n)}else if((o&65280)!=65280)break;else r+=u.getUint16(r,!1)}return t(-1,n)};i.readAsArrayBuffer(n)})}catch(r){t(1,undefined)}}function wbImgHomNav(n,t,i){function l(f,e,o,s){var h=n.src,c;h.substr(0,5)==="data:"&&(h=h.replace(/[\n\r]/g,""));c=function(i){var c={},l,a,y,p,v;if(c["background-size"]="",c["background-position"]="",c["background-repeat"]="no-repeat",c["background-image"]="url('"+h+"')",i>1){c["image-orientation"]="none";l=document.createElement("canvas");a=l.getContext("2d");l.style.width=l.width=f;l.style.height=l.height=e;a.save();i>4&&(l.width=e,l.style.width=e,l.height=f,l.style.height=f);switch(i){case 2:a.translate(l.width,0);a.scale(-1,1);break;case 3:a.translate(l.width,l.height);a.rotate(Math.PI);break;case 4:a.translate(0,l.height);a.scale(1,-1);break;case 5:a.rotate(.5*Math.PI);a.scale(1,-1);break;case 6:a.rotate(.5*Math.PI);a.translate(0,-l.width);break;case 7:a.rotate(.5*Math.PI);a.translate(l.height,-l.width);a.scale(-1,1);break;case 8:a.rotate(-.5*Math.PI);a.translate(-l.height,0)}a.drawImage(n,0,0);a.restore();y=l.toDataURL();c["background-image"]="url('"+y+"')"}p=(r.hasClass("wbGalerieChpRef")||u.hasClass("wbGalerieChpRef"))&&u.closest(".wbGalerie").hasClass("wbGalerieColonne");v=!1;switch(t){case eIMG_MODE.imgNavigateurCentre:c["background-size"]=f+"px "+e+"px";c["background-position"]="center center";v=!0;break;case eIMG_MODE.imgRepete:c["background-repeat"]="repeat";break;case eIMG_MODE.imgNavigateurHomothetique:c["background-size"]="contain";break;case eIMG_MODE.imgNavigateurHomothetiqueLarge:c["background-size"]="cover";break;case eIMG_MODE.imgNavigateurHomothetiqueCentre:c["background-size"]="contain";c["background-position"]="center center";break;case eIMG_MODE.imgNavigateurHomothetiqueCentreLarge:c["background-size"]="cover";c["background-position"]="center center";break;case eIMG_MODE.imgNavigateurAdapte:c["background-size"]=o?"contain":f+"px "+e+"px";v=!0;break;case eIMG_MODE.imgNavigateurAdapteCentre:c["background-size"]=o?"contain":f+"px "+e+"px";c["background-position"]="center center";v=!0;break;case eIMG_MODE.imgNavigateurAdapteLargeCentre:c["background-size"]=s?"cover":f+"px "+e+"px";c["background-position"]="center center";v=!0}v&&p&&r.css({maxHeight:e});u.css(c)};i?getOrientation(h,c):c(1,undefined)}var r,u,e,c,o,f,h,s,a;if(n.parentNode&&(nIE==0||!(nIE<9))){if(r=$(n),r.attr("data-media")&&!r.data("attrSrcOri")){r.data("wbOnRemoveDataMedia",function(){wbImgHomNav(n,t)});return}if(u=r.parent(),e=u[0],e.wbModeAffichage=t,e.bPremierAffichageDejaFait||(c=r.prop("attributes"),$(c).each(function(){var n=this.name.toLowerCase(),t=this.value;n!=="src"&&n!=="alt"&&n!=="title"&&n!=="onload"&&n.indexOf("data-")!==0&&(n==="class"&&(t+=" "+u.attr("class")),n==="style"&&(t+=";"+u.attr("style")),u.attr(this.name,t),r.removeAttr(this.name))}),u.hasClass("ancragesupref")&&(u.removeClass("ancragesupref"),r.addClass("ancragesupref")),r.css({width:"100%",height:"100%"}),e.bPremierAffichageDejaFait=!0),$(window).off("resize.wb.img.homothetique.adapte."+e.id),u.off("trigger.wb.img.homothetique.adapte"),o=r[0].naturalWidth,f=r[0].naturalHeight,t==eIMG_MODE.imgNavigateurCentre||t>=eIMG_MODE.imgNavigateurAdapte){f==0&&(h=r.clone(!1).attr("onload",""),s=h.get(0),h.css({width:"auto",height:"auto"}),h.css({visibility:"hidden",position:"fixed"}),document.body.appendChild(s),o=s.naturalWidth||s.width,f=s.naturalHeight||s.height,document.body.removeChild(s));a=f==0?1:o/f;r[0].onRecalculHomothetie=function(){function c(){l(a,v,s,h)}var i,n,t;e.bPremierRecalculHomothetieDejaFait||!r[0].nLargeurInitiale?(n=r.width(),i=u.length&&u[0].nodeType===1,t=Math.max(r.height(),i?u.height():0)):(n=r[0].nLargeurInitiale,t=r[0].nHauteurInitiale);e.bPremierRecalculHomothetieDejaFait=!0;var a=o,v=f,s=!1,h=!1;o>f?n<o&&(s=!0):t<f&&(s=!0);f>t&&o>n&&(h=!0);r[0].loaded?c():requestAnimationFrame(c)};r[0].onRecalculHomothetie();$(window).on("resize.wb.img.homothetique.adapte."+e.id,r[0].onRecalculHomothetie);u.on("trigger.wb.img.homothetique.adapte",r[0].onRecalculHomothetie)}else l(o,f);u.css("opacity",1)}}function processImage(n,t,i,r){var n,u,f,t,e;if(typeof n=="string")n=document.getElementById(n);else if(typeof HTMLImageElement!="undefined"&&!n instanceof HTMLImageElement)return;if(u=n.naturalWidth,f=n.naturalHeight,typeof t=="string")t=document.getElementById(t);else if(typeof HTMLCanvasElement!="undefined"&&!t instanceof HTMLCanvasElement)return;(t.style.width=u+"px",t.style.height=f+"px",t.width=u,t.height=f,e=t.getContext("2d"),e.clearRect(0,0,u,f),e.drawImage(n,0,0),isNaN(i)||i<1)||(r?processCanvasRGBA(t,0,0,u,f,i):processCanvasRGB(t,0,0,u,f,i))}function getImageDataFromCanvas(n,t,i,r,u){var n,f,e;if(typeof n=="string")n=document.getElementById(n);else if(typeof HTMLCanvasElement!="undefined"&&!n instanceof HTMLCanvasElement)return;f=n.getContext("2d");try{try{e=f.getImageData(t,i,r,u)}catch(o){throw new Error("unable to access local image data: "+o);}}catch(o){throw new Error("unable to access image data: "+o);}return e}function processCanvasRGBA(n,t,i,r,u,f){if(!isNaN(f)&&!(f<1)){f|=0;var e=getImageDataFromCanvas(n,t,i,r,u);e=processImageDataRGBA(e,t,i,r,u,f);n.getContext("2d").putImageData(e,t,i)}}function processImageDataRGBA(n,t,i,r,u,f){for(var e=n.data,tt,yt,h,bt,c,kt,k,d,g,nt,st,ht,ct,lt,it,rt,ut,ft,p,w,b,s,at,ni=f+f+1,ti=r<<2,wt=r-1,dt=u-1,v=f+1,vt=v*(v+1)/2,pt=new BlurStack,o=pt,gt,l,y,et,ot,a=1;a<ni;a++)o=o.next=new BlurStack,a==v&&(gt=o);for(o.next=pt,l=null,y=null,kt=c=0,et=mul_table[f],ot=shg_table[f],yt=0;yt<u;yt++){for(it=rt=ut=ft=k=d=g=nt=0,st=v*(p=e[c]),ht=v*(w=e[c+1]),ct=v*(b=e[c+2]),lt=v*(s=e[c+3]),k+=vt*p,d+=vt*w,g+=vt*b,nt+=vt*s,o=pt,a=0;a<v;a++)o.r=p,o.g=w,o.b=b,o.a=s,o=o.next;for(a=1;a<v;a++)h=c+((wt<a?wt:a)<<2),k+=(o.r=p=e[h])*(at=v-a),d+=(o.g=w=e[h+1])*at,g+=(o.b=b=e[h+2])*at,nt+=(o.a=s=e[h+3])*at,it+=p,rt+=w,ut+=b,ft+=s,o=o.next;for(l=pt,y=gt,tt=0;tt<r;tt++)e[c+3]=s=nt*et>>ot,s!=0?(s=255/s,e[c]=(k*et>>ot)*s,e[c+1]=(d*et>>ot)*s,e[c+2]=(g*et>>ot)*s):e[c]=e[c+1]=e[c+2]=0,k-=st,d-=ht,g-=ct,nt-=lt,st-=l.r,ht-=l.g,ct-=l.b,lt-=l.a,h=kt+((h=tt+f+1)<wt?h:wt)<<2,it+=l.r=e[h],rt+=l.g=e[h+1],ut+=l.b=e[h+2],ft+=l.a=e[h+3],k+=it,d+=rt,g+=ut,nt+=ft,l=l.next,st+=p=y.r,ht+=w=y.g,ct+=b=y.b,lt+=s=y.a,it-=p,rt-=w,ut-=b,ft-=s,y=y.next,c+=4;kt+=r}for(tt=0;tt<r;tt++){for(rt=ut=ft=it=d=g=nt=k=0,c=tt<<2,st=v*(p=e[c]),ht=v*(w=e[c+1]),ct=v*(b=e[c+2]),lt=v*(s=e[c+3]),k+=vt*p,d+=vt*w,g+=vt*b,nt+=vt*s,o=pt,a=0;a<v;a++)o.r=p,o.g=w,o.b=b,o.a=s,o=o.next;for(bt=r,a=1;a<=f;a++)c=bt+tt<<2,k+=(o.r=p=e[c])*(at=v-a),d+=(o.g=w=e[c+1])*at,g+=(o.b=b=e[c+2])*at,nt+=(o.a=s=e[c+3])*at,it+=p,rt+=w,ut+=b,ft+=s,o=o.next,a<dt&&(bt+=r);for(c=tt,l=pt,y=gt,yt=0;yt<u;yt++)h=c<<2,e[h+3]=s=nt*et>>ot,s>0?(s=255/s,e[h]=(k*et>>ot)*s,e[h+1]=(d*et>>ot)*s,e[h+2]=(g*et>>ot)*s):e[h]=e[h+1]=e[h+2]=0,k-=st,d-=ht,g-=ct,nt-=lt,st-=l.r,ht-=l.g,ct-=l.b,lt-=l.a,h=tt+((h=yt+v)<dt?h:dt)*r<<2,k+=it+=l.r=e[h],d+=rt+=l.g=e[h+1],g+=ut+=l.b=e[h+2],nt+=ft+=l.a=e[h+3],l=l.next,st+=p=y.r,ht+=w=y.g,ct+=b=y.b,lt+=s=y.a,it-=p,rt-=w,ut-=b,ft-=s,y=y.next,c+=r}return n}function processCanvasRGB(n,t,i,r,u,f){if(!isNaN(f)&&!(f<1)){f|=0;var e=getImageDataFromCanvas(n,t,i,r,u);e=processImageDataRGB(e,t,i,r,u,f);n.getContext("2d").putImageData(e,t,i)}}function processImageDataRGB(n,t,i,r,u,f){for(var o=n.data,g,et,h,vt,c,yt,b,k,d,rt,ut,ft,nt,tt,it,v,y,p,ht,bt=f+f+1,kt=r<<2,at=r-1,pt=u-1,a=f+1,ct=a*(a+1)/2,lt=new BlurStack,e=lt,wt,l,w,ot,st,s=1;s<bt;s++)e=e.next=new BlurStack,s==a&&(wt=e);for(e.next=lt,l=null,w=null,yt=c=0,ot=mul_table[f],st=shg_table[f],et=0;et<u;et++){for(nt=tt=it=b=k=d=0,rt=a*(v=o[c]),ut=a*(y=o[c+1]),ft=a*(p=o[c+2]),b+=ct*v,k+=ct*y,d+=ct*p,e=lt,s=0;s<a;s++)e.r=v,e.g=y,e.b=p,e=e.next;for(s=1;s<a;s++)h=c+((at<s?at:s)<<2),b+=(e.r=v=o[h])*(ht=a-s),k+=(e.g=y=o[h+1])*ht,d+=(e.b=p=o[h+2])*ht,nt+=v,tt+=y,it+=p,e=e.next;for(l=lt,w=wt,g=0;g<r;g++)o[c]=b*ot>>st,o[c+1]=k*ot>>st,o[c+2]=d*ot>>st,b-=rt,k-=ut,d-=ft,rt-=l.r,ut-=l.g,ft-=l.b,h=yt+((h=g+f+1)<at?h:at)<<2,nt+=l.r=o[h],tt+=l.g=o[h+1],it+=l.b=o[h+2],b+=nt,k+=tt,d+=it,l=l.next,rt+=v=w.r,ut+=y=w.g,ft+=p=w.b,nt-=v,tt-=y,it-=p,w=w.next,c+=4;yt+=r}for(g=0;g<r;g++){for(tt=it=nt=k=d=b=0,c=g<<2,rt=a*(v=o[c]),ut=a*(y=o[c+1]),ft=a*(p=o[c+2]),b+=ct*v,k+=ct*y,d+=ct*p,e=lt,s=0;s<a;s++)e.r=v,e.g=y,e.b=p,e=e.next;for(vt=r,s=1;s<=f;s++)c=vt+g<<2,b+=(e.r=v=o[c])*(ht=a-s),k+=(e.g=y=o[c+1])*ht,d+=(e.b=p=o[c+2])*ht,nt+=v,tt+=y,it+=p,e=e.next,s<pt&&(vt+=r);for(c=g,l=lt,w=wt,et=0;et<u;et++)h=c<<2,o[h]=b*ot>>st,o[h+1]=k*ot>>st,o[h+2]=d*ot>>st,b-=rt,k-=ut,d-=ft,rt-=l.r,ut-=l.g,ft-=l.b,h=g+((h=et+a)<pt?h:pt)*r<<2,b+=nt+=l.r=o[h],k+=tt+=l.g=o[h+1],d+=it+=l.b=o[h+2],l=l.next,rt+=v=w.r,ut+=y=w.g,ft+=p=w.b,nt-=v,tt-=y,it-=p,w=w.next,c+=r}return n}function BlurStack(){this.r=0;this.g=0;this.b=0;this.a=0;this.next=null}var wbAutocompleteInit,GALERIE_ZOOM_CANVAS,GALERIE_ZOOM_CANVAS_CLONE,mul_table,shg_table,CanvasImage,ColorThief,pv,MMCQ;if(String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}),window.Object||(window.Object={}),Array.prototype.fill||(Array.prototype.fill=function(n){if(this==null)throw new TypeError("this is null or not defined");for(var i=Object(this),t=i.length>>>0,o=arguments[1],r=o>>0,u=r<0?Math.max(t+r,0):Math.min(r,t),e=arguments[2],f=e===undefined?t:e>>0,s=f<0?Math.max(t+f,0):Math.min(f,t);u<s;)i[u]=n,u++;return i}),window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),i=Math.max(0,16-(t-lastTime)),r=window.setTimeout(function(){n(t+i)},i);return lastTime=t+i,r},window.cancelAnimationFrame=function(n){clearTimeout(n)}),window.requestIdleCallback||(window.requestIdleCallback=requestAnimationFrame,window.cancelIdleCallback=cancelAnimationFrame),!jQuery.fn||!(parseFloat(jQuery.fn.jquery)>=3)){for(var animating,lastTime=0,vendors=["webkit","moz"],requestAnimationFrame=window.requestAnimationFrame,cancelAnimationFrame=window.cancelAnimationFrame;lastTime<vendors.length&&!requestAnimationFrame;lastTime++)requestAnimationFrame=window[vendors[lastTime]+"RequestAnimationFrame"],cancelAnimationFrame=cancelAnimationFrame||window[vendors[lastTime]+"CancelAnimationFrame"]||window[vendors[lastTime]+"CancelRequestAnimationFrame"];function raf(){animating&&(requestAnimationFrame(raf),jQuery.fx.tick())}window.requestAnimationFrame=requestAnimationFrame;window.cancelAnimationFrame=cancelAnimationFrame;jQuery.fx.timer=function(n){n()&&jQuery.timers.push(n)&&!animating&&(animating=!0,raf())};jQuery.fx.stop=function(){animating=!1}}(function(n,t,i){"use strict";var e="."+i,o=":input, a[href]",f=null,r={escapeSelectorName:function(n){return n.replace(/(!"#$%&'\(\)\*\+,\.\/:;<=>\?@\[\]^`\{\|\}~)/g,"\\\\$1")},findNextFocusable:function(n,i){var u=t(o).not(":disabled").not(":hidden").not(".wbSaisieJetonsInput").not("[tabindex=-1]").not("a[href]:empty"),e,s,f;return n[0].tagName==="INPUT"&&n[0].type==="radio"&&n[0].name!==""&&(e=r.escapeSelectorName(n[0].name),u=u.not("input[type=radio][name="+e+"]").add(n)),s=u.index(n),f=(s+i)%u.length,f<=-1&&(f=u.length+f),u.eq(f)},focusInElement:function(n){f=n.target},tryGetElementAsNonEmptyJQueryObject:function(n){try{var i=t(n);if(!!i&&i.size()!==0)return i}catch(r){}return null},getFocusedElement:function(){return r.tryGetElementAsNonEmptyJQueryObject(":focus")||r.tryGetElementAsNonEmptyJQueryObject(n.activeElement)||r.tryGetElementAsNonEmptyJQueryObject(f)||t()},emulateTabbing:function(n,t){var i=r.findNextFocusable(n,t);i.focus()},initializeAtLoad:function(){t(n).on("focusin"+e,r.focusInElement)}},u={tab:function(n,i){t.isNumeric(n)&&(i=n,n=undefined);n=n||u.getFocused();i=i||1;r.emulateTabbing(n,i)},forwardTab:function(n){return u.tab(n,1)},reverseTab:function(n){return u.tab(n,-1)},getFocused:function(){return r.getFocusedElement()}},s=function(){t.extend({emulateTab:function(n,t){return u.tab(n,t)}});t.fn.extend({emulateTab:function(n){return u.tab(this,n)}})},h=function(){s();t(r.initializeAtLoad)};h()})(document,jQuery,"EmulateTab");
/*!
 * jQuery UI Touch Punch 0.2.3
 *
 * Copyright 2011\u20132014, Dave Furfero
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Depends:
 *  jquery.ui.widget.js
 *  jquery.ui.mouse.js
 */
(function(n){function i(n,t){if(!(n.originalEvent.touches.length>1)){n.preventDefault();var i=n.originalEvent.changedTouches[0],r=document.createEvent("MouseEvents");r.initMouseEvent(t,!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null);n.target.dispatchEvent(r)}}if(n.support.touch="ontouchend"in document,n.ui&&n.support.touch){var t=n.ui.mouse.prototype,u=t._mouseInit,f=t._mouseDestroy,r;t._touchStart=function(n){var t=this;!r&&t._mouseCapture(n.originalEvent.changedTouches[0])&&(r=!0,t._touchMoved=!1,i(n,"mouseover"),i(n,"mousemove"),i(n,"mousedown"))};t._touchMove=function(n){r&&(this._touchMoved=!0,i(n,"mousemove"))};t._touchEnd=function(n){r&&(i(n,"mouseup"),i(n,"mouseout"),this._touchMoved||i(n,"click"),r=!1)};t._mouseInit=function(){var t=this;t.element.bind({touchstart:n.proxy(t,"_touchStart"),touchmove:n.proxy(t,"_touchMove"),touchend:n.proxy(t,"_touchEnd")});u.call(t)};t._mouseDestroy=function(){var t=this;t.element.unbind({touchstart:n.proxy(t,"_touchStart"),touchmove:n.proxy(t,"_touchMove"),touchend:n.proxy(t,"_touchEnd")});f.call(t)}}})(jQuery);$.fn.oneOfThem=function(n,t){return this.each(function(){var i=$(this);i.one(n,function(n){t.oneOfThem?i.off(n):(t.oneOfThem=!0,t.apply(this))})})};$.fn.wbJsonParseAttr=function(n,t){try{if(t&&!this.attr(n))return undefined;try{return JSON.parse(this.attr(n))}catch(i){}return JSON.parse(this.attr(n).replace(/'/g,'"'))}catch(i){return window.clWDUtil&&{},undefined}};$.fn.wbGetClassCommencePar=function(n,t){for(var r,u=this.attr("class").split(" "),i=0;i<u.length;++i)if(r=u[i],r.indexOf(n)===0)return r.substr(t?0:n.length);return undefined},function(){function t(t){for(var r,i=0;i<n.tabLargeurMin.length;++i)n.tabLargeurMin[i]<t&&(r===undefined||n.tabLargeurMin[r]<n.tabLargeurMin[i])&&(r=i);return r}var n=undefined;$(window).on("DOMContentLoaded.wb.cache.window load.wb.cache.window trigger.wb.cache.windowinit",function(){var i=$(document.body);n=i.wbJsonParseAttr("data-wbAgencements",!0);n&&n.indiceForce>-1&&(n.courant=t(document.documentElement.clientWidth));$(this).trigger("trigger.wb.cache.window");window.nHauteurPage=i.height();window.nLargeurPage=i.width()});window.addEventListener&&window===window.parent&&function(){var t=null,i=function(){if(!t&&n&&n.bAvecPrint){t=document.createElement("iframe");t.setAttribute("id","print");t.setAttribute("style","display:none;");document.body.append(t);var i=new XMLHttpRequest;i.open("POST",clWDUtil.sGetPageAction(),!1);i.onload=function(){var h,c,l,y,a,v,u,n,e,o,f,s;if(!1==(i.readyState===4&&i.status===200)){r();return}t.contentWindow.document.write(i.responseText);h=t.contentWindow.document.documentElement.attributes;t.contentWindow.document.documentElement.remove();c=t.contentWindow.document.createElement("html");c.innerHTML=i.responseText.trim();t.contentWindow.document.insertBefore(c,undefined);for(oAttribute in h)h.hasOwnProperty(oAttribute)&&isNaN(oAttribute)&&t.contentWindow.document.documentElement.setAttribute(oAttribute.name,oAttribute.value);for(l=t.contentWindow.document.body.querySelectorAll("*"),u=l.length-1;u>-1;u--)n=l[u],y=$(n).clone(!0,!0),n.parentNode.insertBefore(y[0],n),n.remove();for(a=t.contentWindow.document.documentElement.querySelectorAll("script"),u=0;u<a.length;++u){if(n=a[u],e=document.createElement("script"),n.src){f=new t.contentWindow.XMLHttpRequest;f.open("GET",n.src,!1);f.onload=function(){!1!=(f.readyState===4&&f.status===200)&&(o=f.responseText)};try{f.send(null)}catch(e){}}else o=n.innerText;s=t.contentWindow.document.createTextNode(o);e.appendChild(s);n.parentNode.insertBefore(e,n);n.remove()}for(v=t.contentWindow.document.documentElement.querySelectorAll("link"),u=0;u<v.length;++u){if(n=v[u],e=document.createElement("style"),n.href){f=new t.contentWindow.XMLHttpRequest;f.open("GET",n.href,!1);f.onload=function(){!1!=(f.readyState===4&&f.status===200)&&(o=f.responseText)};try{f.send(null)}catch(e){}}else continue;s=t.contentWindow.document.createTextNode(o);e.appendChild(s);n.parentNode.insertBefore(e,n);n.remove()}t.contentWindow.document.body.querySelectorAll("img").forEach(function(n){if(n.src){var i=new t.contentWindow.XMLHttpRequest;i.open("GET",n.src,!1);i.onload=function(){if(!1!=(i.readyState===4&&i.status===200)){var t="",r=i.responseText;for(u=0;u<r.length;u++)t+=String.fromCharCode(r.charCodeAt(u)&255);n.src="data:image/jpeg;base64,"+btoa(t)}};i.overrideMimeType("text/plain; charset=x-user-defined");try{i.send(null)}catch(r){}n.complete&&n.onload?n.onload():(n.style.opacity=1,$(n).parent().hasClass("wbHnImg")&&(n.parentElement.style.opacity=1))}});t.contentWindow.$(t.contentWindow.document.body).trigger("DOMContentLoaded");t.contentWindow.$(t.contentWindow.document.body).trigger("load")};i.setRequestHeader("Content-type","application/x-www-form-urlencoded");i.send("WD_ACTION_=AGENCEMENTIMPRESSION")}},r=function(){t&&(t.remove(),t=null)},u,f;window.matchMedia&&(u=window.matchMedia("print"),u.addListener(function(n){n.matches&&i()}));window.addEventListener("beforeprint",i);window.addEventListener("afterprint",r);f=window.print;window.print=function(){i();f()}}();$(window).on("scroll.wb.cache.window trigger.wb.cache.window",function(){var n=$(this);window.nBordHautNavigateur=n.scrollTop();window.nBordGaucheNavigateur=n.scrollLeft();window.nBordDroitNavigateur=window.nLargeurNavigateur+window.nBordGaucheNavigateur;window.nBordBasNavigateur=window.nBordHautNavigateur+window.nHauteurNavigateur});$(window).on("resize.wb.cache.window trigger.wb.cache.window",function(i){var r=$(this);window.nHauteurNavigateur=r.height();window.nLargeurNavigateur=r.width();window.nBordDroitNavigateur=window.nLargeurNavigateur+window.nBordGaucheNavigateur;window.nBordBasNavigateur=window.nBordHautNavigateur+window.nHauteurNavigateur;n&&window===window.parent&&(n.indiceForce===-1||i.type==="resize")&&(document.cookie="wbNavigateurLargeur="+document.documentElement.clientWidth+";path=/",window.wbTimerAgencementReload!==undefined&&clearTimeout(window.wbTimerAgencementReload),window.wbTimerAgencementReload=setTimeout(function(){t(document.documentElement.clientWidth)!=n.courant&&(clearTimeout(window.wbTimerAgencementReload),_JSL(_PAGE_,"","_self","",0,"CHANGEMENTAGENCEMENT"))},300))})}();$(function(){function n(n,t,i){var u=i,r;return n.data(t)!==undefined&&(u=n.data(t)),r=n.parent(),r!==undefined&&r.attr("data-effet-marquee")&&r.data(t)!==undefined&&(u=r.data(t)),u}$("[data-effet-marquee=mono]").each(function(){var t=$(this),f=parseInt(n(t,"height",t.height())),e=parseInt(n(t,"width",t.width())),r=parseInt(n(t,"effet-vitesse",20)),u=n(t,"effet-comportement","scroll"),i=$("<marquee />");if(t[0].tagName.toUpperCase()=="TABLE"){if(t.find("[data-effet-marquee=mono]").length>0)return;t=t.find("td")}t[0].tagName.toUpperCase()=="A"&&t.children().first()[0]!==undefined&&t.children().first()[0].tagName.toUpperCase()=="SPAN"&&(t=t.children().first(),t[0]!==undefined&&t[0].tagName.toUpperCase()=="SPAN"&&(t=t.children().first()));t[0].tagName.toUpperCase()=="TD"&&(t.css("line-height","0"),i.css("line-height","normal"));i.attr("scrollamount","1").attr("truespeed","1").attr("behavior",u).attr("scrolldelay",r).html(t.html()).bind("mouseleave mouseblur",function(){$(this).attr("scrolldelay",r)}).bind("mouseover mousemove",function(){$(this).attr("scrolldelay",1e8)});t.html("").append(i)});$("[data-effet-marquee=multi]").each(function(){function w(n){var r,i,t;for(n==undefined?(n=0,e.css(l,"0")):e.delay(300),r=n*-u,i=n;i<=a;++i)t={},t[l]=r+"px",e.animate(t,v,y).animate(t,i==0?0:b),r-=u;t={};t[l]="-"+p+"px";e.animate(t,v,y,w)}var t=$(this),u=parseInt(n(t,"height",t.height())),c=parseInt(n(t,"width",t.width())),v=parseInt(n(t,"effet-vitesse",1500)),b=parseInt(n(t,"effet-delai",2e3)),y=window.jQuery.ui?"easeOutExpo":"swing",l="margin-top",o=t.text()!=t.html(),i,k,r,s,h,a,p,e;if(t[0].tagName.toUpperCase()=="TABLE"){if(t.find("[data-effet-marquee=multi]").length>0)return;t=t.find("td")}if(t[0].tagName.toUpperCase()=="A")i=t,t.children().first()[0]!==undefined&&t.children().first()[0].tagName.toUpperCase()=="SPAN"&&(i=t.children().first(),i[0]!==undefined&&i[0].tagName.toUpperCase()=="SPAN"&&(i=i.children().first(),o=i.text()!=i.html(),o&&(t=i)));else if(t.children().first().attr("data-effet-marquee"))return;k=$("<span/>").css("overflow","hidden").css("display","block").css("position","relative").css("height",u).css("width",c);r=[];r=o&&t.children().first().css("display")=="block"?t.children():t.html().split(/<br><br>|\n\n/);r.length<1&&(r[0]=t.html(),r[1]=t.html());var f=$("<ol />").css("padding","0").css("margin","0").css("overflow","hidden").css("display","block").css("position","relative").css("height",u).css("width",c);for(s=0;s<r.length;s++){if(h=r[s],o){if($(h).text()=="")continue}else if(h=="")continue;f.append($("<li />").css("padding","0").css("margin","0").css("display","block").css("height",u).css("width",c).css("overflow","hidden").html(h))}a=f.children().length-1;t.html("").append(f);t.children().first().append(f.children().first().clone());p=u*(a+1);e=f.children().first();w()})}),function(n,t,i,r){var u=n(t);n.fn.lazyload=function(f){function s(t){var i=0;t.each(function(){var t=n(this);if((!e.skip_invisible||t.is(":visible"))&&!n.abovethetop(this,e)&&!n.leftofbegin(this,e))if((n.belowthefold(this,e)||n.rightoffold(this,e))&&u.height()!=0){if(++i>e.failure_limit)return!1}else t.trigger("appear"),i=0})}var o=this,h,e={threshold:100,failure_limit:0,event:"scroll",effect:"show",container:t,data_attribute:"original",skip_invisible:!0,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};return f&&n.extend(e,f),h=e.container===r||e.container===t?u:n(e.container),0===e.event.indexOf("scroll")&&h.bind(e.event,function(){return s(o)}),this.each(function(){var u=this,i=n(u),f,h;u.loaded=!1;(i.attr("src")===r||i.attr("src")===!1)&&(i.attr("data-width")!==r?(f=i.attr("data-height"),h=i.attr("data-width"),i.css("background","url("+i.attr("data-placeholder")+") center center no-repeat transparent").data("lazyloadMire",1),i.height()==0&&i.css("padding-top",f+"px"),i.css("width")==="auto"&&i.css("padding-left","100%"),i.width()==0&&i.css("padding-left",h+"px")):i.attr("data-placeholder")!==r?i.attr("src",i.attr("data-placeholder")):i.data("src")!==r?i.attr("src",i.data("src")).removeAttr("data-src"):i.attr("src",e.placeholder));i.bind("load",function(){i.data("lazyloadMire")&&(u.loaded=!1,s(i))});t.clWDUtil!==r&&clWDUtil.m_oNotificationsImagesVisibles.AddNotification(function(n,t){(!t||clWDUtil.bEstFils(i[0],t))&&i.trigger("load")});i.bind("appear",function(){var h,f,s;this.loaded||(e.appear&&(h=o.length,e.appear.call(u,h,e)),f=i.attr("data-"+e.data_attribute)==""&&i.attr("src")!=""&&i.attr("src")!=i.attr("data-src"),s=n("<img />").bind("load",function(){var v,y,s,h,c,l,a,b,k;if(!this.parentNode){v=Math.max(i.height(),parseInt(i.attr("data-height")));y=Math.max(i.width(),parseInt(i.attr("data-width")));i.attr("data-display-ori")===r&&i.attr("data-display-ori",i.css("display"));f||i.hide();s=f?i.attr("src"):i.attr("data-"+e.data_attribute);h=!1;
//!bSrcDejaFait && (self.style.width=="") && !$self.parent().parent().hasClass("dzSpan");
oStyleBaliseImg=u.style;var p=oStyleBaliseImg.width=="auto"||oStyleBaliseImg.width=="",w=oStyleBaliseImg.height=="auto"||oStyleBaliseImg.height=="",d=oStyleBaliseImg.width=="100%",g=oStyleBaliseImg.height=="100%";i.data("style-width")===r&&i.data("style-width",u.style.width);i.data("style-height")===r&&i.data("style-height",u.style.height);u.style.width=i.data("style-width");u.style.height=i.data("style-height");c=i.data("style-width")==""?f?u.width:this.width+"px":u.style.width;l=i.data("style-height")==""?f?u.height:this.height+"px":u.style.height;i.css("width",y);i.css("height",v);i.css("background","").css("padding-top","").css("padding-left","").data("lazyloadMire",0);i.is("img")?i.attr("src",s):i.css("background-image","url('"+s+"')");i.queue().length==0&&(u.nOpaciteInitiale=u.nOpaciteInitiale||i.css("opacity"),a=t.scrollY===0?1e3:400,i.css("opacity",0).animate({opacity:u.nOpaciteInitiale},a),t.scrollY>0&&i.css("opacity")==0&&u.src.indexOf(i.attr("src"))==-1&&i.add(i.parents(".dzSpan")).first().animate({content:1},{step:function(t){n(this).css("transform","scale("+(.8+t*.2)+")")},easing:"easeOutExpo",duration:a}));i.css("display",i.attr("data-display-ori"));i[0].loaded=u.loaded=!0;i.trigger("load");h&&t.scrollY>0&&!d?i.stop(!0,!0).animate({width:c},{duration:500,complete:function(){p&&n(this).css("width","auto")}}):i.css("width",p?"auto":c);h&&t.scrollY>0&&!g?i.stop(!0,!0).animate({height:l},{duration:500,complete:function(){w&&n(this).css("height","auto")}}):i.css("height",w?"auto":l);b=n.grep(o,function(n){return!n.loaded});o=n(b);e.load&&(k=o.length,e.load.call(u,k,e))}}),f?(i.attr("data-"+e.data_attribute,i.attr("src")),s.trigger("load")):this.tagName.toLowerCase()=="img"&&s.attr("src",i.attr("data-"+e.data_attribute)))});0!==e.event.indexOf("scroll")&&i.bind(e.event,function(){u.loaded||i.trigger("appear")})}),u.bind("resize",function(){s(o)}),u.bind("resetappear",function(){o.push($self);s(o)}),/iphone|ipod|ipad.*os 5/gi.test(navigator.appVersion)&&u.bind("pageshow",function(t){t.originalEvent&&t.originalEvent.persisted&&o.each(function(){n(this).trigger("appear")})}),n(i).ready(function(){setTimeout(function(){s(o)},20)}),this};n.belowthefold=function(i,u){var f,e=0;return u.container===r||u.container===t?f=t.nBordBasNavigateur:(f=u.container.scrollTop+n(u.container).offset().top+n(u.container).height(),e=n(u.container).offset().top),f<=(i.nPositionY||(i.nPositionY=n(i).offset().top))-u.threshold-e};n.rightoffold=function(i,u){var f,e=0;return u.container===r||u.container===t?f=t.nBordDroitNavigateur:(f=u.container.scrollLeft+n(u.container).offset().left+n(u.container).width(),e=n(u.container).offset().left),f<=(i.nPositionX||(i.nPositionX=n(i).offset().left))-u.threshold-e};n.abovethetop=function(i,u){var f,e=0;return u.container===r||u.container===t?f=t.nBordHautNavigateur:(f=u.container.scrollTop+n(u.container).offset().top,e=n(u.container).offset().top),f>=(i.nPositionY||(i.nPositionY=n(i).offset().top))+u.threshold+(i.nHauteurChamp||(i.nHauteurChamp=n(i).height()))-e};n.leftofbegin=function(i,u){var f,e=0;return u.container===r||u.container===t?f=t.nBordGaucheNavigateur:(f=u.container.scrollLeft+n(u.container).offset().left,e=n(u.container).offset().left),f>=(i.nPositionX||(i.nPositionX=n(i).offset().left))+u.threshold+(i.nLargeurChamp||(i.nLargeurChamp=n(i).height()))-e};n.inviewport=function(t,i){return!n.rightoffold(t,i)&&!n.leftofbegin(t,i)&&!n.belowthefold(t,i)&&!n.abovethetop(t,i)};n.extend(n.expr[":"],{"below-the-fold":function(t){return n.belowthefold(t,{threshold:0})},"above-the-top":function(t){return!n.belowthefold(t,{threshold:0})},"right-of-screen":function(t){return n.rightoffold(t,{threshold:0})},"left-of-screen":function(t){return!n.rightoffold(t,{threshold:0})},"in-viewport":function(t){return n.inviewport(t,{threshold:0})}})}(jQuery,window,document);$().ready(function(){function n(n,t){$(t).find("[data-original]").data("wbMediaAttrCallback",function(n,t,i,r){return i!=="data-original"?r:(n.balise[0].loaded&&(n.balise[0].loaded=!1,setTimeout(function(){n.balise.trigger("resetappear")},1)),r)}).lazyload({appear:function(){$self=$(this);$self.addClass("wb-lazy-loading")},load:function(n,t){$self=$(this);$self.addClass("wb-lazy-loaded").removeClass("wb-lazy-loading").attr("src",$self.attr("data-"+t.data_attribute))}}).bind("click mouseenter",function(){$(this).trigger("appear")})}window.clWDUtil!==undefined&&clWDUtil.m_oNotificationsAjoutHTML.AddNotification(n);n(undefined,$("body")[0])});wbAutocompleteInit=undefined;wbAutocompleteDeclare(),function(n){typeof define=="function"&&define.amd&&define.amd.jQuery?define(["jquery"],n):typeof module!="undefined"&&module.exports?n(require("jquery")):n(jQuery)}(function(n){"use strict";function ft(t){return t&&t.allowPageScroll===undefined&&(t.swipe!==undefined||t.swipeStatus!==undefined)&&(t.allowPageScroll=p),t.click!==undefined&&t.tap===undefined&&(t.tap=t.click),t||(t={}),t=n.extend({},n.fn.swipe.defaults,t),this.each(function(){var r=n(this),i=r.data(h);i||(i=new et(this,t),r.data(h,i))})}function et(ft,et){function tr(t){if(!pu()&&!(n(t.target).closest(et.excludedElements,ot).length>0)){var r=t.originalEvent?t.originalEvent:t,f,u=r.touches,e=u?u[0]:r;return(st=rt,u?ct=u.length:et.preventDefaultEvents!==!1&&t.preventDefault(),at=0,vt=null,yt=null,kt=null,lt=0,gt=0,ni=0,pt=1,bt=0,li=ku(),dr(),wi(0,e),!u||ct===et.fingers||et.fingers===l||oi()?(gi=ii(),ct==2&&(wi(1,u[1]),gt=ni=cr(ht[0].start,ht[1].start)),(et.swipeStatus||et.pinchStatus)&&(f=wt(r,st))):f=!1,f===!1)?(st=i,wt(r,st),f):(et.hold&&(ei=setTimeout(n.proxy(function(){ot.trigger("hold",[r.target]);et.hold&&(f=et.hold.call(ot,r,r.target))},this),et.longTapThreshold)),pi(!0),null)}}function ir(n){var f=n.originalEvent?n.originalEvent:n,e,h;if(st!==t&&st!==i&&!yi()){var s,r=f.touches,c=r?r[0]:f,u=gr(c);ai=ii();r&&(ct=r.length);et.hold&&clearTimeout(ei);st=o;ct==2&&(gt==0?(wi(1,r[1]),gt=ni=cr(ht[0].start,ht[1].start)):(gr(r[1]),ni=cr(ht[0].end,ht[1].end),kt=gu(ht[0].end,ht[1].end)),pt=du(gt,ni),bt=Math.abs(gt-ni));ct===et.fingers||et.fingers===l||!r||oi()?(vt=iu(u.start,u.end),yt=iu(u.last,u.end),uu(n,yt),at=nf(u.start,u.end),lt=tu(),bu(vt,at),s=wt(f,st),(!et.triggerOnTouchEnd||et.triggerOnTouchLeave)&&(e=!0,et.triggerOnTouchLeave&&(h=rf(this),e=uf(u.end,h)),!et.triggerOnTouchEnd&&e?st=fr(o):et.triggerOnTouchLeave&&!e&&(st=fr(t)),(st==i||st==t)&&wt(f,st))):(st=i,wt(f,st));s===!1&&(st=i,wt(f,st))}}function rr(n){var r=n.originalEvent?n.originalEvent:n,u=r.touches;if(u){if(u.length&&!yi())return yu(r),!0;if(u.length&&yi())return!0}return yi()&&(ct=nr),ai=ii(),lt=tu(),or()||!er()?(st=i,wt(r,st)):et.triggerOnTouchEnd||et.triggerOnTouchEnd==!1&&st===o?(et.preventDefaultEvents!==!1&&n.preventDefault(),st=t,wt(r,st)):!et.triggerOnTouchEnd&&br()?(st=t,dt(r,st,k)):st===o&&(st=i,wt(r,st)),pi(!1),null}function ui(){ct=0;ai=0;gi=0;gt=0;ni=0;pt=1;dr();pi(!1)}function ur(n){var i=n.originalEvent?n.originalEvent:n;et.triggerOnTouchLeave&&(st=fr(t),wt(i,st))}function lr(){ot.unbind(hi,tr);ot.unbind(ci,ui);ot.unbind(ki,ir);ot.unbind(di,rr);ri&&ot.unbind(ri,ur);pi(!1)}function fr(n){var r=n,f=ar(),u=er(),e=or();return!f||e?r=i:u&&n==o&&(!et.triggerOnTouchEnd||et.triggerOnTouchLeave)?r=t:!u&&n==t&&et.triggerOnTouchLeave&&(r=i),r}function wt(n,r){var u,f=n.touches;return(eu()||sr())&&(u=dt(n,r,w)),(fu()||oi())&&u!==!1&&(u=dt(n,r,b)),au()&&u!==!1?u=dt(n,r,tt):vu()&&u!==!1?u=dt(n,r,it):lu()&&u!==!1&&(u=dt(n,r,k)),r===i&&(sr()&&(u=dt(n,r,w)),oi()&&(u=dt(n,r,b)),ui(n)),r===t&&(f?f.length||ui(n):ui(n)),u}function dt(o,s,h){var c;if(h==w){if(ot.trigger("swipeStatus",[s,vt||null,at||0,lt||0,ct,ht,yt]),et.swipeStatus&&(c=et.swipeStatus.call(ot,o,s,vt||null,at||0,lt||0,ct,ht,yt),c===!1))return!1;if(s==t&&yr()){if(clearTimeout(fi),clearTimeout(ei),ot.trigger("swipe",[vt,at,lt,ct,ht,yt]),et.swipe&&(c=et.swipe.call(ot,o,vt,at,lt,ct,ht,yt),c===!1))return!1;switch(vt){case r:ot.trigger("swipeLeft",[vt,at,lt,ct,ht,yt]);et.swipeLeft&&(c=et.swipeLeft.call(ot,o,vt,at,lt,ct,ht,yt));break;case u:ot.trigger("swipeRight",[vt,at,lt,ct,ht,yt]);et.swipeRight&&(c=et.swipeRight.call(ot,o,vt,at,lt,ct,ht,yt));break;case f:ot.trigger("swipeUp",[vt,at,lt,ct,ht,yt]);et.swipeUp&&(c=et.swipeUp.call(ot,o,vt,at,lt,ct,ht,yt));break;case e:ot.trigger("swipeDown",[vt,at,lt,ct,ht,yt]);et.swipeDown&&(c=et.swipeDown.call(ot,o,vt,at,lt,ct,ht,yt))}}}if(h==b){if(ot.trigger("pinchStatus",[s,kt||null,bt||0,lt||0,ct,pt,ht]),et.pinchStatus&&(c=et.pinchStatus.call(ot,o,s,kt||null,bt||0,lt||0,ct,pt,ht),c===!1))return!1;if(s==t&&vr())switch(kt){case v:ot.trigger("pinchIn",[kt||null,bt||0,lt||0,ct,pt,ht]);et.pinchIn&&(c=et.pinchIn.call(ot,o,kt||null,bt||0,lt||0,ct,pt,ht));break;case y:ot.trigger("pinchOut",[kt||null,bt||0,lt||0,ct,pt,ht]);et.pinchOut&&(c=et.pinchOut.call(ot,o,kt||null,bt||0,lt||0,ct,pt,ht))}}return h==k?(s===i||s===t)&&(clearTimeout(fi),clearTimeout(ei),hr()&&!su()?(ti=ii(),fi=setTimeout(n.proxy(function(){ti=null;ot.trigger("tap",[o.target]);et.tap&&(c=et.tap.call(ot,o,o.target))},this),et.doubleTapThreshold)):(ti=null,ot.trigger("tap",[o.target]),et.tap&&(c=et.tap.call(ot,o,o.target)))):h==tt?(s===i||s===t)&&(clearTimeout(fi),clearTimeout(ei),ti=null,ot.trigger("doubletap",[o.target]),et.doubleTap&&(c=et.doubleTap.call(ot,o,o.target))):h==it&&(s===i||s===t)&&(clearTimeout(fi),ti=null,ot.trigger("longtap",[o.target]),et.longTap&&(c=et.longTap.call(ot,o,o.target))),c}function er(){var n=!0;return et.threshold!==null&&(n=at>=et.threshold),n}function or(){var n=!1;return et.cancelThreshold!==null&&vt!==null&&(n=nu(vt)-at>=et.cancelThreshold),n}function ru(){return et.pinchThreshold!==null?bt>=et.pinchThreshold:!0}function ar(){return et.maxTimeThreshold?lt>=et.maxTimeThreshold?!1:!0:!0}function uu(n,t){if(et.preventDefaultEvents!==!1)if(et.allowPageScroll===p)n.preventDefault();else{var i=et.allowPageScroll===nt;switch(t){case r:(et.swipeLeft&&i||!i&&et.allowPageScroll!=d)&&n.preventDefault();break;case u:(et.swipeRight&&i||!i&&et.allowPageScroll!=d)&&n.preventDefault();break;case f:(et.swipeUp&&i||!i&&et.allowPageScroll!=g)&&n.preventDefault();break;case e:(et.swipeDown&&i||!i&&et.allowPageScroll!=g)&&n.preventDefault()}}}function vr(){var n=pr(),t=wr(),i=ru();return n&&t&&i}function oi(){return!!(et.pinchStatus||et.pinchIn||et.pinchOut)}function fu(){return!!(vr()&&oi())}function yr(){var n=ar(),t=er(),i=pr(),r=wr(),u=or();return!u&&r&&i&&t&&n}function sr(){return!!(et.swipe||et.swipeStatus||et.swipeLeft||et.swipeRight||et.swipeUp||et.swipeDown)}function eu(){return!!(yr()&&sr())}function pr(){return ct===et.fingers||et.fingers===l||!c}function wr(){return ht[0].end.x!==0}function br(){return!!et.tap}function hr(){return!!et.doubleTap}function ou(){return!!et.longTap}function kr(){if(ti==null)return!1;var n=ii();return hr()&&n-ti<=et.doubleTapThreshold}function su(){return kr()}function hu(){return(ct===1||!c)&&(isNaN(at)||at<et.threshold)}function cu(){return lt>et.longTapThreshold&&at<ut}function lu(){return!!(hu()&&br())}function au(){return!!(kr()&&hr())}function vu(){return!!(cu()&&ou())}function yu(n){vi=ii();nr=n.touches.length+1}function dr(){vi=0;nr=0}function yi(){var n=!1,t;return vi&&(t=ii()-vi,t<=et.fingerReleaseThreshold&&(n=!0)),n}function pu(){return!!(ot.data(h+"_intouch")===!0)}function pi(n){ot&&(n===!0?(ot.bind(ki,ir),ot.bind(di,rr),ri&&ot.bind(ri,ur)):(ot.unbind(ki,ir,!1),ot.unbind(di,rr,!1),ri&&ot.unbind(ri,ur,!1)),ot.data(h+"_intouch",n===!0))}function wi(n,t){var i={start:{x:0,y:0},last:{x:0,y:0},end:{x:0,y:0}};return i.start.x=i.last.x=i.end.x=t.pageX||t.clientX,i.start.y=i.last.y=i.end.y=t.pageY||t.clientY,ht[n]=i,i}function gr(n){var i=n.identifier!==undefined?n.identifier:0,t=wu(i);return t===null&&(t=wi(i,n)),t.last.x=t.end.x,t.last.y=t.end.y,t.end.x=n.pageX||n.clientX,t.end.y=n.pageY||n.clientY,t}function wu(n){return ht[n]||null}function bu(n,t){t=Math.max(t,nu(n));li[n].distance=t}function nu(n){return li[n]?li[n].distance:undefined}function ku(){var n={};return n[r]=bi(r),n[u]=bi(u),n[f]=bi(f),n[e]=bi(e),n}function bi(n){return{direction:n,distance:0}}function tu(){return ai-gi}function cr(n,t){var i=Math.abs(n.x-t.x),r=Math.abs(n.y-t.y);return Math.round(Math.sqrt(i*i+r*r))}function du(n,t){var i=t/n*1;return i.toFixed(2)}function gu(){return pt<1?y:v}function nf(n,t){return Math.round(Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2)))}function tf(n,t){var r=n.x-t.x,u=t.y-n.y,f=Math.atan2(u,r),i=Math.round(f*180/Math.PI);return i<0&&(i=360-Math.abs(i)),i}function iu(n,t){var i=tf(n,t);return i<=45&&i>=0?r:i<=360&&i>=315?r:i>=135&&i<=225?u:i>45&&i<135?e:f}function ii(){var n=new Date;return n.getTime()}function rf(t){t=n(t);var i=t.offset();return{left:i.left,right:i.left+t.outerWidth(),top:i.top,bottom:i.top+t.outerHeight()}}function uf(n,t){return n.x>t.left&&n.x<t.right&&n.y>t.top&&n.y<t.bottom}var et=n.extend({},et),si=c||s||!et.fallbackToMouseEvents,hi=si?s?a?"MSPointerDown":"pointerdown":"touchstart":"mousedown",ki=si?s?a?"MSPointerMove":"pointermove":"touchmove":"mousemove",di=si?s?a?"MSPointerUp":"pointerup":"touchend":"mouseup",ri=si?s?"mouseleave":null:"mouseleave",ci=s?a?"MSPointerCancel":"pointercancel":"touchcancel",at=0,vt=null,yt=null,lt=0,gt=0,ni=0,pt=1,bt=0,kt=0,li=null,ot=n(ft),st="start",ct=0,ht={},gi=0,ai=0,vi=0,nr=0,ti=0,fi=null,ei=null;try{ot.bind(hi,tr);ot.bind(ci,ui)}catch(ff){n.error("events not supported "+hi+","+ci+" on jQuery.swipe")}this.enable=function(){return ot.bind(hi,tr),ot.bind(ci,ui),ot};this.disable=function(){return lr(),ot};this.destroy=function(){lr();ot.data(h,null);ot=null};this.option=function(t,i){if(typeof t=="object")et=n.extend(et,t);else if(et[t]!==undefined){if(i===undefined)return et[t];et[t]=i}else if(t)n.error("Option "+t+" does not exist on jQuery.swipe.options");else return et;return null}}var r="left",u="right",f="up",e="down",v="in",y="out",p="none",nt="auto",w="swipe",b="pinch",k="tap",tt="doubletap",it="longtap",d="horizontal",g="vertical",l="all",ut=10,rt="start",o="move",t="end",i="cancel",c="ontouchstart"in window,a=window.navigator.msPointerEnabled&&!window.navigator.pointerEnabled&&!c,s=(window.navigator.pointerEnabled||window.navigator.msPointerEnabled)&&!c,h="TouchSwipe";n.fn.swipe=function(t){var r=n(this),i=r.data(h);if(i&&typeof t=="string"){if(i[t])return i[t].apply(this,Array.prototype.slice.call(arguments,1));n.error("Method "+t+" does not exist on jQuery.swipe")}else if(i&&typeof t=="object")i.option.apply(this,arguments);else if(!i&&(typeof t=="object"||!t))return ft.apply(this,arguments);return r};n.fn.swipe.version="1.6.15";n.fn.swipe.defaults={fingers:1,threshold:75,cancelThreshold:null,pinchThreshold:20,maxTimeThreshold:null,fingerReleaseThreshold:250,longTapThreshold:500,doubleTapThreshold:200,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,tap:null,doubleTap:null,longTap:null,hold:null,triggerOnTouchEnd:!0,triggerOnTouchLeave:!1,allowPageScroll:"auto",fallbackToMouseEvents:!0,excludedElements:"label, button, input, select, textarea, a, .noSwipe",preventDefaultEvents:!0};n.fn.swipe.phases={PHASE_START:rt,PHASE_MOVE:o,PHASE_END:t,PHASE_CANCEL:i};n.fn.swipe.directions={LEFT:r,RIGHT:u,UP:f,DOWN:e,IN:v,OUT:y};n.fn.swipe.pageScroll={NONE:p,HORIZONTAL:d,VERTICAL:g,AUTO:nt};n.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,FOUR:4,FIVE:5,ALL:l}});$(window).on("load.wb.imganim trigger.wb.imganim.reload trigger.wb.postUpdateLayoutSuperposableEpingle.apparition",function(){(this.jqIgmAnim=$(document.getElementsByClassName?document.getElementsByClassName("wbImgAnim"):undefined).filter("[data-wbimganim]"),this.jqIgmAnim.length)&&this.jqIgmAnim.each(function(){var t=$(this),n,r,i;try{this.oAnimationPlancheImage=this.oAnimationPlancheImage||JSON.parse(t.attr("data-wbimganim").replace(/'/g,'"'))}catch(u){window.clWDUtil;return}if(this.oAnimationPlancheImage&&this.oAnimationPlancheImage.x===1&&this.oAnimationPlancheImage.n===0){if(n=this,n.jqStyleOptim&&n.jqStyleOptim.remove(),n.jqStyleOptim=$("<style class='"+t[0].classList[1]+"'><\/style>"),n.jqImgAnim=$(t[0].firstElementChild),$("head").append(n.jqStyleOptim),r=function(){var i,r;window.requestIdleCallback?cancelIdleCallback(n.timerMajKF):clearTimeout(n.timerMajKF);n.timerMajKF=undefined;i=t.outerHeight()*n.oAnimationPlancheImage.y;n.jqImgAnim.css("animation-play-state","");bIEAvec11&&n.jqImgAnim[0].src.substr(-3)==="svg"&&n.jqImgAnim.css({height:i});n.nHauteurCouranteAnimation=i;r="@keyframes "+t[0].classList[1]+"{ from { transform:translateY(0); } to { transform:translateY(-"+n.nHauteurCouranteAnimation+"px); } }";n.jqStyleOptim.html(r);n.wbImgAnimDejaInit=n.clientHeight>0},i=function(t,u,f){if(!u){if(n.timerMajKF!==undefined)window.requestIdleCallback?cancelIdleCallback(n.timerMajKF):clearTimeout(n.timerMajKF);else{if(!n.classList.contains("wbImgAnimLargeurPourcentage")&&n.wbImgAnimDejaInit){i=function(){};return}n.jqStyleOptim.html("");n.jqImgAnim.css("animation-play-state","paused")}n.timerMajKF=undefined;f?r():n.timerMajKF=window.requestIdleCallback?window.requestIdleCallback(r):setTimeout(r,1e3)}},!this.wbImgAnimDejaEcoute){this.wbImgAnimDejaEcoute=!0;clWDUtil.AttacheOnScrollResize(i);$(window).on("trigger.wb.postUpdateLayoutSuperposableEpingle.apparition.imganim",function(t,r){(!r||clWDUtil.bEstFils(n,r))&&i(t,!1,!0)})}i(!0)}})});window.clWDUtil!==undefined&&(clWDUtil.m_oNotificationsAjoutHTML&&clWDUtil.m_oNotificationsAjoutHTML.AddNotification(function(){$(window).trigger("trigger.wb.imganim.reload")}),clWDUtil.m_oNotificationsFinAJAX&&clWDUtil.m_oNotificationsFinAJAX.AddNotification(function(){$(window).trigger("trigger.wb.imganim.reload")}));eIMG_MODE.imgModeMini=eIMG_MODE.i=0;eIMG_MODE.imgNormal=++eIMG_MODE.i;eIMG_MODE.imgCentre=++eIMG_MODE.i;eIMG_MODE.imgEtire=++eIMG_MODE.i;eIMG_MODE.imgRepete=++eIMG_MODE.i;eIMG_MODE.imgHomothetique=++eIMG_MODE.i;eIMG_MODE.imgHomothetiqueCentre=++eIMG_MODE.i;eIMG_MODE.imgHomothetiqueLarge=++eIMG_MODE.i;eIMG_MODE.imgHomothetiqueCentreLarge=++eIMG_MODE.i;eIMG_MODE.imgAdapte=++eIMG_MODE.i;eIMG_MODE.imgAdapteCentre=++eIMG_MODE.i;eIMG_MODE.IMG_MODE_NAVIGATEUR_MINI_INCLUS=eIMG_MODE.imgNavigateurHomothetiqueLargeur=++eIMG_MODE.i;eIMG_MODE.imgNavigateurAdapteLargeur=++eIMG_MODE.i;eIMG_MODE.imgNavigateurHomothetiqueLargeurDebordementHauteur=++eIMG_MODE.i;eIMG_MODE.imgNavigateurAdapteLargeurDebordementHauteur=++eIMG_MODE.i;eIMG_MODE.imgNavigateurCentre=++eIMG_MODE.i;eIMG_MODE.imgNavigateurHomothetique=++eIMG_MODE.i;eIMG_MODE.imgNavigateurHomothetiqueCentre=++eIMG_MODE.i;eIMG_MODE.imgNavigateurHomothetiqueLarge=++eIMG_MODE.i;eIMG_MODE.imgNavigateurHomothetiqueCentreLarge=++eIMG_MODE.i;eIMG_MODE.imgNavigateurAdapte=++eIMG_MODE.i;eIMG_MODE.imgNavigateurAdapteCentre=++eIMG_MODE.i;eIMG_MODE.imgNavigateurAdapteLargeCentre=++eIMG_MODE.i;eIMG_MODE.imgAdapteLargeCentre=++eIMG_MODE.i;$(function(){function r(){var n=window.wbImgHomNav_DejaLoaded?window.wbImgHomNav_DejaLoaded.shift():undefined;if(!n){window.wbImgHomNav_DejaLoaded=undefined;return}wbImgHomNav(n[0],n[1],n[2]);i()-u>f?(u=i(),requestAnimationFrame(r)):r()}var t,n;if(window.wbImgHomNav_DejaLoaded){for(t=0;t<window.wbImgHomNav_DejaLoaded.length;++t)n=$(window.wbImgHomNav_DejaLoaded[t][0]),n[0].nLargeurInitiale=n.width(),n[0].nHauteurInitiale=Math.max(n.height(),n.parent().height());var i=function(){return window.performance&&window.performance.now?window.performance.now():new Date},u=i(),f=100;requestAnimationFrame(r)}});
/*!
 * Masonry PACKAGED v3.3.2
 * Cascading grid layout library
 * http://masonry.desandro.com
 * MIT License
 * by David DeSandro
 */
bIEQuirks||function(n){function r(){}function t(n){function u(t){t.prototype.option||(t.prototype.option=function(t){n.isPlainObject(t)&&(this.options=n.extend(!0,this.options,t))})}function f(r,u){n.fn[r]=function(f){var h,o,c,l,e,s;if(typeof f=="string"){for(h=i.call(arguments,1),o=0,c=this.length;o<c;o++){if(l=this[o],e=n.data(l,r),!e){t("cannot call methods on "+r+" prior to initialization; attempted to call '"+f+"'");continue}if(!n.isFunction(e[f])||f.charAt(0)==="_"){t("no such method '"+f+"' for "+r+" instance");continue}if(s=e[f].apply(e,h),s!==undefined)return s}return this}return this.each(function(){var t=n.data(this,r);t?(t.option(f),t._init()):(t=new u(this,f),n.data(this,r,t))})}}if(n){var t=typeof console=="undefined"?r:function(n){console.error(n)};return n.bridget=function(n,t){u(t);f(n,t)},n.bridget}}var i=Array.prototype.slice;typeof define=="function"&&define.amd?define("jquery-bridget/jquery.bridget",["jquery"],t):typeof exports=="object"?t(require("jquery")):t(n.jQuery)}(window);
/*!
 * eventie v1.0.6
 * event binding helper
 *   eventie.bind( elem, 'click', myFn )
 *   eventie.unbind( elem, 'click', myFn )
 * MIT license
 */
(function(n){function f(t){var i=n.event;return i.target=i.target||i.srcElement||t,i}var t=document.documentElement,u=function(){},i,r;t.addEventListener?u=function(n,t,i){n.addEventListener(t,i,!1)}:t.attachEvent&&(u=function(n,t,i){n[t+i]=i.handleEvent?function(){var t=f(n);i.handleEvent.call(i,t)}:function(){var t=f(n);i.call(n,t)};n.attachEvent("on"+t,n[t+i])});i=function(){};t.removeEventListener?i=function(n,t,i){n.removeEventListener(t,i,!1)}:t.detachEvent&&(i=function(n,t,i){n.detachEvent("on"+t,n[t+i]);try{delete n[t+i]}catch(r){n[t+i]=undefined}});r={bind:u,unbind:i};typeof define=="function"&&define.amd?define("eventie/eventie",r):typeof exports=="object"?module.exports=r:n.eventie=r})(window);
/*!
 * EventEmitter v4.2.11 - git.io/ee
 * Unlicense - http://unlicense.org/
 * Oliver Caldwell - http://oli.me.uk/
 * @preserve
 */
(function(){function t(){}function u(n,t){for(var i=n.length;i--;)if(n[i].listener===t)return i;return-1}function i(n){return function(){return this[n].apply(this,arguments)}}var n=t.prototype,r=this,f=r.EventEmitter;n.getListeners=function(n){var t=this._getEvents(),r,i;if(n instanceof RegExp){r={};for(i in t)t.hasOwnProperty(i)&&n.test(i)&&(r[i]=t[i])}else r=t[n]||(t[n]=[]);return r};n.flattenListeners=function(n){for(var i=[],t=0;t<n.length;t+=1)i.push(n[t].listener);return i};n.getListenersAsObject=function(n){var t=this.getListeners(n),i;return t instanceof Array&&(i={},i[n]=t),i||t};n.addListener=function(n,t){var i=this.getListenersAsObject(n),f=typeof t=="object";for(var r in i)i.hasOwnProperty(r)&&u(i[r],t)===-1&&i[r].push(f?t:{listener:t,once:!1});return this};n.on=i("addListener");n.addOnceListener=function(n,t){return this.addListener(n,{listener:t,once:!0})};n.once=i("addOnceListener");n.defineEvent=function(n){return this.getListeners(n),this};n.defineEvents=function(n){for(var t=0;t<n.length;t+=1)this.defineEvent(n[t]);return this};n.removeListener=function(n,t){var i=this.getListenersAsObject(n),r;for(var f in i)i.hasOwnProperty(f)&&(r=u(i[f],t),r!==-1&&i[f].splice(r,1));return this};n.off=i("removeListener");n.addListeners=function(n,t){return this.manipulateListeners(!1,n,t)};n.removeListeners=function(n,t){return this.manipulateListeners(!0,n,t)};n.manipulateListeners=function(n,t,i){var r,u,f=n?this.removeListener:this.addListener,e=n?this.removeListeners:this.addListeners;if(typeof t!="object"||t instanceof RegExp)for(r=i.length;r--;)f.call(this,t,i[r]);else for(r in t)t.hasOwnProperty(r)&&(u=t[r])&&(typeof u=="function"?f.call(this,r,u):e.call(this,r,u));return this};n.removeEvent=function(n){var r=typeof n,t=this._getEvents(),i;if(r==="string")delete t[n];else if(n instanceof RegExp)for(i in t)t.hasOwnProperty(i)&&n.test(i)&&delete t[i];else delete this._events;return this};n.removeAllListeners=i("removeEvent");n.emitEvent=function(n,t){var r=this.getListenersAsObject(n),i,f,u,e;for(u in r)if(r.hasOwnProperty(u))for(f=r[u].length;f--;)i=r[u][f],i.once===!0&&this.removeListener(n,i.listener),e=i.listener.apply(this,t||[]),e===this._getOnceReturnValue()&&this.removeListener(n,i.listener);return this};n.trigger=i("emitEvent");n.emit=function(n){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(n,t)};n.setOnceReturnValue=function(n){return this._onceReturnValue=n,this};n._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0};n._getEvents=function(){return this._events||(this._events={})};t.noConflict=function(){return r.EventEmitter=f,t};typeof define=="function"&&define.amd?define("eventEmitter/EventEmitter",[],function(){return t}):typeof module=="object"&&module.exports?module.exports=t:r.EventEmitter=t}).call(this);
/*!
 * getStyleProperty v1.0.4
 * original by kangax
 * http://perfectionkills.com/feature-testing-css-properties/
 * MIT license
 */
(function(n){function t(n){var u,t,f;if(n){if(typeof r[n]=="string")return n;for(n=n.charAt(0).toUpperCase()+n.slice(1),t=0,f=i.length;t<f;t++)if(u=i[t]+n,typeof r[u]=="string")return u}}var i="Webkit Moz ms Ms O".split(" "),r=document.documentElement.style;typeof define=="function"&&define.amd?define("get-style-property/get-style-property",[],function(){return t}):typeof exports=="object"?module.exports=t:n.getStyleProperty=t})(window);
/*!
 * getSize v1.2.2
 * measure size of elements
 * MIT license
 */
(function(n){function i(n){var t=parseFloat(n),i=n.indexOf("%")===-1&&!isNaN(t);return i&&t}function u(){}function e(){for(var r,i={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},n=0,u=t.length;n<u;n++)r=t[n],i[r]=0;return i}function r(r){function c(){var e,t,c,l;s||(s=!0,e=n.getComputedStyle,o=function(){var n=e?function(n){return e(n,null)}:function(n){return n.currentStyle};return function(t){var i=n(t);return i||f("Style returned "+i+". Are you running this code in a hidden iframe on Firefox? See http://bit.ly/getsizebug1"),i}}(),u=r("boxSizing"),u&&(t=document.createElement("div"),t.style.width="200px",t.style.padding="1px 2px 3px 4px",t.style.borderStyle="solid",t.style.borderWidth="1px 2px 3px 4px",t.style[u]="border-box",c=document.body||document.documentElement,c.appendChild(t),l=o(t),h=i(l.width)===200,c.removeChild(t)))}function l(n){var f,r,w,s,b,v,l,y,p;if(c(),typeof n=="string"&&(n=document.querySelector(n)),n&&typeof n=="object"&&n.nodeType){if(f=o(n),f.display==="none")return e();for(r={},r.width=n.offsetWidth,r.height=n.offsetHeight,w=r.isBorderBox=!!(u&&f[u]&&f[u]==="border-box"),s=0,b=t.length;s<b;s++)v=t[s],l=f[v],l=a(n,l),y=parseFloat(l),r[v]=isNaN(y)?0:y;var k=r.paddingLeft+r.paddingRight,d=r.paddingTop+r.paddingBottom,rt=r.marginLeft+r.marginRight,ut=r.marginTop+r.marginBottom,g=r.borderLeftWidth+r.borderRightWidth,nt=r.borderTopWidth+r.borderBottomWidth,tt=w&&h,it=i(f.width);return it!==!1&&(r.width=it+(tt?0:k+g)),p=i(f.height),p!==!1&&(r.height=p+(tt?0:d+nt)),r.innerWidth=r.width-(k+g),r.innerHeight=r.height-(d+nt),r.outerWidth=r.width+rt,r.outerHeight=r.height+ut,r}}function a(t,i){if(n.getComputedStyle||i.indexOf("%")===-1)return i;var r=t.style,e=r.left,u=t.runtimeStyle,f=u&&u.left;return f&&(u.left=t.currentStyle.left),r.left=i,i=r.pixelLeft,r.left=e,f&&(u.left=f),i}var s=!1,o,u,h;return l}var f=typeof console=="undefined"?u:function(n){console.error(n)},t=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];typeof define=="function"&&define.amd?define("get-size/get-size",["get-style-property/get-style-property"],r):typeof exports=="object"?module.exports=r(require("desandro-get-style-property")):n.getSize=r(n.getStyleProperty)})(window);
/*!
 * docReady v1.0.4
 * Cross browser DOMContentLoaded event emitter
 * MIT license
 */
(function(n){function t(n){typeof n=="function"&&(t.isReady?n():r.push(n))}function u(n){var r=n.type==="readystatechange"&&i.readyState!=="complete";t.isReady||r||e()}function e(){var n,i,u;for(t.isReady=!0,n=0,i=r.length;n<i;n++)u=r[n],u()}function f(r){return i.readyState==="complete"?e():(r.bind(i,"DOMContentLoaded",u),r.bind(i,"readystatechange",u),r.bind(n,"load",u)),t}var i=n.document,r=[];t.isReady=!1;typeof define=="function"&&define.amd?define("doc-ready/doc-ready",["eventie/eventie"],f):typeof exports=="object"?module.exports=f(require("eventie")):n.docReady=f(n.eventie)})(window),function(n){function i(n,t){return n[r](t)}function u(n){if(!n.parentNode){var t=document.createDocumentFragment();t.appendChild(n)}}function o(n,t){var r,i,f;for(u(n),r=n.parentNode.querySelectorAll(t),i=0,f=r.length;i<f;i++)if(r[i]===n)return!0;return!1}function s(n,t){return u(n),i(n,t)}var r=function(){var i,t,u,f,r;if(n.matches)return"matches";if(n.matchesSelector)return"matchesSelector";for(i=["webkit","moz","ms","o"],t=0,u=i.length;t<u;t++)if(f=i[t],r=f+"MatchesSelector",n[r])return r}(),t,f,e;r?(f=document.createElement("div"),e=i(f,"div"),t=e?i:s):t=o;typeof define=="function"&&define.amd?define("matches-selector/matches-selector",[],function(){return t}):typeof exports=="object"?module.exports=t:window.matchesSelector=t}(window.Element?Element.prototype:document.documentElement),function(n,t){typeof define=="function"&&define.amd?define("fizzy-ui-utils/utils",["doc-ready/doc-ready","matches-selector/matches-selector"],function(i,r){return t(n,i,r)}):typeof exports=="object"?module.exports=t(n,require("doc-ready"),require("desandro-matches-selector")):n.fizzyUIUtils=t(n,n.docReady,n.matchesSelector)}(window,function(n,t,i){var r={},f,u;return r.extend=function(n,t){for(var i in t)n[i]=t[i];return n},r.modulo=function(n,t){return(n%t+t)%t},f=Object.prototype.toString,r.isArray=function(n){return f.call(n)=="[object Array]"},r.makeArray=function(n){var t=[],i,u;if(r.isArray(n))t=n;else if(n&&typeof n.length=="number")for(i=0,u=n.length;i<u;i++)t.push(n[i]);else t.push(n);return t},r.indexOf=Array.prototype.indexOf?function(n,t){return n.indexOf(t)}:function(n,t){for(var i=0,r=n.length;i<r;i++)if(n[i]===t)return i;return-1},r.removeFrom=function(n,t){var i=r.indexOf(n,t);i!=-1&&n.splice(i,1)},r.isElement=typeof HTMLElement=="function"||typeof HTMLElement=="object"?function(n){return n instanceof HTMLElement}:function(n){return n&&typeof n=="object"&&n.nodeType==1&&typeof n.nodeName=="string"},r.setText=function(){function t(t,i){n=n||(document.documentElement.textContent!==undefined?"textContent":"innerText");t[n]=i}var n;return t}(),r.getParent=function(n,t){while(n!=document.body)if(n=n.parentNode,i(n,t))return n},r.getQueryElement=function(n){return typeof n=="string"?document.querySelector(n):n},r.handleEvent=function(n){var t="on"+n.type;this[t]&&this[t](n)},r.filterFindElements=function(n,t){var f,e,h,u,s,o,c;for(n=r.makeArray(n),f=[],e=0,h=n.length;e<h;e++)if(u=n[e],r.isElement(u))if(t)for(i(u,t)&&f.push(u),s=u.querySelectorAll(t),o=0,c=s.length;o<c;o++)f.push(s[o]);else f.push(u);return f},r.debounceMethod=function(n,t,i){var u=n.prototype[t],r=t+"Timeout";n.prototype[t]=function(){var t=this[r],f,n;t&&clearTimeout(t);f=arguments;n=this;this[r]=setTimeout(function(){u.apply(n,f);delete n[r]},i||100)}},r.toDashed=function(n){return n.replace(/(.)([A-Z])/g,function(n,t,i){return t+"-"+i}).toLowerCase()},u=n.console,r.htmlInit=function(i,f){t(function(){for(var t,o,a,v,s,h=r.toDashed(f),c=document.querySelectorAll?document.querySelectorAll(".js-"+h):[],l="data-"+h+"-options",e=0,y=c.length;e<y;e++){t=c[e];o=t.getAttribute(l);try{a=o&&JSON.parse(o)}catch(p){u&&u.error("Error parsing "+l+" on "+t.nodeName.toLowerCase()+(t.id?"#"+t.id:"")+": "+p);continue}v=new i(t,a);s=n.jQuery;s&&s.data(t,f,v)}})},r}),function(n,t){typeof define=="function"&&define.amd?define("outlayer/item",["eventEmitter/EventEmitter","get-size/get-size","get-style-property/get-style-property","fizzy-ui-utils/utils"],function(i,r,u,f){return t(n,i,r,u,f)}):typeof exports=="object"?module.exports=t(n,require("wolfy87-eventemitter"),require("get-size"),require("desandro-get-style-property"),require("fizzy-ui-utils")):(n.Outlayer={},n.Outlayer.Item=t(n,n.EventEmitter,n.getSize,n.getStyleProperty,n.fizzyUIUtils))}(window,function(n,t,i,r,u){function p(n){for(var t in n)return!1;return t=null,!0}function f(n,t){n&&(this.element=n,this.layout=t,this.position={x:0,y:0},this._create())}function d(n){return n.replace(/([A-Z])/g,function(n){return"-"+n.toLowerCase()})}var o=n.getComputedStyle,y=o?function(n){return o(n,null)}:function(n){return n.currentStyle},e=r("transition"),w=r("transform"),b=e&&w,k=!!r("perspective"),s={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[e],h=["transform","transition","transitionDuration","transitionProperty"],c=function(){for(var n,t,u={},i=0,f=h.length;i<f;i++)n=h[i],t=r(n),t&&t!==n&&(u[n]=t);return u}(),l,a,v;return u.extend(f.prototype,t.prototype),f.prototype._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}};this.css({position:"absolute"})},f.prototype.handleEvent=function(n){var t="on"+n.type;this[t]&&this[t](n)},f.prototype.getSize=function(){this.size=i(this.element)},f.prototype.css=function(n){var r=this.element.style,t,i;for(t in n)i=c[t]||t,r[i]=n[t]},f.prototype.getPosition=function(){var f=y(this.element),e=this.layout.options,o=e.isOriginLeft,s=e.isOriginTop,r=f[o?"left":"right"],u=f[s?"top":"bottom"],n=this.layout.size,t=r.indexOf("%")!=-1?parseFloat(r)/100*n.width:parseInt(r,10),i=u.indexOf("%")!=-1?parseFloat(u)/100*n.height:parseInt(u,10);t=isNaN(t)?0:t;i=isNaN(i)?0:i;t-=o?n.paddingLeft:n.paddingRight;i-=s?n.paddingTop:n.paddingBottom;this.position.x=t;this.position.y=i},f.prototype.layoutPosition=function(){var i=this.layout.size,n=this.layout.options,t={},r=n.isOriginLeft?"paddingLeft":"paddingRight",u=n.isOriginLeft?"left":"right",f=n.isOriginLeft?"right":"left",e=this.position.x+i[r];t[u]=this.getXValue(e);t[f]="";var o=n.isOriginTop?"paddingTop":"paddingBottom",s=n.isOriginTop?"top":"bottom",h=n.isOriginTop?"bottom":"top",c=this.position.y+i[o];t[s]=this.getYValue(c);t[h]="";this.css(t);this.emitEvent("layout",[this])},f.prototype.getXValue=function(n){var t=this.layout.options;return t.percentPosition&&!t.isHorizontal?n/this.layout.size.width*100+"%":n+"px"},f.prototype.getYValue=function(n){var t=this.layout.options;return t.percentPosition&&t.isHorizontal?n/this.layout.size.height*100+"%":n+"px"},f.prototype._transitionTo=function(n,t){this.getPosition();var r=this.position.x,u=this.position.y,f=parseInt(n,10),e=parseInt(t,10),o=f===this.position.x&&e===this.position.y;if(this.setPosition(n,t),o&&!this.isTransitioning){this.layoutPosition();return}var s=n-r,h=t-u,i={};i.transform=this.getTranslate(s,h);this.transition({to:i,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})},f.prototype.getTranslate=function(n,t){var i=this.layout.options;return(n=i.isOriginLeft?n:-n,t=i.isOriginTop?t:-t,k)?"translate3d("+n+"px, "+t+"px, 0)":"translate("+n+"px, "+t+"px)"},f.prototype.goTo=function(n,t){this.setPosition(n,t);this.layoutPosition()},f.prototype.moveTo=b?f.prototype._transitionTo:f.prototype.goTo,f.prototype.setPosition=function(n,t){this.position.x=parseInt(n,10);this.position.y=parseInt(t,10)},f.prototype._nonTransition=function(n){this.css(n.to);n.isCleaning&&this._removeStyles(n.to);for(var t in n.onTransitionEnd)n.onTransitionEnd[t].call(this)},f.prototype._transition=function(n){var i,t,r;if(!parseFloat(this.layout.options.transitionDuration)){this._nonTransition(n);return}i=this._transn;for(t in n.onTransitionEnd)i.onEnd[t]=n.onTransitionEnd[t];for(t in n.to)i.ingProperties[t]=!0,n.isCleaning&&(i.clean[t]=!0);n.from&&(this.css(n.from),r=this.element.offsetHeight,r=null);this.enableTransition(n.to);this.css(n.to);this.isTransitioning=!0},l="opacity,"+d(c.transform||"transform"),f.prototype.enableTransition=function(){this.isTransitioning||(this.css({transitionProperty:l,transitionDuration:this.layout.options.transitionDuration}),this.element.addEventListener(s,this,!1))},f.prototype.transition=f.prototype[e?"_transition":"_nonTransition"],f.prototype.onwebkitTransitionEnd=function(n){this.ontransitionend(n)},f.prototype.onotransitionend=function(n){this.ontransitionend(n)},a={"-webkit-transform":"transform","-moz-transform":"transform","-o-transform":"transform"},f.prototype.ontransitionend=function(n){var t,i,r;n.target===this.element&&(t=this._transn,i=a[n.propertyName]||n.propertyName,delete t.ingProperties[i],p(t.ingProperties)&&this.disableTransition(),i in t.clean&&(this.element.style[n.propertyName]="",delete t.clean[i]),i in t.onEnd&&(r=t.onEnd[i],r.call(this),delete t.onEnd[i]),this.emitEvent("transitionEnd",[this]))},f.prototype.disableTransition=function(){this.removeTransitionStyles();this.element.removeEventListener(s,this,!1);this.isTransitioning=!1},f.prototype._removeStyles=function(n){var t={};for(var i in n)t[i]="";this.css(t)},v={transitionProperty:"",transitionDuration:""},f.prototype.removeTransitionStyles=function(){this.css(v)},f.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element);this.css({display:""});this.emitEvent("remove",[this])},f.prototype.remove=function(){if(!e||!parseFloat(this.layout.options.transitionDuration)){this.removeElem();return}var n=this;this.once("transitionEnd",function(){n.removeElem()});this.hide()},f.prototype.reveal=function(){delete this.isHidden;this.css({display:""});var n=this.layout.options,t={},i=this.getHideRevealTransitionEndProperty("visibleStyle");t[i]=this.onRevealTransitionEnd;this.transition({from:n.hiddenStyle,to:n.visibleStyle,isCleaning:!0,onTransitionEnd:t})},f.prototype.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},f.prototype.getHideRevealTransitionEndProperty=function(n){var t=this.layout.options[n],i;if(t.opacity)return"opacity";for(i in t)return i},f.prototype.hide=function(){this.isHidden=!0;this.css({display:""});var n=this.layout.options,t={},i=this.getHideRevealTransitionEndProperty("hiddenStyle");t[i]=this.onHideTransitionEnd;this.transition({from:n.visibleStyle,to:n.hiddenStyle,isCleaning:!0,onTransitionEnd:t})},f.prototype.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},f.prototype.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},f});
/*!
 * Outlayer v1.4.2
 * the brains and guts of a layout library
 * MIT license
 */
(function(n,t){typeof define=="function"&&define.amd?define("outlayer/outlayer",["eventie/eventie","eventEmitter/EventEmitter","get-size/get-size","fizzy-ui-utils/utils","./item"],function(i,r,u,f,e){return t(n,i,r,u,f,e)}):typeof exports=="object"?module.exports=t(n,require("eventie"),require("wolfy87-eventemitter"),require("get-size"),require("fizzy-ui-utils"),require("./item")):n.Outlayer=t(n,n.eventie,n.EventEmitter,n.getSize,n.fizzyUIUtils,n.Outlayer.Item)})(window,function(n,t,i,r,u,f){function e(n,t){var i=u.getQueryElement(n),r;if(!i){h&&h.error("Bad element for "+this.constructor.namespace+": "+(i||n));return}this.element=i;o&&(this.$element=o(this.element));this.options=u.extend({},this.constructor.defaults);this.option(t);r=++l;this.element.outlayerGUID=r;s[r]=this;this._create();this.options.isInitLayout&&this.layout()}var h=n.console,o=n.jQuery,c=function(){},l=0,s={};return e.namespace="outlayer",e.Item=f,e.defaults={containerStyle:{position:"relative"},isInitLayout:!0,isOriginLeft:!0,isOriginTop:!0,isResizeBound:!0,isResizingContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}},u.extend(e.prototype,i.prototype),e.prototype.option=function(n){u.extend(this.options,n)},e.prototype._create=function(){this.reloadItems();this.stamps=[];this.stamp(this.options.stamp);u.extend(this.element.style,this.options.containerStyle);this.options.isResizeBound&&this.bindResize()},e.prototype.reloadItems=function(){this.items=this._itemize(this.element.children)},e.prototype._itemize=function(n){for(var u,f,i=this._filterFindItemElements(n),e=this.constructor.Item,r=[],t=0,o=i.length;t<o;t++)u=i[t],f=new e(u,this),r.push(f);return r},e.prototype._filterFindItemElements=function(n){return u.filterFindElements(n,this.options.itemSelector)},e.prototype.getItemElements=function(){for(var t=[],n=0,i=this.items.length;n<i;n++)t.push(this.items[n].element);return t},e.prototype.layout=function(){this._resetLayout();this._manageStamps();var n=this.options.isLayoutInstant!==undefined?this.options.isLayoutInstant:!this._isLayoutInited;this.layoutItems(this.items,n);this._isLayoutInited=!0},e.prototype._init=e.prototype.layout,e.prototype._resetLayout=function(){this.getSize()},e.prototype.getSize=function(){this.size=r(this.element)},e.prototype._getMeasurement=function(n,t){var i=this.options[n],f;i?(typeof i=="string"?f=this.element.querySelector(i):u.isElement(i)&&(f=i),this[n]=f?r(f)[t]:i):this[n]=0},e.prototype.layoutItems=function(n,t){n=this._getItemsForLayout(n);this._layoutItems(n,t);this._postLayout()},e.prototype._getItemsForLayout=function(n){for(var i,r=[],t=0,u=n.length;t<u;t++)i=n[t],i.isIgnored||r.push(i);return r},e.prototype._layoutItems=function(n,t){var f,i,e,r,u;if(this._emitCompleteOnItems("layout",n),n&&n.length){for(f=[],i=0,e=n.length;i<e;i++)r=n[i],u=this._getItemLayoutPosition(r),u.item=r,u.isInstant=t||r.isLayoutInstant,f.push(u);this._processLayoutQueue(f)}},e.prototype._getItemLayoutPosition=function(){return{x:0,y:0}},e.prototype._processLayoutQueue=function(n){for(var t,i=0,r=n.length;i<r;i++)t=n[i],this._positionItem(t.item,t.x,t.y,t.isInstant)},e.prototype._positionItem=function(n,t,i,r){r?n.goTo(t,i):n.moveTo(t,i)},e.prototype._postLayout=function(){this.resizeContainer()},e.prototype.resizeContainer=function(){if(this.options.isResizingContainer){var n=this._getContainerSize();n&&(this._setContainerMeasure(n.width,!0),this._setContainerMeasure(n.height,!1))}},e.prototype._getContainerSize=c,e.prototype._setContainerMeasure=function(n,t){if(n!==undefined){var i=this.size;i.isBorderBox&&(n+=t?i.paddingLeft+i.paddingRight+i.borderLeftWidth+i.borderRightWidth:i.paddingBottom+i.paddingTop+i.borderTopWidth+i.borderBottomWidth);n=Math.max(n,0);this.element.style[t?"width":"height"]=n+"px"}},e.prototype._emitCompleteOnItems=function(n,t){function u(){s.dispatchEvent(n+"Complete",null,[t])}function h(){r++;r===f&&u()}var s=this,f=t.length,r,i,e,o;if(!t||!f){u();return}for(r=0,i=0,e=t.length;i<e;i++){o=t[i];o.once(n,h)}},e.prototype.dispatchEvent=function(n,t,i){var u=t?[t].concat(i):i,r;this.emitEvent(n,u);o&&(this.$element=this.$element||o(this.element),t?(r=o.Event(t),r.type=n,this.$element.trigger(r,i)):this.$element.trigger(n,i))},e.prototype.ignore=function(n){var t=this.getItem(n);t&&(t.isIgnored=!0)},e.prototype.unignore=function(n){var t=this.getItem(n);t&&delete t.isIgnored},e.prototype.stamp=function(n){var t,i,r;if(n=this._find(n),n)for(this.stamps=this.stamps.concat(n),t=0,i=n.length;t<i;t++)r=n[t],this.ignore(r)},e.prototype.unstamp=function(n){var t,r,i;if(n=this._find(n),n)for(t=0,r=n.length;t<r;t++)i=n[t],u.removeFrom(this.stamps,i),this.unignore(i)},e.prototype._find=function(n){if(n)return typeof n=="string"&&(n=this.element.querySelectorAll(n)),u.makeArray(n)},e.prototype._manageStamps=function(){var n,t,i;if(this.stamps&&this.stamps.length)for(this._getBoundingRect(),n=0,t=this.stamps.length;n<t;n++)i=this.stamps[n],this._manageStamp(i)},e.prototype._getBoundingRect=function(){var t=this.element.getBoundingClientRect(),n=this.size;this._boundingRect={left:t.left+n.paddingLeft+n.borderLeftWidth,top:t.top+n.paddingTop+n.borderTopWidth,right:t.right-(n.paddingRight+n.borderRightWidth),bottom:t.bottom-(n.paddingBottom+n.borderBottomWidth)}},e.prototype._manageStamp=c,e.prototype._getElementOffset=function(n){var t=n.getBoundingClientRect(),i=this._boundingRect,u=r(n);return{left:t.left-i.left-u.marginLeft,top:t.top-i.top-u.marginTop,right:i.right-t.right-u.marginRight,bottom:i.bottom-t.bottom-u.marginBottom}},e.prototype.handleEvent=function(n){var t="on"+n.type;this[t]&&this[t](n)},e.prototype.bindResize=function(){this.isResizeBound||(t.bind(n,"resize",this),this.isResizeBound=!0)},e.prototype.unbindResize=function(){this.isResizeBound&&t.unbind(n,"resize",this);this.isResizeBound=!1},e.prototype.onresize=function(){function t(){n.resize();delete n.resizeTimeout}this.resizeTimeout&&clearTimeout(this.resizeTimeout);var n=this;this.resizeTimeout=setTimeout(t,100)},e.prototype.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},e.prototype.needsResizeLayout=function(){var n=r(this.element),t=this.size&&n;return t&&n.innerWidth!==this.size.innerWidth},e.prototype.addItems=function(n){var t=this._itemize(n);return t.length&&(this.items=this.items.concat(t)),t},e.prototype.appended=function(n){var t=this.addItems(n);t.length&&(this.layoutItems(t,!0),this.reveal(t))},e.prototype.prepended=function(n){var t=this._itemize(n),i;t.length&&(i=this.items.slice(0),this.items=t.concat(i),this._resetLayout(),this._manageStamps(),this.layoutItems(t,!0),this.reveal(t),this.layoutItems(i))},e.prototype.reveal=function(n){var i,t,r;for(this._emitCompleteOnItems("reveal",n),i=n&&n.length,t=0;i&&t<i;t++)r=n[t],r.reveal()},e.prototype.hide=function(n){var i,t,r;for(this._emitCompleteOnItems("hide",n),i=n&&n.length,t=0;i&&t<i;t++)r=n[t],r.hide()},e.prototype.revealItemElements=function(n){var t=this.getItems(n);this.reveal(t)},e.prototype.hideItemElements=function(n){var t=this.getItems(n);this.hide(t)},e.prototype.getItem=function(n){for(var i,t=0,r=this.items.length;t<r;t++)if(i=this.items[t],i.element===n)return i},e.prototype.getItems=function(n){var i,t,f,e,r;for(n=u.makeArray(n),i=[],t=0,f=n.length;t<f;t++)e=n[t],r=this.getItem(e),r&&i.push(r);return i},e.prototype.remove=function(n){var t=this.getItems(n),i,f,r;if(this._emitCompleteOnItems("remove",t),t&&t.length)for(i=0,f=t.length;i<f;i++)r=t[i],r.remove(),u.removeFrom(this.items,r)},e.prototype.destroy=function(){var t=this.element.style,n,i,r,u;for(t.height="",t.position="",t.width="",n=0,i=this.items.length;n<i;n++)r=this.items[n],r.destroy();this.unbindResize();u=this.element.outlayerGUID;delete s[u];delete this.element.outlayerGUID;o&&o.removeData(this.element,this.constructor.namespace)},e.data=function(n){n=u.getQueryElement(n);var t=n&&n.outlayerGUID;return t&&s[t]},e.create=function(n,t){function i(){e.apply(this,arguments)}return Object.create?i.prototype=Object.create(e.prototype):u.extend(i.prototype,e.prototype),i.prototype.constructor=i,i.defaults=u.extend({},e.defaults),u.extend(i.defaults,t),i.prototype.settings={},i.namespace=n,i.data=e.data,i.Item=function(){f.apply(this,arguments)},i.Item.prototype=new f,o&&o.bridget&&o.bridget(n,i),i},e.Item=f,e});
/*!
 * Masonry v3.3.2
 * Cascading grid layout library
 * http://masonry.desandro.com
 * MIT License
 * by David DeSandro
 */
(function(n,t){typeof define=="function"&&define.amd?define(["outlayer/outlayer","get-size/get-size","fizzy-ui-utils/utils"],t):typeof exports=="object"?module.exports=t(require("outlayer"),require("get-size"),require("fizzy-ui-utils")):n.Masonry=t(n.Outlayer,n.getSize,n.fizzyUIUtils)})(window,function(n,t,i){var r=n.create("masonry");return r.prototype._resetLayout=function(){this.getSize();this._getMeasurement("columnWidth","outerWidth");this._getMeasurement("gutter","outerWidth");this.measureColumns();var n=this.cols;for(this.colYs=[];n--;)this.colYs.push(0);this.maxY=0},r.prototype.measureColumns=function(){var n,i;this.getContainerWidth();this.columnWidth||(n=this.items[0],i=n&&n.element,this.columnWidth=i&&t(i).outerWidth||this.containerWidth);var r=this.columnWidth+=this.gutter,f=this.containerWidth+this.gutter,u=f/r,e=r-f%r,o=e&&e<1?"round":"floor";u=Math[o](u);this.cols=Math.max(u,1)},r.prototype.getContainerWidth=function(){var i=this.options.isFitWidth?this.element.parentNode:this.element,n=t(i);this.containerWidth=n&&n.innerWidth},r.prototype._getItemLayoutPosition=function(n){var t;n.getSize();var e=n.size.outerWidth%this.columnWidth,s=e&&e<1?"round":"ceil",r=Math[s](n.size.outerWidth/this.columnWidth);r=Math.min(r,this.cols);var u=this._getColGroup(r),f=Math.min.apply(Math,u),o=i.indexOf(u,f),h={x:this.columnWidth*o,y:f},c=f+n.size.outerHeight,l=this.cols+1-u.length;for(t=0;t<l;t++)this.colYs[o+t]=c;return h},r.prototype._getColGroup=function(n){var i,r,t,u;if(n<2)return this.colYs;for(i=[],r=this.cols+1-n,t=0;t<r;t++)u=this.colYs.slice(t,t+n),i[t]=Math.max.apply(Math,u);return i},r.prototype._manageStamp=function(n){var e=t(n),u=this._getElementOffset(n),o=this.options.isOriginLeft?u.left:u.right,s=o+e.outerWidth,f=Math.floor(o/this.columnWidth),i,h,r;for(f=Math.max(0,f),i=Math.floor(s/this.columnWidth),i-=s%this.columnWidth?0:1,i=Math.min(this.cols-1,i),h=(this.options.isOriginTop?u.top:u.bottom)+e.outerHeight,r=f;r<=i;r++)this.colYs[r]=Math.max(h,this.colYs[r])},r.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var n={height:this.maxY};return this.options.isFitWidth&&(n.width=this._getContainerFitWidth()),n},r.prototype._getContainerFitWidth=function(){for(var n=0,t=this.cols;--t;){if(this.colYs[t]!==0)break;n++}return(this.cols-n)*this.columnWidth-this.gutter},r.prototype.needsResizeLayout=function(){var n=this.containerWidth;return this.getContainerWidth(),n!==this.containerWidth},r});
/*!
 * imagesLoaded PACKAGED v3.2.0
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */
/*!
 * EventEmitter v4.2.6 - git.io/ee
 * Oliver Caldwell
 * MIT license
 * @preserve
 */
bIEQuirks||function(){"use strict";function t(){}function u(n,t){for(var i=n.length;i--;)if(n[i].listener===t)return i;return-1}function i(n){return function(){return this[n].apply(this,arguments)}}var n=t.prototype,r=this,f=r.EventEmitter;n.getListeners=function(n){var t=this._getEvents(),r,i;if(typeof n=="object"){r={};for(i in t)t.hasOwnProperty(i)&&n.test(i)&&(r[i]=t[i])}else r=t[n]||(t[n]=[]);return r};n.flattenListeners=function(n){for(var i=[],t=0;t<n.length;t+=1)i.push(n[t].listener);return i};n.getListenersAsObject=function(n){var t=this.getListeners(n),i;return t instanceof Array&&(i={},i[n]=t),i||t};n.addListener=function(n,t){var i=this.getListenersAsObject(n),f=typeof t=="object";for(var r in i)i.hasOwnProperty(r)&&u(i[r],t)===-1&&i[r].push(f?t:{listener:t,once:!1});return this};n.on=i("addListener");n.addOnceListener=function(n,t){return this.addListener(n,{listener:t,once:!0})};n.once=i("addOnceListener");n.defineEvent=function(n){return this.getListeners(n),this};n.defineEvents=function(n){for(var t=0;t<n.length;t+=1)this.defineEvent(n[t]);return this};n.removeListener=function(n,t){var i=this.getListenersAsObject(n),r;for(var f in i)i.hasOwnProperty(f)&&(r=u(i[f],t),r!==-1&&i[f].splice(r,1));return this};n.off=i("removeListener");n.addListeners=function(n,t){return this.manipulateListeners(!1,n,t)};n.removeListeners=function(n,t){return this.manipulateListeners(!0,n,t)};n.manipulateListeners=function(n,t,i){var r,u,f=n?this.removeListener:this.addListener,e=n?this.removeListeners:this.addListeners;if(typeof t!="object"||t instanceof RegExp)for(r=i.length;r--;)f.call(this,t,i[r]);else for(r in t)t.hasOwnProperty(r)&&(u=t[r])&&(typeof u=="function"?f.call(this,r,u):e.call(this,r,u));return this};n.removeEvent=function(n){var r=typeof n,t=this._getEvents(),i;if(r==="string")delete t[n];else if(r==="object")for(i in t)t.hasOwnProperty(i)&&n.test(i)&&delete t[i];else delete this._events;return this};n.removeAllListeners=i("removeEvent");n.emitEvent=function(n,t){var r=this.getListenersAsObject(n),i,f,u,e;for(u in r)if(r.hasOwnProperty(u))for(f=r[u].length;f--;)i=r[u][f],i.once===!0&&this.removeListener(n,i.listener),e=i.listener.apply(this,t||[]),e===this._getOnceReturnValue()&&this.removeListener(n,i.listener);return this};n.trigger=i("emitEvent");n.emit=function(n){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(n,t)};n.setOnceReturnValue=function(n){return this._onceReturnValue=n,this};n._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0};n._getEvents=function(){return this._events||(this._events={})};t.noConflict=function(){return r.EventEmitter=f,t};typeof define=="function"&&define.amd?define("eventEmitter/EventEmitter",[],function(){return t}):typeof module=="object"&&module.exports?module.exports=t:this.EventEmitter=t}.call(this);
/*!
 * eventie v1.0.4
 * event binding helper
 *   eventie.bind( elem, 'click', myFn )
 *   eventie.unbind( elem, 'click', myFn )
 */
(function(n){function f(t){var i=n.event;return i.target=i.target||i.srcElement||t,i}var t=document.documentElement,r=function(){},i,u;t.addEventListener?r=function(n,t,i){n.addEventListener(t,i,!1)}:t.attachEvent&&(r=function(n,t,i){n[t+i]=i.handleEvent?function(){var t=f(n);i.handleEvent.call(i,t)}:function(){var t=f(n);i.call(n,t)};n.attachEvent("on"+t,n[t+i])});i=function(){};t.removeEventListener?i=function(n,t,i){n.removeEventListener(t,i,!1)}:t.detachEvent&&(i=function(n,t,i){n.detachEvent("on"+t,n[t+i]);try{delete n[t+i]}catch(r){n[t+i]=undefined}});u={bind:r,unbind:i};typeof define=="function"&&define.amd?define("eventie/eventie",u):n.eventie=u})(this);
/*!
 * imagesLoaded v3.2.0
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */
(function(n,t){"use strict";typeof define=="function"&&define.amd?define(["eventEmitter/EventEmitter","eventie/eventie"],function(i,r){return t(n,i,r)}):typeof module=="object"&&module.exports?module.exports=t(n,require("wolfy87-eventemitter"),require("eventie")):n.imagesLoaded=t(n,n.EventEmitter,n.eventie)})(window,function(n,t,i){function s(n,t){for(var i in t)n[i]=t[i];return n}function a(n){return l.call(n)=="[object Array]"}function v(n){var t=[],i;if(a(n))t=n;else if(typeof n.length=="number")for(i=0;i<n.length;i++)t.push(n[i]);else t.push(n);return t}function r(n,t,i){if(!(this instanceof r))return new r(n,t,i);if(typeof n=="string"&&(n=document.querySelectorAll(n)),this.elements=v(n),this.options=s({},this.options),typeof t=="function"?i=t:s(this.options,t),i)this.on("always",i);this.getImages();f&&(this.jqDeferred=new f.Deferred);var u=this;setTimeout(function(){u.check()})}function u(n){this.img=n}function e(n,t){this.url=n;this.element=t;this.img=new Image}var f=n.jQuery,o=n.console,l=Object.prototype.toString,h,c;return r.prototype=new t,r.prototype.options={},r.prototype.getImages=function(){var n,t;for(this.images=[],n=0;n<this.elements.length;n++)t=this.elements[n],this.addElementImages(t)},r.prototype.addElementImages=function(n){var i,r,t,f,u,e;if(n.nodeName=="IMG"&&this.addImage(n),this.options.background===!0&&this.addElementBackgroundImages(n),i=n.nodeType,i&&h[i]){for(r=n.querySelectorAll("img"),t=0;t<r.length;t++)f=r[t],this.addImage(f);if(typeof this.options.background=="string")for(u=n.querySelectorAll(this.options.background),t=0;t<u.length;t++)e=u[t],this.addElementBackgroundImages(e)}},h={1:!0,9:!0,11:!0},r.prototype.addElementBackgroundImages=function(n){for(var r=c(n),u=/url\(['"]*([^'"\)]+)['"]*\)/gi,t=u.exec(r.backgroundImage),i;t!==null;)i=t&&t[1],i&&this.addBackground(i,n),t=u.exec(r.backgroundImage)},c=n.getComputedStyle||function(n){return n.currentStyle},r.prototype.addImage=function(n){var t=new u(n);this.images.push(t)},r.prototype.addBackground=function(n,t){var i=new e(n,t);this.images.push(i)},r.prototype.check=function(){function r(n,t,r){setTimeout(function(){i.progress(n,t,r)})}var i=this,n,t;if(this.progressedCount=0,this.hasAnyBroken=!1,!this.images.length){this.complete();return}for(n=0;n<this.images.length;n++){t=this.images[n];t.once("progress",r);t.check()}},r.prototype.progress=function(n,t,i){this.progressedCount++;this.hasAnyBroken=this.hasAnyBroken||!n.isLoaded;this.emit("progress",this,n,t);this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,n);this.progressedCount==this.images.length&&this.complete();this.options.debug&&o&&o.log("progress: "+i,n,t)},r.prototype.complete=function(){var t=this.hasAnyBroken?"fail":"done",n;this.isComplete=!0;this.emit(t,this);this.emit("always",this);this.jqDeferred&&(n=this.hasAnyBroken?"reject":"resolve",this.jqDeferred[n](this))},u.prototype=new t,u.prototype.check=function(){var n=this.getIsImageComplete();if(n){this.confirm(this.img.naturalWidth!==0,"naturalWidth");return}this.proxyImage=new Image;i.bind(this.proxyImage,"load",this);i.bind(this.proxyImage,"error",this);i.bind(this.img,"load",this);i.bind(this.img,"error",this);this.proxyImage.src=this.img.src},u.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth!==undefined},u.prototype.confirm=function(n,t){this.isLoaded=n;this.emit("progress",this,this.img,t)},u.prototype.handleEvent=function(n){var t="on"+n.type;this[t]&&this[t](n)},u.prototype.onload=function(){this.confirm(!0,"onload");this.unbindEvents()},u.prototype.onerror=function(){this.confirm(!1,"onerror");this.unbindEvents()},u.prototype.unbindEvents=function(){i.unbind(this.proxyImage,"load",this);i.unbind(this.proxyImage,"error",this);i.unbind(this.img,"load",this);i.unbind(this.img,"error",this)},e.prototype=new u,e.prototype.check=function(){i.bind(this.img,"load",this);i.bind(this.img,"error",this);this.img.src=this.url;var n=this.getIsImageComplete();n&&(this.confirm(this.img.naturalWidth!==0,"naturalWidth"),this.unbindEvents())},e.prototype.unbindEvents=function(){i.unbind(this.img,"load",this);i.unbind(this.img,"error",this)},e.prototype.confirm=function(n,t){this.isLoaded=n;this.emit("progress",this,this.element,t)},r.makeJQueryPlugin=function(t){(t=t||n.jQuery,t)&&(f=t,f.fn.imagesLoaded=function(n,t){var i=new r(this,n,t);return i.jqDeferred.promise(f(this))})},r.makeJQueryPlugin(),r});$.fn.wbSetDureeAnimation=function(n){this.attr("data-wbGalerieDureeAnimation",n)};$.fn.wbGetDureeAnimation=function(n,t){var i=this.attr("data-wbGalerieDureeAnimation");return i!==undefined&&(i=parseFloat(i),!isNaN(i))?i:t};GALERIE_ZOOM_CANVAS=!0;GALERIE_ZOOM_CANVAS_CLONE=!0;$(window).on("DOMContentLoaded.wb.galerie trigger.wb.plan.action.set.fin",function(){function v(n,t){var i=new clWDUtil.WDBezier(.4,0,.2,1);return i.dCalcule(n,t)}function ut(n,t,i,r,u){var f=y(u,n.x,t.x,i.x,r.x),e=y(u,n.y,t.y,i.y,r.y);return{x:f,y:e}}function y(n,t,i,r,u){var f=n*n,e=f*n;return t+(-t*3+n*(3*t-t*n))*n+(3*i+n*(-6*i+i*3*n))*n+(r*3-r*3*n)*f+u*e}function o(n,t){var i=n,r={x:0,y:0},u={},f={},e=.551915024494,o=r.x-i.x,s=r.y-i.y;return r.y>i.y?(u.x=i.x,u.y=i.y+s*e,f.x=r.x-o*e,f.y=r.y):(u.x=i.x+o*e,u.y=i.y,f.x=r.x,f.y=r.y-s*e),ut(i,u,f,r,t)}function wt(){function cr(n){var t=it[n],i,r;t&&clWDUtil.oGetImageInformations&&((i=clWDUtil.oGetImageInformations(),r=!0,t.id&&(i[t.id]===undefined||i[t.id].twidth!=t.twidth||i[t.id].theight!=t.theight||i[t.id].color!=t.color)&&(u[t.id]={twidth:t.twidth,theight:t.theight,color:t.color,dataurl:t.dataurl},r=!1),t.idHD&&(i[t.idHD]===undefined||i[t.idHD].twidth!=t.iwidth||i[t.idHD].theight!=t.iheight||i[t.idHD].color!=t.color)&&(u[t.idHD]={twidth:t.iwidth,theight:t.iheight,color:i[t.idHD]&&i[t.idHD].color?i[t.idHD].color:t.color,dataurl:i[t.idHD]&&i[t.idHD].dataurl?i[t.idHD].dataurl:t.dataurl},r=!1),r)||(clWDUtil.oGetImageInformations(u),e&&clearTimeout(e),e=setTimeout(function(){NSPCS.NSAjax.ExecuteEvenementAsynchrone(_PAGE_,"",u,15,null);u={};clearTimeout(e);e=undefined},pt)))}function lr(n){return(n||!a[0].containerWidth)&&(clWDUtil.bRWD||ki[0].style.width&&ki[0].style.width!="auto"||ki.css({width:"100%"}),a[0].containerWidth=ki.width()),a[0].containerWidth}function iu(){a[0].jqCelluleGFI||$(document.body).append((a[0].jqCelluleGFI=$(document.createElement("div"))).addClass(a[0].id+"-GFI").on((bTouch?"touchstart":"click")+".wb.galerie.zoom.ferme",function(n){ri(!0);n.stopPropagation();n.preventDefault()}));var n=window._GFI_A_===!1?0:window._GFI_T_||60;if((a[0].jqCelluleGFI.css({position:"fixed",width:"100%",height:"100%",left:0,top:0,zIndex:989,pointerEvents:"",backgroundColor:"rgba(102, 102, 102, "+n/100+");"}),!wt)&&(wt=wt||kt.wbJsonParseAttr("data-wbGalerieOptions",!0),wt)){if(wt[t]){wt[t].planche&&(wt[t].planche+=" wbplanche");ai=$(document.createElement("a")).addClass("wbGalerieBoutonPrecedent padding "+(wt[t].style||"")+" "+(wt[t].surcharge||"")+" "+(wt[t].planche||"")).html("&lt;");ai.on((bTouch?"touchstart":"click")+".wb.galerie.options.fleche.precedent",function(n){fr(!1);n.stopPropagation();n.preventDefault()});gt=gt.add(ai)}if(wt[i]){wt[i].planche&&(wt[i].planche+=" wbplanche");li=$(document.createElement("a")).addClass("wbGalerieBoutonSuivant padding "+(wt[i].style||"")+" "+(wt[i].surcharge||"")+" "+(wt[i].planche||"")).html("&gt;");li.on((bTouch?"touchstart":"click")+".wb.galerie.options.fleche.suivant",function(n){fr(!0);n.stopPropagation();n.preventDefault()});gt=gt.add(li)}if(wt[r]){wt[r].planche&&(wt[r].planche+=" wbplanche");hr=$(document.createElement("a")).addClass("wbGalerieBoutonFermer padding "+(wt[r].style||"")+" "+(wt[r].surcharge||"")+" "+(wt[r].planche||"")).html("x");hr.on((bTouch?"touchstart":"click")+".wb.galerie.options.croix.fermer",function(n){ri(!0);n.stopPropagation();n.preventDefault()});gt=gt.add(hr)}a[0].jqCelluleGFI.after(gt)}}function ar(){var n,o,f,e,c,l,s,i,h;if(er){n={};y.each(function(){n[this.style.left]||(n[this.style.left]=[]);n[this.style.left].push($(this))});var u=[],r=0;for(var t in n)if(n.hasOwnProperty(t)){if(n[t].length<vt)return;for(u[r]=[],o=0,i=0;i<n[t].length;++i)o+=n[t][i].height();u[r]=o;++r}for(f=0,e=0;e<u.length;++e)f=Math.max(f,u[e]);r=0;for(t in n)if(n.hasOwnProperty(t)&&(c=f-u[r],!(n[t].length<2))){for(l=c/(n[t].length-1),s=0,i=0;i<n[t].length;++i)(h=parseFloat(n[t][i][0].style.top),h!=0)&&(s+=l,n[t][i][0].style.top=h+s+"px");++r}}}function rr(){ti>0&&gi&&y.css({transition:"top "+ti+"ms,left "+ti+"ms,width "+ti+"ms,height "+ti+"ms"})}function ur(){ti>0&&gi&&y.css({transition:"none"})}function vr(){var t,r,i,n;a[0].nLargeurNavigateurDernierCalcul=undefined;t=y.eq(0);r=t.find("td.wbImpaire").first();ui=ni*parseInt(t.attr("data-width"));ui+=gr;pi=ni*parseInt(t.attr("data-height"));pi+=nu;dt.get(0)&&(i=dt.eq(0),n=i.children().first(),ut=ni*parseInt(n.attr("data-width")||n.parent().attr("data-width")||n.width()),bt=ni*parseInt(n.attr("data-height")||n.parent().attr("data-height")||n.height()),tu=i.attr("data-wbModeHomothetique"),br="1"==i.attr("data-wbExifOrientation"));dr=kt.wbJsonParseAttr("data-wbGalerieZoom",!0);ti=kt.wbGetDureeAnimation(ti);di=kt.hasClass("wbGalerieLigne");gi=!di;tr=undefined;ir=undefined;rt=undefined;yi=undefined;oi=undefined;sr=undefined;nr=undefined;ci=undefined;y.css({transition:"none"});gi&&(yi=function(){ei();ar()},ir=function(){ur()},tr=function(n){var i=y.eq(n),t;return ur(),i.css(i[0].oInfoTaillePositionAvantPleinEcran),t=dt.eq(n),t.css(t[0].oInfoTaillePositionAvantPleinEcran),wr(i,t),rr},rt=$.extend({init:{isResizingContainer:!0,itemSelector:".wbGalerieTd>table",isLayoutInstant:!0,isInitLayout:!0,isResizeBound:!1,transitionDuration:0}},kt.wbJsonParseAttr("data-wbGalerieColonne")),rt.nLargeurColonneVariable!==undefined?(rt.nLargeurColonneVariable=parseFloat(rt.nLargeurColonneVariable)||ui,rt.init.columnWidth=undefined,rt.init.percentPosition=!0,oi=function(){var t,i,n;if(ci!=window.nLargeurNavigateur){if(ci=window.nLargeurNavigateur,t=a.width(),rt.nLargeurColonneVariable===0){y.css({width:"auto"});return}(i=t/rt.nLargeurColonneVariable,n=parseInt(i),nr!=n)&&(nr=n,y.css({width:100/nr+"%"}))}}):rt.nNombreColonne!==undefined?(rt.nNombreColonne=parseFloat(rt.nNombreColonne),rt.init.columnWidth=undefined,y.css({width:100/rt.nNombreColonne+"%"}),rt.init.percentPosition=!0):(rt.nLargeurColonneFixe=parseFloat(rt.nLargeurColonneFixe)||ui,rt.init.columnWidth=rt.nLargeurColonneFixe,rt.init.isFitWidth=!0,rt.init.percentPosition=!1,yi=function(){ar();var n=ci;if(ci=window.nLargeurNavigateur,ci!==undefined&&n<=window.nLargeurNavigateur){ci!==window.nLargeurNavigateur&&ei();return}a.css({width:"100%"});a[0].MODE_COLONNE_MASONRY_INSTANCE.masonry("layout");ei()}))}function fr(n,t,i){var f=a[0].nIndiceRepetitionZoome;if(isNaN(f))return!1;var r=y.eq(f),h=!i,o=ht&&(!ct||t===!1),e=lt,s=n?f+1:f-1,u=s<0?undefined:y.eq(s);return!u||!u.length?(r.animate({content:1},{start:function(){this.style.animation="shakeLight 150ms ease-out"},done:function(){this.style.animation=""}}),!1):(y.stop(!0,!0),h?(r[0].nLargeurAParcourirZoomAvanceRecule=(n?1:-1)*(e?r.width():window.nLargeurNavigateur),r[0].oAnimationZoomAvanceRecule={duration:ft,start:function(){ii(!1,!0,!0);vi(u,!1);u.css({zIndex:990,transformOrigin:"center 0px"})},step:function(n){u.css({opacity:n,transform:"scale("+(e?.8+.2*n:1)+") "+(o?"translateX("+(1-n)*(this.nLargeurAParcourirZoomAvanceRecule/(e?3:1))+"px)":"")});r.css({opacity:1-n,transform:o?"translateX("+n*-this.nLargeurAParcourirZoomAvanceRecule+"px)":""})},done:function(){ri(!1,r);r.css({opacity:1,transform:""});r[0].oAnimationZoomAvanceRecule=undefined;u.css({zIndex:"",transformOrigin:""})}},t!==!1&&r.animate({content:1},r[0].oAnimationZoomAvanceRecule)):(ri(!1),ii(!1,!0,!0),vi(u,!1)),!0)}function ei(n,t){if(hi.length){if(n===undefined){for(var i=0;i<hi.length;++i)ei(i,t);return}if(hi[n].length===0)return;t?UpdateLayoutSuperposableEpingle(hi[n],t):requestAnimationFrame(function(){UpdateLayoutSuperposableEpingle(hi[n])});t?dt.eq(n).trigger("trigger.wb.img.homothetique.adapte"):requestAnimationFrame(function(){dt.eq(n).trigger("trigger.wb.img.homothetique.adapte")})}}function ru(n,t,i){if(a[0].MODE_COLONNE_MASONRY_INSTANCE&&sr==JSON.stringify(rt))oi&&oi(),ur(),a[0].MODE_COLONNE_MASONRY_INSTANCE.masonry("layout"),t||rr();else{var r=!!a[0].MODE_COLONNE_MASONRY_INSTANCE;if(r)a[0].MODE_COLONNE_MASONRY_INSTANCE.off("layoutComplete"),a[0].MODE_COLONNE_MASONRY_INSTANCE.masonry("destroy"),ur(),oi&&oi();else if(lr(!0),!i&&oi){oi();a[0].nLargeurNavigateurDernierCalcul=undefined;requestAnimationFrame(function(){requestAnimationFrame(function(){pr()})});return}if(a[0].MODE_COLONNE_MASONRY_INSTANCE=a.masonry(rt.init),sr=JSON.stringify(rt),yi){a[0].MODE_COLONNE_MASONRY_INSTANCE.on("layoutComplete",yi);r?(yi(),t||rr()):(ei(undefined,!0),ar())}}}function uu(n,t,i){for(var u=new Array(i.length).fill(0),s=0,h=0,c=n,l,a,f,o,r,e;c>0&&Math.floor(t-s)!=0;){for(o=s,h=0,r=0;r<i.length;++r)e=i[r],s-=u[r],l=e.vwidth/c,u[r]+=Math.floor(l*(t-o)),u[r]>0&&e.vwidth-u[r]<ut?(a=e.vwidth-ut,u[r]=a):h+=e.vwidth,s+=u[r];if(o===s||c===h)break;c=h}for(f=t-s;f>=1;){for(o=f,r=0;r<u.length;++r)if((e=i[r],e.vwidth-u[r]!=ut)&&(u[r]++,f--,f<=0))break;if(o===f)break}while(f>=1){for(o=f,r=0;r<u.length;++r)if(e=i[r],u[r]++,f--,f<=0)break;if(o===f)break}return u[0]&&f>0&&f<1&&(u[0]+=f),u}function kr(n,t,i,r,u,f,e,o,s,h){var a,v,y,p,w,b,c,l;if(h&&i.length===0&&n.length>0){for(a=n.length&&t.length===1,v=0;a&&v<n.length;++v)if(n[v].length>1){a=!1;break}if(a)o[0]=s,l=t[0],r=Math.min(u.nMaxHauteurLigne,s*(l.theight/l.twidth));else for(r>u.nMaxHauteurLigne&&(r=e||bt||r),c=0;c<t.length;++c)l=t[c],o[c]=Math.max(ut,Math.min(s,r*(l.twidth/l.theight)))}for(y=0,c=0;c<t.length;++c)l=t[c],l.vx=0,l.vwidth=Math.min(s,o[c]),l.vheight=r,y+=l.vwidth;if(p=y-s,w=[],(i.length>0||p>0)&&t.length>0&&p!=0)for(w=uu(y,p,t),c=0;c<t.length;++c)b=w[c],l=t[c],l.vwidth-=b;for(c=0;c<t.length;++c)if(l=t[c],l.vwidth<ut)return!1;return!0}function fu(n,t,i,r){for(var f=[],s=undefined,ht=i.length===0?0:i[i.length-1].vheight,tt=0,p=0,it=0,w=0,b=[],h=!1,c,rt,u,nt,e,o,l,ot,st;t.length>0;){h=!1;rt=t.shift();f.push(rt);p=0;it=0;w=0;var a=n-(ui-ut)*f.length,k=a,v=0,y=undefined,d=k,g=[],ft=[];for(e=0;e<f.length;++e)c=f[e],u={cx:c.twidth,cy:c.theight},c.twidth<ut||c.theight<bt?(u.cx=ut,u.cy=bt,k-=ut):(p+=u.cx,w+=u.cx/u.cy),it+=u.cx,ft.push(u);for(nt=!1,e=0;e<f.length;++e){c=f[e];var u=ft[e],et=u.cx/p,ct=u.cx/u.cy;et=ct/w;o=et*k;o<ut&&(o=ut);l=o*(u.cy/u.cx);u.cx===ut&&u.cy===bt&&(o=u.cx,l=u.cy);g.push(o);v=Math.max(v,l);v<bt&&(nt=!0);y=y===undefined?l:Math.min(y,l);d=Math.min(d,o)}if(ot=Math.max(bt,y),h=d<ut||nt||v<bt,st=kr(i,f,t,s,r,h,s,g.slice(),a,!1),!st||h){f.length==1?(s=bt,b[0]=ut):t.unshift(f.pop());h=!0;break}b=g;tt=a;s=ot}return kr(i,f,t,s,r,h,ht,b,tt||a,t.length===0),r.nMaxHauteurLigne=Math.max(r.nMaxHauteurLigne,s),r.nOffsetIndice+=f.length,f}function eu(n,t,i,r,u,f,e){var v=!n.bDejaCree,o;n.bDejaCree=!0;var h=i[0].lastUpdate?i[0].lastUpdate.repetition:undefined,c=ti>0&&e&&!v&&!!h,y=c&&!f,l=ui-ut+(n.vwidth||120),a=pi-bt+(n.vheight||n.theight||120),s={width:l,height:a,top:u.nOffsetTop,left:u.nOffsetLeft};return c&&(o={},o.x=h.left-s.left,o.y=h.top-s.top,o.sx=h.width/s.width,o.sy=h.height/s.height,s.transformOrigin="0 0",s.transform="translate("+o.x+"px, "+o.y+"px) scale("+o.sx+", "+o.sy+")"),r.css({width:n.vwidth,height:n.vheight||n.theight}),clWDUtil.bRWD&&r.css({width:""}),i.css(s),c&&(i[0].onAnimateStep=function(n){var t={x:o.x*(1-n),y:o.y*(1-n),sx:o.sx+(1-o.sx)*n,sy:o.sy+(1-o.sy)*n};this.style.transform="translate("+t.x+"px, "+t.y+"px) scale("+t.sx+", "+t.sy+")"},i[0].onAnimationStart=function(){i.animate({content:1},{duration:ti,step:i[0].onAnimateStep,done:function(){this.onAnimateStep=undefined;ei(t)}})},y&&(i.stop(!0,!0),i[0].onAnimationStart())),u.nOffsetLeft+=l,i[0].lastUpdate={item:$.extend({},n),repetition:$.extend({},s)},ei(t),a}function yr(n,t){function u(t){function o(){cr(r);n.css({backgroundColor:""});requestAnimationFrame(function(){a.hasClass("wbGaleriePleinEcranEnCours")||a.data("wbGalerieRelayoutRequis")&&a.data("wbGalerieRelayoutRequis",!ii())})}var f=this,e=dt.eq(r),u;if(e[0].firstElementChild.wbGalerieChpRefImgFaireOnLoad=t&&e[0].firstElementChild.attributes.getNamedItem("data-original"),!t){if(u=it[r],!u.color)try{requestAnimationFrame(function(){var i=new ColorThief,t=tt?{width:42,height:Math.round(42*(f.height/f.width)),dataurl:"",quality:.92,radius:10}:undefined;try{u.color="rgb("+i.getColor(f,!1,undefined,t).join(",")+")"}catch(o){u.color="rgb(255,255,255)"}tt&&(u.dataurl=t.dataurl);n.css({opacity:1});e[0].firstElementChild.wbGalerieChpRefImgCouleurFondDejaFaite=!0;cr(r)})}catch(s){}a.data("wbGalerieRelayoutRequis",!0);u=it[r];u.twidth=f.naturalWidth||f.width||ut;u.theight=f.naturalHeight||f.height||bt;br?getOrientation(i.src,function(n){if(n>4){var t=u.twidth;u.twidth=u.theight;u.theight=t}o()}):o()}}if(!a.hasClass("wbGalerieChargementVignetteImage")){var i=n.get(0).firstElementChild,f=new Image,r=t;if(i.naturalWidth&&i.naturalHeight){u.apply(i,[]);return}if(!i.src){u.apply(this,[!0]);return}f.onload=u;f.onerror=function(){u.apply(this,[!0])};f.src=i.src}}function ou(){g||(g=!0,$("head").append($("<style>.wbGalerie,.wbGalerie>tbody,.wbGalerie>tbody>tr,.wbGalerie>tbody>tr>td,td#"+(a[0].id||"___")+"{ position:relative;width: 100%;display: block;margin: 0 auto;min-width: 0;}<\/style>")),$("head").append($("<style>.wbGalerieLigne .wbGalerieTd>table, .wbGalerieLigne .wbGalerieTd>table>tbody, .wbGalerieLigne .wbGalerieTd>table>tbody>tr, .wbGalerieLigne .wbGalerieTd>table>tbody>tr>td{display: block; overflow:hidden; clear:none !important; width:100%;height: 100%; position:absolute;will-change:top,left,width,height,transform;}<\/style>")))}function pr(){a[0].wbGalerieLayoutEnCours!==!0&&(a[0].wbGalerieLayoutTimer===undefined||cancelAnimationFrame(a[0].wbGalerieLayoutTimer),lr(!0),a[0].wbGalerieLayoutTimer=requestAnimationFrame(function(){a[0].wbGalerieLayoutEnCours=!0;var n=ri(!1);ii(!1,n===!1,n!==!1,!0);n!==!1&&vi(y.eq(n),!1);a[0].wbGalerieLayoutEnCours=undefined;a[0].wbGalerieLayoutTimer=undefined}))}function wi(){a.children().filter(function(){return!this.style.position||this.style.position==="static"}).length?(a[0].wbGalerieOnModifTimer!==undefined&&(cancelAnimationFrame(a[0].wbGalerieOnModifTimer),a[0].wbGalerieOnModifTimer=undefined),a[0].wbGalerieOnModifTimer=requestAnimationFrame(function(){bi.apply(a[0],[!0])})):ii()}function ri(n,t){function p(){a.hasClass("wbGalerieChargementVignetteImage")||(i[0].canvas&&(i[0].canvas.remove(),i[0].canvas=undefined),i[0].canvasFond&&(i[0].canvasFond.remove(),i[0].canvasFond=undefined))}var i,e,u,c,r,l,y;if(nt||(n=!1),!a.hasClass("wbGaleriePleinEcranEnCours"))return!1;if(i=t||a.find(".wbGaleriePleinEcran").first(),i.removeClass("wbGaleriePleinEcran"),e=i.index(),u=dt.eq(e),u.stop(!0,!0),i.stop(!0,!0),u[0].fRestaureImageVignette&&!a.hasClass("wbGalerieChargementVignetteImage")&&u[0].fRestaureImageVignette(),c=n&&tr?tr(e):undefined,u.css(u[0].oInfoTaillePositionAvantPleinEcran),clWDUtil.bRWD&&u.css({width:""}),i.css(i[0].oInfoTaillePositionAvantPleinEcran),kt.trigger("trigger.wb.galerie.zoom.fin",e),ei(e,!0),n){r={};l=a.offset();r.x=i[0].oInfoTaillePositionApresPleinEcran.left+window.nBordGaucheNavigateur-i[0].oInfoTaillePositionAvantPleinEcran.left-l.left;r.y=i[0].oInfoTaillePositionApresPleinEcran.top+window.nBordHautNavigateur-i[0].oInfoTaillePositionAvantPleinEcran.top-l.top;r.sx=i[0].oInfoTaillePositionApresPleinEcran.width/i[0].oInfoTaillePositionAvantPleinEcran.width;r.sy=i[0].oInfoTaillePositionApresPleinEcran.height/i[0].oInfoTaillePositionAvantPleinEcran.height;i.css({transformOrigin:"0 0",transform:"translate("+r.x+"px, "+r.y+"px) scale("+r.sx+", "+r.sy+")"});
//!UpdateLayoutSuperposableEpingle || UpdateLayoutSuperposableEpingle();
y=i.find("*").not(u.parents().add(u));i.animate({content:1},{duration:f,easing:"linear",step:function(n){var e=v(n,f),c=new clWDUtil.WDBezier(.55,.06,.68,.19).dCalcule(n,f),t=new clWDUtil.WDBezier(.4,0,1,1).dCalcule(n,f),l,u;r.y>0&&(l=t,t=c,c=l);var a=t,p=b?t:c,k=e>=.9?1:e<=.5?0:Math.min(1,(e-.5)/.4);h&&y.css("opacity",k);s||(c=t=a=p=e);u={x:r.x*(1-c),y:r.y*(1-t),sx:r.sx+(1-r.sx)*a,sy:r.sy+(1-r.sy)*p};w&&(u.x=o(r,c).x,u.y=o(r,t).y);this.style.transform="translate("+u.x+"px, "+u.y+"px) scale("+u.sx+", "+u.sy+")";GALERIE_ZOOM_CANVAS_CLONE&&i[0].canvas&&e>=.9&&(this.style.opacity=1-(e-.9)/.1)},start:function(){i.css({zIndex:999})},done:function(){i.css({zIndex:""});c&&c();h&&y.css("opacity","")},always:function(){this.style.opacity=1;p()}})}else p();return a.hasClass("wbGalerieChargementVignetteImage")||a.find(".wbGaleriePleinEcran").first().length||($(window).off("keydown.wb.galerie.zoom.fin trigger.wb.galerie.zoom.navigation"),a.removeClass("wbGaleriePleinEcranEnCours"),a[0].jqCelluleGFI.add(gt).stop(!0,!1).css({pointerEvents:"none"}),n?a[0].jqCelluleGFI.add(gt).fadeOut({duration:f,easing:"easeInOutQuad"}):a[0].jqCelluleGFI.add(gt).hide(),a[0].nIndiceRepetitionZoome=undefined,a.parents(".wbPlanSimple").css("will-change",""),a.data("wbGalerieRelayoutRequis")&&a.data("wbGalerieRelayoutRequis",!ii())),e}function wr(n,t){n[0].oInfoTaillePositionAvantPleinEcran={top:parseFloat(n.css("top")),left:parseFloat(n.css("left")),width:parseFloat(n.css("width")),height:parseFloat(n.css("height"))};t[0].oInfoTaillePositionAvantPleinEcran={width:parseFloat(t.css("width")),height:parseFloat(t.css("height"))}}function vi(t,i,r){var f,e,u,k,rt,c,ht,tt,at;if(i===undefined&&(i=!0),nt||(i=!1),f=t.index(),a[0].nIndiceRepetitionZoome=f,e=it[f],e&&(a.hasClass("wbGaleriePleinEcranEnCours")||!t.queue().length)){if(u=dt.eq(f),k=undefined,(rt=u.parent().attr("data-wbGalerieVignetteGrandeImage"))&&!a.hasClass("wbGalerieChargementVignetteImage"))if(u[0].fRestaureImageVignette)u[0].fAppliqueGrandeImageVignette();else{var vt=u[0].firstElementChild.src,ft=rt,yt=$.extend({},e);function g(n,i){var r=it[f].iwidth||it[f].twidth||ut,e=it[f].iheight||it[f].theight||bt;i||(r=this.naturalWidth||this.width||r,e=this.naturalHeight||this.width||e);u[0].fRestaureImageVignette=function(){i||(u[0].firstElementChild.src=vt,it[f]=yt,it[f].iwidth=r,it[f].iheight=e,cr(f))};u[0].fAppliqueGrandeImageVignette=function(){var n,s,h,o;i||(a.addClass("wbGalerieChargementVignetteImage"),n=t.hasClass("wbGaleriePleinEcran"),n&&(s=$.extend({},t[0].oInfoTaillePositionAvantPleinEcran),h=$.extend({},u[0].oInfoTaillePositionAvantPleinEcran),wr(t,u),t.css({zIndex:991}),o=a.offset(),t[0].oInfoTaillePositionAvantPleinEcran.left+=window.nBordGaucheNavigateur-o.left,t[0].oInfoTaillePositionAvantPleinEcran.top+=window.nBordHautNavigateur-o.top,ri(!1,t)),it[f].twidth=r,it[f].theight=e,u[0].firstElementChild.src=ft,n?vi(t,!0,function(){t[0].oInfoTaillePositionAvantPleinEcran=s;u[0].oInfoTaillePositionAvantPleinEcran=h;t.css({zIndex:""});a.removeClass("wbGalerieChargementVignetteImage")}):a.removeClass("wbGalerieChargementVignetteImage"))};t.queue().length?t.queue(u[0].fAppliqueGrandeImageVignette):u[0].fAppliqueGrandeImageVignette()}c=new Image;c.onload=g;c.onerror=function(){g.apply(this,[undefined,!0])};c.src=ft;c.complete&&c.naturalWidth&&c.naturalHeight&&g.apply(c,[])}if(i&&ir&&ir(),!a.hasClass("wbGaleriePleinEcranEnCours")){iu();i?a[0].jqCelluleGFI.add(gt).css({opacity:0}).fadeTo(n,1,"easeInOutQuad"):a[0].jqCelluleGFI.add(gt).show();gt.css({pointerEvents:""});a.parents(".wbPlanSimple").css("will-change","inherit");$(window).on("keydown.wb.galerie.zoom.fin trigger.wb.galerie.zoom.navigation",function(n){var r=n.originalEvent&&n.originalEvent.repeat,t,i;if(!isNaN(a[0].nIndiceRepetitionZoome)){if(t=!1,n.key=="Escape"||n.key=="Esc")y.stop(!0,!0),t=ri(!0)!==!1;else{if(n.key=="ArrowRight"||n.key=="Right")i=!0;else if(n.key=="ArrowLeft"||n.key=="Left")i=!1;else return;t=fr(i,!0,r)}t&&(n.stopPropagation(),n.preventDefault())}})}f===0?ai.addClass("wbgrise"):ai.removeClass("wbgrise");f===y.length-1?li.addClass("wbgrise"):li.removeClass("wbgrise");var pt=parseFloat(ai.css("width")||0)+parseFloat(ai.css("left")||0)*(5/3)+parseFloat(li.css("width")||0)+parseFloat(li.css("right")||0)*(5/3),wt=window.nLargeurNavigateur-pt,ni=window.nHauteurNavigateur-ot(),p,l,et=Math.max(ut,Math.min(e.twidth,wt-(ui-ut))),st=Math.max(bt,Math.min(e.theight,ni-(pi-bt)));p=et;ht=e.theight/e.twidth*et;l=ht;l>st&&(l=st,p=e.twidth/e.theight*l);var ct=Math.max(ui,p+(ui-ut)),lt=Math.max(pi,l+(pi-bt)),ti=(window.nHauteurNavigateur-lt)/2,ii=(window.nLargeurNavigateur-ct)/2;wr(t,u);try{GALERIE_ZOOM_CANVAS_CLONE||a.append(t[0].canvasFond=$(document.createElement("canvas")).css(t[0].oInfoTaillePositionAvantPleinEcran).css({backgroundColor:e.color||u.css("backgroundColor"),backgroundClip:"content-box",boxSizing:"border-box",paddingTop:u.offset().top-t.offset().top,paddingBottom:t[0].oInfoTaillePositionAvantPleinEcran.height-(u.offset().top-t.offset().top+u[0].oInfoTaillePositionAvantPleinEcran.height),paddingLeft:u.offset().left-t.offset().left,paddingRight:t[0].oInfoTaillePositionAvantPleinEcran.width-(u.offset().left-t.offset().left+u[0].oInfoTaillePositionAvantPleinEcran.width)}).css({filter:"blur("+d+"px)"}));GALERIE_ZOOM_CANVAS&&(GALERIE_ZOOM_CANVAS_CLONE?t[0].canvas||(tt=t.clone(!1,!1),tt.find("img").attr("onload",""),a[0].appendChild(t[0].canvas=tt[0])):html2canvas(t[0],{width:t[0].oInfoTaillePositionAvantPleinEcran.width,height:t[0].oInfoTaillePositionAvantPleinEcran.height,javascriptEnabled:!1}).then(function(i){a[0].appendChild(i);t[0].canvas=$(i).css(t[0].oInfoTaillePositionAvantPleinEcran).css({filter:"blur("+d+"px)"}).css({opacity:0}).animate({opacity:1},{duration:n,done:function(){}})}))}catch(fi){}at=function(){var e,c,y,d;u.css({width:p,height:l});clWDUtil.bRWD&&u.css({width:""});t[0].oInfoTaillePositionApresPleinEcran={top:ti,left:ii,width:ct,height:lt};t.css(t[0].oInfoTaillePositionApresPleinEcran);kt.trigger("trigger.wb.galerie.zoom.debut",f);ei(f,!0);i&&(e={},c=a.offset(),e.x=c.left+t[0].oInfoTaillePositionAvantPleinEcran.left-window.nBordGaucheNavigateur-t[0].oInfoTaillePositionApresPleinEcran.left,e.y=c.top+t[0].oInfoTaillePositionAvantPleinEcran.top-window.nBordHautNavigateur-t[0].oInfoTaillePositionApresPleinEcran.top,e.sx=t[0].oInfoTaillePositionAvantPleinEcran.width/t[0].oInfoTaillePositionApresPleinEcran.width,e.sy=t[0].oInfoTaillePositionAvantPleinEcran.height/t[0].oInfoTaillePositionApresPleinEcran.height,t.css({transformOrigin:"0 0",transform:"translate("+e.x+"px, "+e.y+"px) scale("+e.sx+", "+e.sy+")"}),y=GALERIE_ZOOM_CANVAS_CLONE?t:t.find("*").not(u.parents().add(u)),d=h&&!a.hasClass("wbGalerieChargementVignetteImage"),t.animate({content:1},{duration:n,easing:"linear",step:function(t){var f=v(t,n),i=new clWDUtil.WDBezier(.55,.06,.68,.19).dCalcule(t,n),u=new clWDUtil.WDBezier(.4,0,1,1).dCalcule(t,n),h,r;e.y<0&&(h=i,i=u,u=h);var c=i,l=b?i:u,a=f<=.2?0:Math.min(1,(f-.2)/.4);d&&y.css("opacity",a);s||(u=i=c=l=f);r={x:e.x*(1-u),y:e.y*(1-i),sx:e.sx+(1-e.sx)*c,sy:e.sy+(1-e.sy)*l};w&&(r.x=o(e,u).x,r.y=o(e,i).y);this.style.transform="translate("+r.x+"px, "+r.y+"px) scale("+r.sx+", "+r.sy+")"},done:function(){d&&y.css("opacity","");k&&k()},always:r}));t.addClass("wbGaleriePleinEcran");a.addClass("wbGaleriePleinEcranEnCours")};at()}}var ii,bi;if(!this.bGalerieDejaInit){this.bGalerieDejaInit=!0;var a=$(this).addClass("wbGalerieTd"),kt=a.closest(".wbGalerie"),ki=kt.parent(),er=at;er&&kt.hasClass("wbGalerieColonneSansHauteurRepartie")&&(er=!1);bTouch||a.addClass("wbGalerieFondFlou");var y,hi,or,it,dt,di,gi,rt,sr,nr,ci,yi=undefined,oi=undefined,ui,pi,tr,ir,ut,bt,wt=undefined,gt=$(),li=$(),ai=$(),hr=$(),fi=undefined,dr=undefined,ni=1,gr=0,nu=0,tu,br,si=[],ti=et;ii=function(n,t,i,r){var o,s,f,u,h,b,c,w,g;for(t===undefined&&(t=!0),o=0,s=!1,f=0;f<it.length;++f){var e=it[f],l=dt.eq(f),k=l.get(0);if(!k){++o;continue}if(u=k.firstElementChild,e.src!=u.src||e.twidth===undefined||e.theight===undefined?(e.twidth=ut,e.theight=bt,e.src=u.src,u.wbGalerieChpRefImgFaireOnLoad=!0):u.wbGalerieChpRefImgCouleurFondDejaFaite||(u.wbGalerieChpRefImgCouleurFondDejaFaite=!0,u.wbGalerieChpRefImgFaireOnLoad=!0,l.css({opacity:1,backgroundColor:e.color,backgroundImage:e.dataurl?"url('"+e.dataurl+"')":undefined,backgroundSize:"cover"}),kt.hasClass("wbGaleriePleinPinch")&&y.eq(f).find("td").first().css({transformStyle:"preserve-3d",transform:"translateZ("+(f+1)+"px)"})),h=!1,u.wbGalerieChpRefImgFaireOnLoad)if(h=!0,u.wbGalerieChpRefImgDejaOnLoadBind)u.complete&&u.src&&(h=!1,yr(l,f));else{u.wbGalerieChpRefImgDejaOnLoadBind=!0;u.wbGalerieIndiceChpRef=f;$(u).on("load error",function(){yr($(this.parentNode),this.wbGalerieIndiceChpRef)});u.complete&&(u.src?yr(l,f):u.attributes.getNamedItem("data-original")&&(h=!1))}h&&(s=!0);s||++o}if(window.nLargeurPage=window.nLargeurPage||$(document.body).width(),window.nLargeurNavigateur=window.nLargeurNavigateur||$(window).width(),o==0||this.nNbImagesDejaChargeesDansDernierLayout&&this.nNbImagesDejaChargeesDansDernierLayout===o&&this.nLargeurPageDernierCalcul&&this.nLargeurPageDernierCalcul==window.nLargeurPage&&this.nLargeurNavigateurDernierCalcul&&this.nLargeurNavigateurDernierCalcul==window.nLargeurNavigateur&&!n)return!1;if(this.nLargeurPageDernierCalcul=window.nLargeurPage,this.nLargeurNavigateurDernierCalcul=window.nLargeurNavigateur,this.nNbImagesDejaChargeesDansDernierLayout=o,ou(),di){b=it.slice();si=[];for(var nt={nMaxHauteurLigne:0,nOffsetIndice:0};b.length>0;)si.push(fu(lr(),b,si,nt));var v={nOffsetLeft:0,nOffsetTop:0},p=0,d=0;for(c=0;c<si.length;++c){for(v.nOffsetLeft=0,w=0;w<si[c].length;++w)g=si[c][w],d=eu(g,p,y.eq(p),dt.eq(p),v,n,t),++p;v.nOffsetTop+=d}if(si.length===0)return!1;a.add(kt).css({height:v.nOffsetTop})}else ru(t,i,r);return s||kt.addClass("wbGalerieComplete"),a.trigger("trigger.wb.galerie.layout.fin",s),s};ii=ii.bind(this);bi=function(n){y=a.children();it=[];hi=[];or=[];y.each(function(n){var f,t,i,r,u,e;it[n]={};f=$(this);t=f.find(".wbGalerieChpRef");t.hasClass("wbHnImg")||(t=t.parent());clWDUtil.oGetImageInformations&&(i=clWDUtil.oGetImageInformations(),r=t.attr("data-wbImgInfoCache"),r&&i[r]&&(it[n]=$.extend({},i[r]),it[n].src=t.get(0).firstElementChild.src,u=t.attr("data-wbImgInfoCacheGrandeImage"),u&&i[u]&&(it[n].idHD=u,e=$.extend({},i[u]),it[n].iwidth=e.twidth,it[n].iheight=e.theight)),it[n].id=r);or.push(t.get(0));window.UpdateLayoutSuperposableEpingle&&hi.push(f.find(".ancragesuph, .ancragesupl, .ancragesuprwd"))});dt=$(or);y.add(dt).add(a).css({height:"",width:""});vr();rr();ii(undefined,undefined,undefined,n);kt.hasClass("wbGaleriePleinEcranClicFond")&&(y.each(function(n){var t=y.eq(n),r,i;if(!t[0].bInitPleinEcranClicFondDejaFait){if(t[0].bInitPleinEcranClicFondDejaFait=!0,r=dt.eq(n),st&&(t.addClass("wbGalerieEffetRipple"),!bIEAvec11&&!bEdge))t.addClass("wbGalerieEffetRippleCssVars").on((bTouch?"touchstart.wb.galerie.zoom pointerdown":"mousedown")+".wb.galerie.zoom",function(n){var r=n.pageX-t.offset().left,u=n.pageY-t.offset().top,i=Math.max(t.width(),t.height())/2;t.attr("style",$(this).attr("style")+" "+JSON.stringify({"--wb-galerie-ripple-padding":i+"px","--wb-galerie-ripple-left":r-i+"px","--wb-galerie-ripple-top":u-i+"px"}).substr(1).replace("}",";").replace(/"/g,"").replace(/,/g,";"))});i=function(n){var f,u,i,r;if(n.type==="touchstart"){t[0].dLastDate=new Date;t[0].nBordHautNavigateurLorsDuTouchStart=window.nBordHautNavigateur;return}if(n.type==="touchend"&&(f=t[0].nBordHautNavigateurLorsDuTouchStart===window.nBordHautNavigateur&&new Date-t[0].dLastDate<300,!f))return!1;for(u=!0,i=n.target;i;){if(i==t[0])break;if(r=i.tagName.toLowerCase(),i.onclick&&!1===clWDUtil.bAvecClasse(i,"wbGalerieChpRef")||i.getAttribute("href")||r=="a"||r=="label"||r=="input"||r=="textarea"||r=="select"||r=="button")if(i.wbGalerieClicVignetteEnCours){i.wbGalerieClicVignetteEnCours=undefined;break}else{u=!1;break}i=i.parentNode}return u};t.on((bTouch?"pointerdown":"mousedown")+".wb.galerie.zoom",function(n){a.hasClass("wbGaleriePleinEcranEnCours")||i(n)&&(y.removeClass("wbActif").removeClass("wbGalerieActif"),t.addClass("wbActif").addClass("wbGalerieActif"))}).on((bTouch?"touchstart.wb.galerie.zoom touchend":"click")+".wb.galerie.zoom",function(n){if(!a.hasClass("wbGaleriePleinEcranEnCours")){var r=i(n);r!==undefined&&t.removeClass("wbActif").removeClass("wbGalerieActif");r===!0&&(p>0?setTimeout(function(){vi(t,!0)},p):vi(t,!0))}})}}),y.each(function(n){var t=y.eq(n);t[0].bInitSwipeDejaFait||(t[0].bInitSwipeDejaFait=!0,t[0].swipeLastDirection=undefined,t.swipe({fingers:1,triggerOnTouchEnd:!0,preventDefaultEvents:!1,excludedElements:"label, button, input, select, textarea, .noSwipe",swipeStatus:function(n,i,r,u,f){var o,s,e,h;if(n.touches&&t.hasClass("wbGaleriePleinEcran")&&(n.stopPropagation(),n.preventDefault(),!(u<5))&&(!t[0].swipeLastDirection||t[0].swipeLastDirection==r)){if(o=r=="left"||r=="right",i=="move"&&n.touches.length&&(s=n.touches[0].clientX,(s<32||s+32>window.nLargeurNavigateur)&&(i="end")),!t[0].swipeLastDirection){if(!r||!(i=="start"||i=="move"))return;if(o){if(!1===fr(r=="left",!1))return;t[0].oAnimationZoomAvanceRecule.start.apply(t[0],[])}t[0].swipeLastDirection=r}if(e=Math.max(0,Math.min(1,Math.abs(u/(t[0].nLargeurAParcourirZoomAvanceRecule||window.nHauteurNavigateur/2)))),!o||t[0].oAnimationZoomAvanceRecule){if(i=="move"){o?t[0].oAnimationZoomAvanceRecule.step.apply(t[0],[e]):(t.css({transform:"translateY("+u*(r=="up"?-1:1)+"px)"}),a[0].jqCelluleGFI.css({opacity:Math.max(0,1-e)}));n.stopPropagation();n.preventDefault();return}i=e>.25?"end":"cancel";(i=="end"||i=="cancel")&&(o?t.animate({content:1},$.extend({},t[0].oAnimationZoomAvanceRecule,{start:function(){},duration:t[0].oAnimationZoomAvanceRecule.duration>f?t[0].oAnimationZoomAvanceRecule.duration-f:t[0].oAnimationZoomAvanceRecule.duration,step:function(n){this.oAnimationZoomAvanceRecule.step.apply(this,[(1-e)*n+e])}})):(h=parseFloat(t[0].style.top)+u*(r=="up"?-1:1),t.css({top:h,transform:""}),t[0].oInfoTaillePositionApresPleinEcran&&(t[0].oInfoTaillePositionApresPleinEcran.top=h),ri(!0)));t[0].swipeLastDirection=undefined;n.stopPropagation();n.preventDefault()}}},allowPageScroll:"none",threshold:0,swipe:function(){}}))}))};bi=bi.bind(this);bi();$(window).on("trigger.wb.rwd.media.reinit",wi);window.NSPCS&&(NSPCS.NSUtil.ms_oNotificationsAjoutHTML.AddNotification(wi),NSPCS.NSUtil.ms_oNotificationsFinAJAX.AddNotification(wi),NSPCS.NSUtil.ms_oNotificationsChangementTranche.AddNotification(function(n,t){var i=!0;(a[0].nIndiceTrancheDernierAffichage===undefined&&t===1&&(i=!1),a[0].nIndiceTrancheDernierAffichage=t,i)&&(vr(),pr())}));window.clWDUtil!==undefined&&(clWDUtil.m_oNotificationsAjoutHTML&&clWDUtil.m_oNotificationsAjoutHTML.AddNotification(wi),clWDUtil.m_oNotificationsFinAJAX&&clWDUtil.m_oNotificationsFinAJAX.AddNotification(wi));$(window).resize(pr);kt.hasClass("wbGaleriePleinPinch")&&a.swipe({pinchStatus:function(n,t,i,r,u,f,e){function tt(n){var t=parseFloat(n);return t>1?1-(t-1)*d:1-(1-t)*d}function g(n){fi=y.eq(0).height();fi<yt&&(s=!0);w>1&&si[0].length==1&&(o=!0);s||o?y.each(function(){this.onAnimateStep&&this.onAnimateStep.apply(this,[1])}).css({transform:""}):(ni=n?ni*k:ni/k,ni<c||ni>l?(ni<c&&(s=!0),ni>l&&(o=!0),ni=Math.max(c,Math.min(l,ni))):(vr(),ii(!0)),p=e);v+=b}var d,b,h,it,nt;if(di&&f==2&&i&&(n.stopPropagation(),n.preventDefault(),t=="end"||t=="cancel"||!(Math.abs(1-e)<=.02))){a[0].rafPinch&&(cancelAnimationFrame(a[0].rafPinch),a[0].rafPinch=undefined);d=.25;var o=a[0].lastPinchStatus&&a[0].lastPinchStatus.bAuDelaDuZoomMax,s=a[0].lastPinchStatus&&a[0].lastPinchStatus.bEnDecaDuZoomMin,v=a[0].lastPinchStatus?a[0].lastPinchStatus.dDistanceOffset:0,p=a[0].lastPinchStatus?a[0].lastPinchStatus.dPinchZoomOffset:1,w=parseFloat(e)/p;if(w<1&&(i="out"),b=parseFloat(r)-v,t=="cancel"&&Math.abs(r/fi)>.25&&(t="end"),t=="cancel"||t=="end"){if(!a[0].lastPinchStatus)return;o||s?(h=tt(a[0].lastPinchStatus.pinchZoom/p),a.animate({content:1},{duration:ti||150,step:function(n){$(this).css({transform:"scale("+(h+(h<1?1-h:h-1)*n)+")"})},done:function(){$(this).css({transform:"",transformOrigin:""})}})):(t=="cancel"?(it=fi,g(i!="in"),fi=it):fi=y.eq(0).height(),nt=Math.min(1,(parseFloat(a[0].lastPinchStatus.pinchDistance)-v)/fi),y.each(function(){$(this).animate({content:1},{duration:ti||150,done:function(){},step:function(n){if(this.onAnimateStep){var t=n*(1-nt)+nt;this.onAnimateStep.apply(this,[t])}}})}));a[0].lastPinchStatus=undefined;return}(!a[0].lastPinchStatus||b>fi||a[0].lastPinchStatus.pinchDirection!=i)&&(g(i=="in"),a[0].lastPinchStatus&&a[0].lastPinchStatus.pinchDirection!=i&&g(i=="in"));a[0].rafPinch=s||o?requestAnimationFrame(function(){a.css({transform:"scale("+tt(w)+")",transformOrigin:"top center"})}):requestAnimationFrame(function(){y.each(function(){this.onAnimateStep&&this.onAnimateStep.apply(this,[Math.min(1,b/fi)])})});a[0].lastPinchStatus={pinchDirection:i,pinchDistance:r,pinchZoom:w,bEnDecaDuZoomMin:s,bAuDelaDuZoomMax:o,dDistanceOffset:v,dPinchZoomOffset:p}}},excludedElements:"label, button, input, select, textarea, .noSwipe"});a.on("trigger.wb.galerie.zoom.ouvre",function(n,t){var i=y.eq(t-1);i.length&&(ri(!1),vi(i,!0))}).on("trigger.wb.galerie.zoom.ferme",function(){ri(!0)})}}var a=$(".wbGalerie>tbody>tr>td"),it,rt,u,e;if(a.length){it=function(n){return--n*n*n*n*n+1};rt=function(n){return(n*=2)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)};var n=250,p=0,f=250,ft=250,w=!1,s=!1,h=!0,b=!0&&s,k=1.3,et=150,c=.3,l=3,ot=function(){return Math.min(150,.15*window.nHauteurNavigateur)},d=0,st=!1,g=!1,nt=!0,ht=!0,ct=!0,lt=!1,at=!1,vt=5,yt=48,pt=3e3,tt=!1,t=0,i=1,r=2;$(document.body).css({overflowY:"scroll"});u={};a.each(function(){wt.apply(this,[])})}});mul_table=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259];shg_table=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];
/*!
 * Color Thief v2.0
 * by Lokesh Dhakar - http://www.lokeshdhakar.com
 *
 * Thanks
 * ------
 * Nick Rabinowitz - For creating quantize.js.
 * John Schulz - For clean up and optimization. @JFSIII
 * Nathan Spady - For adding drag and drop support to the demo page.
 *
 * License
 * -------
 * Copyright 2011, 2015 Lokesh Dhakar
 * Released under the MIT license
 * https://raw.githubusercontent.com/lokesh/color-thief/master/LICENSE
 *
 */
CanvasImage=function(n,t){this.canvas=document.createElement("canvas");this.context=this.canvas.getContext("2d");!0==(this.bCanvasDansDOM=t)&&document.body.appendChild(this.canvas);this.width=this.canvas.width=n.width;this.height=this.canvas.height=n.height;this.context.drawImage(n,0,0,this.width,this.height)};CanvasImage.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)};CanvasImage.prototype.update=function(n){this.context.putImageData(n,0,0)};CanvasImage.prototype.getPixelCount=function(){return this.width*this.height};CanvasImage.prototype.getImageData=function(){return this.context.getImageData(0,0,this.width,this.height)};CanvasImage.prototype.removeCanvas=function(){this.bCanvasDansDOM&&this.canvas.parentNode.removeChild(this.canvas)};ColorThief=function(){};ColorThief.prototype.getColor=function(n,t,i,r){var u=this.getPalette(n,t,5,i,r);return u[0]};ColorThief.prototype.getPalette=function(n,t,i,r,u){var e,o,h,c,l,y,a,p;typeof i=="undefined"&&(i=10);(typeof r=="undefined"||r<1)&&(r=10);var f=new CanvasImage(n,t),w=f.getImageData(),s=w.data,b=f.getPixelCount(),v=[];for(e=0;e<b;e=e+r)o=e*4,h=s[o+0],c=s[o+1],l=s[o+2],y=s[o+3],y>=125&&(h>250&&c>250&&l>250||v.push([h,c,l]));return a=MMCQ.quantize(v,i),p=a?a.palette():null,u&&(f.canvas.width=u.width,f.canvas.height=u.height,f.context.drawImage(n,0,0,u.width,u.height),u.radius&&processCanvasRGB(f.canvas,0,0,u.width,u.height,u.radius||90),u.dataurl=f.canvas.toDataURL("image/jpeg",u.quality||1)),f.removeCanvas(),p};
/*!
 * quantize.js Copyright 2008 Nick Rabinowitz.
 * Licensed under the MIT license: http://www.opensource.org/licenses/mit-license.php
 */
/*!
 * Block below copied from Protovis: http://mbostock.github.com/protovis/
 * Copyright 2010 Stanford Visualization Group
 * Licensed under the BSD License: http://www.opensource.org/licenses/bsd-license.php
 */
pv||(pv={map:function(n,t){var i={};return t?n.map(function(n,r){return i.index=r,t.call(i,n)}):n.slice()},naturalOrder:function(n,t){return n<t?-1:n>t?1:0},sum:function(n,t){var i={};return n.reduce(t?function(n,r,u){return i.index=u,n+t.call(i,r)}:function(n,t){return n+t},0)},max:function(n,t){return Math.max.apply(null,t?pv.map(n,t):n)}});MMCQ=function(){function i(n,i,r){return(n<<2*t)+(i<<t)+r}function r(n){function r(){t.sort(n);i=!0}var t=[],i=!1;return{push:function(n){t.push(n);i=!1},peek:function(n){return i||r(),n===undefined&&(n=t.length-1),t[n]},pop:function(){return i||r(),t.pop()},size:function(){return t.length},map:function(n){return t.map(n)},debug:function(){return i||r(),t}}}function u(n,t,i,r,u,f,e){var o=this;o.r1=n;o.r2=t;o.g1=i;o.g2=r;o.b1=u;o.b2=f;o.histo=e}function e(){this.vboxes=new r(function(n,t){return pv.naturalOrder(n.vbox.count()*n.vbox.volume(),t.vbox.count()*t.vbox.volume())})}function s(r){var h=1<<3*t,u=new Array(h),f,e,o,s;return r.forEach(function(t){e=t[0]>>n;o=t[1]>>n;s=t[2]>>n;f=i(e,o,s);u[f]=(u[f]||0)+1}),u}function h(t,i){var o=1e6,s=0,h=1e6,c=0,l=1e6,a=0,r,f,e;return t.forEach(function(t){r=t[0]>>n;f=t[1]>>n;e=t[2]>>n;r<o?o=r:r>s&&(s=r);f<h?h=f:f>c&&(c=f);e<l?l=e:e>a&&(a=e)}),new u(o,s,h,c,l,a,i)}function c(n,t){function y(n){var f=n+"1",u=n+"2",h,c,e,l,i,a=0;for(r=t[f];r<=t[u];r++)if(s[r]>o/2){for(e=t.copy(),l=t.copy(),h=r-t[f],c=t[u]-r,i=h<=c?Math.min(t[u]-1,~~(r+c/2)):Math.max(t[f],~~(r-1-h/2));!s[i];)i++;for(a=v[i];!a&&s[i-1];)a=v[--i];return e[u]=i,l[f]=e[u]+1,[e,l]}}if(t.count()){var l=t.r2-t.r1+1,a=t.g2-t.g1+1,p=t.b2-t.b1+1,c=pv.max([l,a,p]);if(t.count()==1)return[t.copy()];var o=0,s=[],v=[],r,u,f,e,h;if(c==l)for(r=t.r1;r<=t.r2;r++){for(e=0,u=t.g1;u<=t.g2;u++)for(f=t.b1;f<=t.b2;f++)h=i(r,u,f),e+=n[h]||0;o+=e;s[r]=o}else if(c==a)for(r=t.g1;r<=t.g2;r++){for(e=0,u=t.r1;u<=t.r2;u++)for(f=t.b1;f<=t.b2;f++)h=i(u,r,f),e+=n[h]||0;o+=e;s[r]=o}else for(r=t.b1;r<=t.b2;r++){for(e=0,u=t.r1;u<=t.r2;u++)for(f=t.g1;f<=t.g2;f++)h=i(u,f,r),e+=n[h]||0;o+=e;s[r]=o}return s.forEach(function(n,t){v[t]=o-n}),c==l?y("r"):c==a?y("g"):y("b")}}function l(n,i){function w(n,t){for(var u=1,r=0,i;r<f;){if(i=n.pop(),!i.count()){n.push(i);r++;continue}var e=c(a,i),o=e[0],s=e[1];if(!o)return;if(n.push(o),s&&(n.push(s),u++),u>=t)return;if(r++>f)return}}var p,l,u,v;if(!n.length||i<2||i>256)return!1;var a=s(n),b=1<<3*t,y=0;for(a.forEach(function(){y++}),y<=i,p=h(n,a),l=new r(function(n,t){return pv.naturalOrder(n.count(),t.count())}),l.push(p),w(l,o*i),u=new r(function(n,t){return pv.naturalOrder(n.count()*n.volume(),t.count()*t.volume())});l.size();)u.push(l.pop());for(w(u,i-u.size()),v=new e;u.size();)v.push(u.pop());return v}var t=5,n=8-t,f=1e3,o=.75;return u.prototype={volume:function(n){var t=this;return(!t._volume||n)&&(t._volume=(t.r2-t.r1+1)*(t.g2-t.g1+1)*(t.b2-t.b1+1)),t._volume},count:function(n){var t=this,o=t.histo,e,r,u,f;if(!t._count_set||n){for(e=0,r=t.r1;r<=t.r2;r++)for(u=t.g1;u<=t.g2;u++)for(f=t.b1;f<=t.b2;f++)index=i(r,u,f),e+=o[index]||0;t._count=e;t._count_set=!0}return t._count},copy:function(){var n=this;return new u(n.r1,n.r2,n.g1,n.g2,n.b1,n.b2,n.histo)},avg:function(n){var r=this,y=r.histo;if(!r._avg||n){for(var f=0,u=1<<8-t,c=0,l=0,a=0,e,s,h,v,o=r.r1;o<=r.r2;o++)for(s=r.g1;s<=r.g2;s++)for(h=r.b1;h<=r.b2;h++)v=i(o,s,h),e=y[v]||0,f+=e,c+=e*(o+.5)*u,l+=e*(s+.5)*u,a+=e*(h+.5)*u;r._avg=f?[~~(c/f),~~(l/f),~~(a/f)]:[~~(u*(r.r1+r.r2+1)/2),~~(u*(r.g1+r.g2+1)/2),~~(u*(r.b1+r.b2+1)/2)]}return r._avg},contains:function(t){var i=this,r=t[0]>>n;return gval=t[1]>>n,bval=t[2]>>n,r>=i.r1&&r<=i.r2&&gval>=i.g1&&gval<=i.g2&&bval>=i.b1&&bval<=i.b2}},e.prototype={push:function(n){this.vboxes.push({vbox:n,color:n.avg()})},palette:function(){return this.vboxes.map(function(n){return n.color})},size:function(){return this.vboxes.size()},map:function(n){for(var i=this.vboxes,t=0;t<i.size();t++)if(i.peek(t).vbox.contains(n))return i.peek(t).color;return this.nearest(n)},nearest:function(n){for(var i=this.vboxes,r,u,f,t=0;t<i.size();t++)u=Math.sqrt(Math.pow(n[0]-i.peek(t).color[0],2)+Math.pow(n[1]-i.peek(t).color[1],2)+Math.pow(n[2]-i.peek(t).color[2],2)),(u<r||r===undefined)&&(r=u,f=i.peek(t).color);return f},forcebw:function(){var n=this.vboxes,t,r,i;n.sort(function(n,t){return pv.naturalOrder(pv.sum(n.color),pv.sum(t.color))});t=n[0].color;t[0]<5&&t[1]<5&&t[2]<5&&(n[0].color=[0,0,0]);r=n.length-1;i=n[r].color;i[0]>251&&i[1]>251&&i[2]>251&&(n[r].color=[255,255,255])}},{quantize:l}}();bIEQuirks||!GALERIE_ZOOM_CANVAS||GALERIE_ZOOM_CANVAS_CLONE||!function(n){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self);t.html2canvas=n()}}(function(){var n;return function t(n,i,r){function u(f,o){var h,c,s;if(!i[f]){if(!n[f]){if(h=typeof require=="function"&&require,!o&&h)return h(f,!0);if(e)return e(f,!0);c=new Error("Cannot find module '"+f+"'");throw c.code="MODULE_NOT_FOUND",c;}s=i[f]={exports:{}};n[f][0].call(s.exports,function(t){var i=n[f][1][t];return u(i?i:t)},s,s.exports,t,n,i,r)}return i[f].exports}for(var e=typeof require=="function"&&require,f=0;f<r.length;f++)u(r[f]);return u}({1:[function(t,i,r){(function(t){
/*! http://mths.be/punycode v1.2.4 by @mathias */
(function(u){function s(n){throw RangeError(vt[n]);}function nt(n,t){for(var i=n.length;i--;)n[i]=t(n[i]);return n}function tt(n,t){return nt(n.split(at),t).join(".")}function it(n){for(var r=[],i=0,f=n.length,t,u;i<f;)t=n.charCodeAt(i++),t>=55296&&t<=56319&&i<f?(u=n.charCodeAt(i++),(u&64512)==56320?r.push(((t&1023)<<10)+(u&1023)+65536):(r.push(t),i--)):r.push(t);return r}function rt(n){return nt(n,function(n){var t="";return n>65535&&(n-=65536,t+=a(n>>>10&1023|55296),n=56320|n&1023),t+a(n)}).join("")}function yt(n){return n-48<10?n-22:n-65<26?n-65:n-97<26?n-97:f}function ut(n,t){return n+22+75*(n<26)-((t!=0)<<5)}function ft(n,t,i){var r=0;for(n=i?e(n/ht):n>>1,n+=e(n/t);n>w*l>>1;r+=f)n=e(n/w);return e(r+(w+1)*n/(n+st))}function et(n){var v=[],ut=n.length,r,t=0,b=d,y=k,i,u,w,nt,o,c,a,tt,it;for(i=n.lastIndexOf(g),i<0&&(i=0),u=0;u<i;++u)n.charCodeAt(u)>=128&&s("not-basic"),v.push(n.charCodeAt(u));for(w=i>0?i+1:0;w<ut;){for(nt=t,o=1,c=f;;c+=f){if(w>=ut&&s("invalid-input"),a=yt(n.charCodeAt(w++)),(a>=f||a>e((h-t)/o))&&s("overflow"),t+=a*o,tt=c<=y?p:c>=y+l?l:c-y,a<tt)break;it=f-tt;o>e(h/it)&&s("overflow");o*=it}r=v.length+1;y=ft(t-nt,r,nt==0);e(t/r)>h-b&&s("overflow");b+=e(t/r);t%=r;v.splice(t++,0,b)}return rt(v)}function ot(n){var r,u,v,et,y,t,o,w,b,nt,i,c=[],tt,rt,ot,st;for(n=it(n),tt=n.length,r=d,u=0,y=k,t=0;t<tt;++t)i=n[t],i<128&&c.push(a(i));for(v=et=c.length,et&&c.push(g);v<tt;){for(o=h,t=0;t<tt;++t)i=n[t],i>=r&&i<o&&(o=i);for(rt=v+1,o-r>e((h-u)/rt)&&s("overflow"),u+=(o-r)*rt,r=o,t=0;t<tt;++t)if(i=n[t],i<r&&++u>h&&s("overflow"),i==r){for(w=u,b=f;;b+=f){if(nt=b<=y?p:b>=y+l?l:b-y,w<nt)break;st=w-nt;ot=f-nt;c.push(a(ut(nt+st%ot,0)));w=e(st/ot)}c.push(a(ut(w,0)));y=ft(u,rt,v==et);u=0;++v}++u;++r}return c.join("")}function pt(n){return tt(n,function(n){return ct.test(n)?et(n.slice(4).toLowerCase()):n})}function wt(n){return tt(n,function(n){return lt.test(n)?"xn--"+ot(n):n})}var v=typeof r=="object"&&r,b=typeof i=="object"&&i&&i.exports==v&&i,c=typeof t=="object"&&t;(c.global===c||c.window===c)&&(u=c);var o,h=2147483647,f=36,p=1,l=26,st=38,ht=700,k=72,d=128,g="-",ct=/^xn--/,lt=/[^ -~]/,at=/\x2E|\u3002|\uFF0E|\uFF61/g,vt={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},w=f-p,e=Math.floor,a=String.fromCharCode,y;if(o={version:"1.2.4",ucs2:{decode:it,encode:rt},decode:et,encode:ot,toASCII:wt,toUnicode:pt},typeof n=="function"&&typeof n.amd=="object"&&n.amd)n("punycode",function(){return o});else if(v&&!v.nodeType)if(b)b.exports=o;else for(y in o)o.hasOwnProperty(y)&&(v[y]=o[y]);else u.punycode=o})(this)}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],2:[function(n,t){function f(n,t,i){n.defaultView&&(t!==n.defaultView.pageXOffset||i!==n.defaultView.pageYOffset)&&n.defaultView.scrollTo(t,i)}function e(n,t){try{t&&(t.width=n.width,t.height=n.height,t.getContext("2d").putImageData(n.getContext("2d").getImageData(0,0,n.width,n.height),0,0))}catch(i){u("Unable to copy canvas content from",n,i)}}function i(n,t){for(var r=n.nodeType===3?document.createTextNode(n.nodeValue):n.cloneNode(!1),u=n.firstChild;u;)(t===!0||u.nodeType!==1||u.nodeName!=="SCRIPT")&&r.appendChild(i(u,t)),u=u.nextSibling;return n.nodeType===1&&(r._scrollTop=n.scrollTop,r._scrollLeft=n.scrollLeft,n.nodeName==="CANVAS"?e(n,r):(n.nodeName==="TEXTAREA"||n.nodeName==="SELECT")&&(r.value=n.value)),r}function r(n){if(n.nodeType===1){n.scrollTop=n._scrollTop;n.scrollLeft=n._scrollLeft;for(var t=n.firstChild;t;)r(t),t=t.nextSibling}}var u=n("./log");t.exports=function(n,t,u,e,o,s,h){var l=i(n.documentElement,o.javascriptEnabled),c;return o.javascriptEnabled||$(l).find("input,textarea,select,a,button,iframe").removeAttr("onfocus").removeAttr("onblur").removeAttr("onload"),c=t.createElement("iframe"),c.className="html2canvas-container",c.style.visibility="hidden",c.style.position="fixed",c.style.left="-10000px",c.style.top="0px",c.style.border="0",c.width=u,c.height=e,c.scrolling="no",t.body.appendChild(c),new Promise(function(t){var i=c.contentWindow.document;c.contentWindow.onload=c.onload=function(){var n=setInterval(function(){i.body.childNodes.length>0&&(r(i.documentElement),clearInterval(n),o.type==="view"&&(c.contentWindow.scrollTo(s,h),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(c.contentWindow.scrollY!==h||c.contentWindow.scrollX!==s)&&(i.documentElement.style.top=-h+"px",i.documentElement.style.left=-s+"px",i.documentElement.style.position="absolute")),t(c))},50)};i.open();i.write("<!DOCTYPE html><html><\/html>");f(n,s,h);i.replaceChild(i.adoptNode(l),i.documentElement);i.close()})}},{"./log":13}],3:[function(n,t){function i(n){this.r=0;this.g=0;this.b=0;this.a=null;var t=this.fromArray(n)||this.namedColor(n)||this.rgb(n)||this.rgba(n)||this.hex6(n)||this.hex3(n)}var r,u,f,e,o;i.prototype.darken=function(n){var t=1-n;return new i([Math.round(this.r*t),Math.round(this.g*t),Math.round(this.b*t),this.a])};i.prototype.isTransparent=function(){return this.a===0};i.prototype.isBlack=function(){return this.r===0&&this.g===0&&this.b===0};i.prototype.fromArray=function(n){return Array.isArray(n)&&(this.r=Math.min(n[0],255),this.g=Math.min(n[1],255),this.b=Math.min(n[2],255),n.length>3&&(this.a=n[3])),Array.isArray(n)};r=/^#([a-f0-9]{3})$/i;i.prototype.hex3=function(n){var t=null;return(t=n.match(r))!==null&&(this.r=parseInt(t[1][0]+t[1][0],16),this.g=parseInt(t[1][1]+t[1][1],16),this.b=parseInt(t[1][2]+t[1][2],16)),t!==null};u=/^#([a-f0-9]{6})$/i;i.prototype.hex6=function(n){var t=null;return(t=n.match(u))!==null&&(this.r=parseInt(t[1].substring(0,2),16),this.g=parseInt(t[1].substring(2,4),16),this.b=parseInt(t[1].substring(4,6),16)),t!==null};f=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/;i.prototype.rgb=function(n){var t=null;return(t=n.match(f))!==null&&(this.r=Number(t[1]),this.g=Number(t[2]),this.b=Number(t[3])),t!==null};e=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d?\.?\d+)\s*\)$/;i.prototype.rgba=function(n){var t=null;return(t=n.match(e))!==null&&(this.r=Number(t[1]),this.g=Number(t[2]),this.b=Number(t[3]),this.a=Number(t[4])),t!==null};i.prototype.toString=function(){return this.a!==null&&this.a!==1?"rgba("+[this.r,this.g,this.b,this.a].join(",")+")":"rgb("+[this.r,this.g,this.b].join(",")+")"};i.prototype.namedColor=function(n){n=n.toLowerCase();var t=o[n];if(t)this.r=t[0],this.g=t[1],this.b=t[2];else if(n==="transparent")return this.r=this.g=this.b=this.a=0,!0;return!!t};i.prototype.isColor=!0;o={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};t.exports=i},{}],4:[function(t,i){function u(n,t){var u=k++,f,o,i;return(t=t||{},t.logging&&(r.options.logging=!0,r.options.start=Date.now()),t.async=typeof t.async=="undefined"?!0:t.async,t.allowTaint=typeof t.allowTaint=="undefined"?!1:t.allowTaint,t.removeContainer=typeof t.removeContainer=="undefined"?!0:t.removeContainer,t.javascriptEnabled=typeof t.javascriptEnabled=="undefined"?!1:t.javascriptEnabled,t.imageTimeout=typeof t.imageTimeout=="undefined"?1e4:t.imageTimeout,t.renderer=typeof t.renderer=="function"?t.renderer:e,t.strict=!!t.strict,typeof n=="string")?typeof t.proxy!="string"?Promise.reject("Proxy must be used when rendering url"):(f=t.width!=null?t.width:window.innerWidth,o=t.height!=null?t.height:window.innerHeight,w(it(n),t.proxy,document,f,o,t).then(function(n){return h(n.contentWindow.document.documentElement,n,t,f,o)})):(i=(n===undefined?[document.documentElement]:n.length?n:[n])[0],i.setAttribute(s+u,u),d(i.ownerDocument,t,i.ownerDocument.defaultView.innerWidth,i.ownerDocument.defaultView.innerHeight,u).then(function(n){if(typeof t.onrendered=="function"){r("options.onrendered is deprecated, html2canvas returns a Promise containing the canvas");t.onrendered(n)}return n}))}function d(n,t,i,u,f){return p(n,n,i,u,t,n.defaultView.pageXOffset,n.defaultView.pageYOffset).then(function(e){var o,c;r("Document cloned");o=s+f;c="["+o+"='"+f+"']";n.querySelector(c).removeAttribute(o);var l=e.contentWindow,a=l.document.querySelector(c),v=typeof t.onclone=="function"?Promise.resolve(t.onclone(l.document)):Promise.resolve(!0);return v.then(function(){return h(a,e,t,i,u)})})}function h(n,t,i,u,f){var o=t.contentWindow,h=new l(o.document),y=new a(i,h),s=b(n),p=i.type==="view"?u:nt(o.document),w=i.type==="view"?f:tt(o.document),e=new i.renderer(p,w,y,i,document),k=new v(n,e,h,y,i);return k.ready.then(function(){r("Finished rendering");var u;return u=i.type==="view"?c(e.canvas,{width:e.canvas.width,height:e.canvas.height,top:0,left:0,x:0,y:0}):n===o.document.body||n===o.document.documentElement||i.canvas!=null?e.canvas:c(e.canvas,{width:i.width!=null?i.width:s.width,height:i.height!=null?i.height:s.height,top:s.top,left:s.left,x:0,y:0}),g(t,i),u})}function g(n,t){t.removeContainer&&(n.parentNode.removeChild(n),r("Cleaned up container"))}function c(n,t){var i=document.createElement("canvas"),e=Math.min(n.width-1,Math.max(0,t.left)),s=Math.min(n.width,Math.max(1,t.left+t.width)),o=Math.min(n.height-1,Math.max(0,t.top)),h=Math.min(n.height,Math.max(1,t.top+t.height)),u,f;return i.width=t.width,i.height=t.height,u=s-e,f=h-o,r("Cropping canvas at:","left:",t.left,"top:",t.top,"width:",u,"height:",f),r("Resulting crop with width",t.width,"and height",t.height,"with x",e,"and y",o),i.getContext("2d").drawImage(n,e,o,u,f,t.x,t.y,u,f),i}function nt(n){return Math.max(Math.max(n.body.scrollWidth,n.documentElement.scrollWidth),Math.max(n.body.offsetWidth,n.documentElement.offsetWidth),Math.max(n.body.clientWidth,n.documentElement.clientWidth))}function tt(n){return Math.max(Math.max(n.body.scrollHeight,n.documentElement.scrollHeight),Math.max(n.body.offsetHeight,n.documentElement.offsetHeight),Math.max(n.body.clientHeight,n.documentElement.clientHeight))}function it(n){var t=document.createElement("a");return t.href=n,t.href=t.href,t}var l=t("./support"),e=t("./renderers/canvas"),a=t("./imageloader"),v=t("./nodeparser"),y=t("./nodecontainer"),r=t("./log"),o=t("./utils"),p=t("./clone"),w=t("./proxy").loadUrlDocument,b=o.getBounds,s="data-html2canvas-node",k=0,f;u.CanvasRenderer=e;u.NodeContainer=y;u.log=r;u.utils=o;f=typeof document=="undefined"||typeof Object.create!="function"||typeof document.createElement("canvas").getContext!="function"?function(){return Promise.reject("No canvas support")}:u;i.exports=f;typeof n=="function"&&n.amd&&n("html2canvas",[],function(){return f})},{"./clone":2,"./imageloader":11,"./log":13,"./nodecontainer":14,"./nodeparser":15,"./proxy":16,"./renderers/canvas":20,"./support":22,"./utils":26}],5:[function(n,t){function i(n){if(this.src=n,r("DummyImageContainer for",n),!this.promise||!this.image){r("Initiating DummyImageContainer");i.prototype.image=new Image;var t=this.image;i.prototype.promise=new Promise(function(n,i){t.onload=n;t.onerror=i;t.src=u();t.complete===!0&&n(t)})}}var r=n("./log"),u=n("./utils").smallImage;t.exports=i},{"./log":13,"./utils":26}],6:[function(n,t){function r(n,t){var r=document.createElement("div"),u=document.createElement("img"),f=document.createElement("span"),e="Hidden Text",o,s;r.style.visibility="hidden";r.style.fontFamily=n;r.style.fontSize=t;r.style.margin=0;r.style.padding=0;document.body.appendChild(r);u.src=i();u.width=1;u.height=1;u.style.margin=0;u.style.padding=0;u.style.verticalAlign="baseline";f.style.fontFamily=n;f.style.fontSize=t;f.style.margin=0;f.style.padding=0;f.appendChild(document.createTextNode(e));r.appendChild(f);r.appendChild(u);o=u.offsetTop-f.offsetTop+1;r.removeChild(f);r.appendChild(document.createTextNode(e));r.style.lineHeight="normal";u.style.verticalAlign="super";s=u.offsetTop-r.offsetTop+1;document.body.removeChild(r);this.baseline=o;this.lineWidth=1;this.middle=s}var i=n("./utils").smallImage;t.exports=r},{"./utils":26}],7:[function(n,t){function i(){this.data={}}var r=n("./font");i.prototype.getMetrics=function(n,t){return this.data[n+"-"+t]===undefined&&(this.data[n+"-"+t]=new r(n,t)),this.data[n+"-"+t]};t.exports=i},{"./font":6}],8:[function(n,t){function i(t,i,r){this.image=null;this.src=t;var f=this,e=u(t);this.promise=(i?new Promise(function(n){t.contentWindow.document.URL==="about:blank"||t.contentWindow.document.documentElement==null?t.contentWindow.onload=t.onload=function(){n(t)}:n(t)}):this.proxyLoad(r.proxy,e,r)).then(function(t){var i=n("./core");return i(t.contentWindow.document.documentElement,{type:"view",width:t.width,height:t.height,proxy:r.proxy,javascriptEnabled:r.javascriptEnabled,removeContainer:r.removeContainer,allowTaint:r.allowTaint,imageTimeout:r.imageTimeout/2})}).then(function(n){return f.image=n})}var r=n("./utils"),u=r.getBounds,f=n("./proxy").loadUrlDocument;i.prototype.proxyLoad=function(n,t,i){var r=this.src;return f(r.src,n,r.ownerDocument,t.width,t.height,i)};t.exports=i},{"./core":4,"./proxy":16,"./utils":26}],9:[function(n,t){function i(n){this.src=n.value;this.colorStops=[];this.type=null;this.x0=.5;this.y0=.5;this.x1=.5;this.y1=.5;this.promise=Promise.resolve(!0)}i.TYPES={LINEAR:1,RADIAL:2};i.REGEXP_COLORSTOP=/^\s*(rgba?\(\s*\d{1,3},\s*\d{1,3},\s*\d{1,3}(?:,\s*[0-9\.]+)?\s*\)|[a-z]{3,20}|#[a-f0-9]{3,6})(?:\s+(\d{1,3}(?:\.\d+)?)(%|px)?)?(?:\s|$)/i;t.exports=i},{}],10:[function(n,t){function i(n,t){this.src=n;this.image=new Image;var i=this;this.tainted=null;this.promise=new Promise(function(r,u){i.image.onload=r;i.image.onerror=u;t&&(i.image.crossOrigin="anonymous");i.image.src=n;i.image.complete===!0&&r(i.image)})}t.exports=i},{}],11:[function(n,t){function i(n,t){this.link=null;this.options=n;this.support=t;this.origin=this.getOrigin(window.location.href)}var r=n("./log"),u=n("./imagecontainer"),f=n("./dummyimagecontainer"),o=n("./proxyimagecontainer"),s=n("./framecontainer"),e=n("./svgcontainer"),h=n("./svgnodecontainer"),c=n("./lineargradientcontainer"),l=n("./webkitgradientcontainer"),a=n("./utils").bind;i.prototype.findImages=function(n){var t=[];return n.reduce(function(n,t){switch(t.node.nodeName){case"IMG":return n.concat([{args:[t.node.src],method:"url"}]);case"svg":case"IFRAME":return n.concat([{args:[t.node],method:t.node.nodeName}])}return n},[]).forEach(this.addImage(t,this.loadImage),this),t};i.prototype.findBackgroundImage=function(n,t){return t.parseBackgroundImages().filter(this.hasImageBackground).forEach(this.addImage(n,this.loadImage),this),n};i.prototype.addImage=function(n,t){return function(i){i.args.forEach(function(u){this.imageExists(n,u)||(n.splice(0,0,t.call(this,i)),r("Added image #"+n.length,typeof u=="string"?u.substring(0,100):u))},this)}};i.prototype.hasImageBackground=function(n){return n.method!=="none"};i.prototype.loadImage=function(n){if(n.method==="url"){var t=n.args[0];return!this.isSVG(t)||this.support.svg||this.options.allowTaint?t.match(/data:image\/.*;base64,/i)?new u(t.replace(/url\(['"]{0,}|['"]{0,}\)$/ig,""),!1):this.isSameOrigin(t)||this.options.allowTaint===!0||this.isSVG(t)?new u(t,!1):this.support.cors&&!this.options.allowTaint&&this.options.useCORS?new u(t,!0):this.options.proxy?new o(t,this.options.proxy):new f(t):new e(t)}return n.method==="linear-gradient"?new c(n):n.method==="gradient"?new l(n):n.method==="svg"?new h(n.args[0],this.support.svg):n.method==="IFRAME"?new s(n.args[0],this.isSameOrigin(n.args[0].src),this.options):new f(n)};i.prototype.isSVG=function(n){return n.substring(n.length-3).toLowerCase()==="svg"||e.prototype.isInline(n)};i.prototype.imageExists=function(n,t){return n.some(function(n){return n.src===t})};i.prototype.isSameOrigin=function(n){return this.getOrigin(n)===this.origin};i.prototype.getOrigin=function(n){var t=this.link||(this.link=document.createElement("a"));return t.href=n,t.href=t.href,t.protocol+t.hostname+t.port};i.prototype.getPromise=function(n){return this.timeout(n,this.options.imageTimeout)["catch"](function(){var t=new f(n.src);return t.promise.then(function(t){n.image=t})})};i.prototype.get=function(n){var t=null;return this.images.some(function(i){return(t=i).src===n})?t:null};i.prototype.fetch=function(n){return this.images=n.reduce(a(this.findBackgroundImage,this),this.findImages(n)),this.images.forEach(function(n,t){n.promise.then(function(){r("Succesfully loaded image #"+(t+1),n)},function(i){r("Failed loading image #"+(t+1),n,i)})}),this.ready=Promise.all(this.images.map(this.getPromise,this)),r("Finished searching images"),this};i.prototype.timeout=function(n,t){var i,u=Promise.race([n.promise,new Promise(function(u,f){i=setTimeout(function(){r("Timed out loading image",n);f(n)},t)})]).then(function(n){return clearTimeout(i),n});return u["catch"](function(){clearTimeout(i)}),u};t.exports=i},{"./dummyimagecontainer":5,"./framecontainer":8,"./imagecontainer":10,"./lineargradientcontainer":12,"./log":13,"./proxyimagecontainer":17,"./svgcontainer":23,"./svgnodecontainer":24,"./utils":26,"./webkitgradientcontainer":27}],12:[function(n,t){function r(n){i.apply(this,arguments);this.type=i.TYPES.LINEAR;var t=r.REGEXP_DIRECTION.test(n.args[0])||!i.REGEXP_COLORSTOP.test(n.args[0]);t?n.args[0].split(/\s+/).reverse().forEach(function(n,t){var r,u,i;switch(n){case"left":this.x0=0;this.x1=1;break;case"top":this.y0=0;this.y1=1;break;case"right":this.x0=1;this.x1=0;break;case"bottom":this.y0=1;this.y1=0;break;case"to":r=this.y0;u=this.x0;this.y0=this.y1;this.x0=this.x1;this.x1=u;this.y1=r;break;case"center":break;default:if(i=parseFloat(n,10)*.01,isNaN(i))break;t===0?(this.y0=i,this.y1=1-this.y0):(this.x0=i,this.x1=1-this.x0)}},this):(this.y0=0,this.y1=1);this.colorStops=n.args.slice(t?1:0).map(function(n){var t=n.match(i.REGEXP_COLORSTOP),r=+t[2],f=r===0?"%":t[3];return{color:new u(t[1]),stop:f==="%"?r/100:null}});this.colorStops[0].stop===null&&(this.colorStops[0].stop=0);this.colorStops[this.colorStops.length-1].stop===null&&(this.colorStops[this.colorStops.length-1].stop=1);this.colorStops.forEach(function(n,t){n.stop===null&&this.colorStops.slice(t).some(function(i,r){return i.stop!==null?(n.stop=(i.stop-this.colorStops[t-1].stop)/(r+1)+this.colorStops[t-1].stop,!0):!1},this)},this)}var i=n("./gradientcontainer"),u=n("./color");r.prototype=Object.create(i.prototype);r.REGEXP_DIRECTION=/^\s*(?:to|left|right|top|bottom|center|\d{1,3}(?:\.\d+)?%?)(?:\s|$)/i;t.exports=r},{"./color":3,"./gradientcontainer":9}],13:[function(n,t){var i=function(){i.options.logging&&window.console&&window.console.log&&Function.prototype.bind.call(window.console.log,window.console).apply(window.console,[Date.now()-i.options.start+"ms","html2canvas:"].concat([].slice.call(arguments,0)))};i.options={logging:!1};t.exports=i},{}],14:[function(n,t){function i(n,t){this.node=n;this.parent=t;this.stack=null;this.bounds=null;this.borders=null;this.clip=[];this.backgroundClip=[];this.offsetBounds=null;this.visible=null;this.computedStyles=null;this.colors={};this.styles={};this.backgroundImages=null;this.transformData=null;this.transformMatrix=null;this.isPseudoElement=!1;this.opacity=null}function h(n){var t=n.options[n.selectedIndex||0];return t?t.text||"":""}function c(n){if(n&&n[1]==="matrix")return n[2].split(",").map(function(n){return parseFloat(n.trim())});if(n&&n[1]==="matrix3d"){var t=n[2].split(",").map(function(n){return parseFloat(n.trim())});return[t[0],t[1],t[4],t[5],t[12],t[13]]}}function r(n){return n.toString().indexOf("%")!==-1}function l(n){return n.replace("px","")}function a(n){return parseFloat(n)}var f=n("./color"),u=n("./utils"),e=u.getBounds,o=u.parseBackgrounds,s=u.offsetBounds;i.prototype.cloneTo=function(n){n.visible=this.visible;n.borders=this.borders;n.bounds=this.bounds;n.clip=this.clip;n.backgroundClip=this.backgroundClip;n.computedStyles=this.computedStyles;n.styles=this.styles;n.backgroundImages=this.backgroundImages;n.opacity=this.opacity};i.prototype.getOpacity=function(){return this.opacity===null?this.opacity=this.cssFloat("opacity"):this.opacity};i.prototype.assignStack=function(n){this.stack=n;n.children.push(this)};i.prototype.isElementVisible=function(){return this.node.nodeType===Node.TEXT_NODE?this.parent.visible:this.css("display")!=="none"&&this.css("visibility")!=="hidden"&&!this.node.hasAttribute("data-html2canvas-ignore")&&(this.node.nodeName!=="INPUT"||this.node.getAttribute("type")!=="hidden")};i.prototype.css=function(n){return this.computedStyles||(this.computedStyles=this.isPseudoElement?this.parent.computedStyle(this.before?":before":":after"):this.computedStyle(null)),this.styles[n]||(this.styles[n]=this.computedStyles[n])};i.prototype.prefixedCss=function(n){var t=this.css(n);return t===undefined&&["webkit","moz","ms","o"].some(function(i){return t=this.css(i+n.substr(0,1).toUpperCase()+n.substr(1)),t!==undefined},this),t===undefined?null:t};i.prototype.computedStyle=function(n){return this.node.ownerDocument.defaultView.getComputedStyle(this.node,n)};i.prototype.cssInt=function(n){var t=parseInt(this.css(n),10);return isNaN(t)?0:t};i.prototype.color=function(n){return this.colors[n]||(this.colors[n]=new f(this.css(n)))};i.prototype.cssFloat=function(n){var t=parseFloat(this.css(n));return isNaN(t)?0:t};i.prototype.fontWeight=function(){var n=this.css("fontWeight");switch(parseInt(n,10)){case 401:n="bold";break;case 400:n="normal"}return n};i.prototype.parseClip=function(){var n=this.css("clip").match(this.CLIP);return n?{top:parseInt(n[1],10),right:parseInt(n[2],10),bottom:parseInt(n[3],10),left:parseInt(n[4],10)}:null};i.prototype.parseBackgroundImages=function(){return this.backgroundImages||(this.backgroundImages=o(this.css("backgroundImage")))};i.prototype.cssList=function(n,t){var i=(this.css(n)||"").split(",");return i=i[t||0]||i[0]||"auto",i=i.trim().split(" "),i.length===1&&(i=[i[0],r(i[0])?"auto":i[0]]),i};i.prototype.parseBackgroundSize=function(n,t,i){var u=this.cssList("backgroundSize",i),f,o,s,e;if(r(u[0]))f=n.width*parseFloat(u[0])/100;else{if(/contain|cover/.test(u[0]))return s=n.width/n.height,e=t.width/t.height,s<e^u[0]==="contain"?{width:n.height*e,height:n.height}:{width:n.width,height:n.width/e};f=parseInt(u[0],10)}return o=u[0]==="auto"&&u[1]==="auto"?t.height:u[1]==="auto"?f/t.width*t.height:r(u[1])?n.height*parseFloat(u[1])/100:parseInt(u[1],10),u[0]==="auto"&&(f=o/t.height*t.width),{width:f,height:o}};i.prototype.parseBackgroundPosition=function(n,t,i,u){var f=this.cssList("backgroundPosition",i),e,o;return e=r(f[0])?(n.width-(u||t).width)*(parseFloat(f[0])/100):parseInt(f[0],10),o=f[1]==="auto"?e/t.width*t.height:r(f[1])?(n.height-(u||t).height)*parseFloat(f[1])/100:parseInt(f[1],10),f[0]==="auto"&&(e=o/t.height*t.width),{left:e,top:o}};i.prototype.parseBackgroundRepeat=function(n){return this.cssList("backgroundRepeat",n)[0]};i.prototype.parseTextShadows=function(){var r=this.css("textShadow"),u=[],t,i,n;if(r&&r!=="none")for(t=r.match(this.TEXT_SHADOW_PROPERTY),i=0;t&&i<t.length;i++)n=t[i].match(this.TEXT_SHADOW_VALUES),u.push({color:new f(n[0]),offsetX:n[1]?parseFloat(n[1].replace("px","")):0,offsetY:n[2]?parseFloat(n[2].replace("px","")):0,blur:n[3]?n[3].replace("px",""):0});return u};i.prototype.parseTransform=function(){if(!this.transformData)if(this.hasTransform()){var t=this.parseBounds(),n=this.prefixedCss("transformOrigin").split(" ").map(l).map(a);n[0]+=t.left;n[1]+=t.top;this.transformData={origin:n,matrix:this.parseTransformMatrix()}}else this.transformData={origin:[0,0],matrix:[1,0,0,1,0,0]};return this.transformData};i.prototype.parseTransformMatrix=function(){if(!this.transformMatrix){var n=this.prefixedCss("transform"),t=n?c(n.match(this.MATRIX_PROPERTY)):null;this.transformMatrix=t?t:[1,0,0,1,0,0]}return this.transformMatrix};i.prototype.parseBounds=function(){return this.bounds||(this.bounds=this.hasTransform()?s(this.node):e(this.node))};i.prototype.hasTransform=function(){return this.parseTransformMatrix().join(",")!=="1,0,0,1,0,0"||this.parent&&this.parent.hasTransform()};i.prototype.getValue=function(){var n=this.node.value||"";return this.node.tagName==="SELECT"?n=h(this.node):this.node.type==="password"&&(n=Array(n.length+1).join("\u2022")),n.length===0?this.node.placeholder||"":n};i.prototype.MATRIX_PROPERTY=/(matrix|matrix3d)\((.+)\)/;i.prototype.TEXT_SHADOW_PROPERTY=/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g;i.prototype.TEXT_SHADOW_VALUES=/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g;i.prototype.CLIP=/^rect\((\d+)px,? (\d+)px,? (\d+)px,? (\d+)px\)$/;t.exports=i},{"./color":3,"./utils":26}],15:[function(n,t){function i(n,t,i,f,e){var o,s;r("Starting NodeParser");this.renderer=t;this.options=e;this.range=null;this.support=i;this.renderQueue=[];this.stack=new k(!0,1,n.ownerDocument,null);o=new w(n,null);e.background&&t.rectangle(0,0,t.width,t.height,new u(e.background));n===n.ownerDocument.documentElement&&(s=new w(o.color("backgroundColor").isTransparent()?n.ownerDocument.body:n.ownerDocument.documentElement,null),t.rectangle(0,0,t.width,t.height,s.color("backgroundColor")));o.visibile=o.isElementVisible();this.createPseudoHideStyles(n.ownerDocument);this.disableAnimations(n.ownerDocument);this.nodes=it([o].concat(this.getChildren(o)).filter(function(n){return n.visible=n.isElementVisible()}).map(this.getPseudoElements,this));this.fontMetrics=new ct;r("Fetched nodes, total:",this.nodes.length);r("Calculate overflow clips");this.calculateOverflowClips();r("Start fetching images");this.images=f.fetch(this.nodes.filter(l));this.ready=this.images.ready.then(d(function(){return r("Images loaded, starting parsing"),r("Creating stacking contexts"),this.createStackingContexts(),r("Sorting stacking contexts"),this.sortStackingContexts(this.stack),this.parse(this.stack),r("Render queue created with "+this.renderQueue.length+" items"),new Promise(d(function(n){e.async?typeof e.async=="function"?e.async.call(this,this.renderQueue,n):this.renderQueue.length>0?(this.renderIndex=0,this.asyncRenderer(this.renderQueue,n)):n():(this.renderQueue.forEach(this.paint,this),n())},this))},this))}function rt(n){return n.parent&&n.parent.clip.length}function yt(n){return n.replace(/(\-[a-z])/g,function(n){return n.toUpperCase().replace("-","")})}function ut(){}function ft(n,t,i,r){return n.map(function(u,f){if(u.width>0){var o=t.left,e=t.top,s=t.width,h=t.height-n[2].width;switch(f){case 0:h=n[0].width;u.args=p({c1:[o,e],c2:[o+s,e],c3:[o+s-n[1].width,e+h],c4:[o+n[3].width,e+h]},r[0],r[1],i.topLeftOuter,i.topLeftInner,i.topRightOuter,i.topRightInner);break;case 1:o=t.left+t.width-n[1].width;s=n[1].width;u.args=p({c1:[o+s,e],c2:[o+s,e+h+n[2].width],c3:[o,e+h],c4:[o,e+n[0].width]},r[1],r[2],i.topRightOuter,i.topRightInner,i.bottomRightOuter,i.bottomRightInner);break;case 2:e=e+t.height-n[2].width;h=n[2].width;u.args=p({c1:[o+s,e+h],c2:[o,e+h],c3:[o+n[3].width,e],c4:[o+s-n[3].width,e]},r[2],r[3],i.bottomRightOuter,i.bottomRightInner,i.bottomLeftOuter,i.bottomLeftInner);break;case 3:s=n[3].width;u.args=p({c1:[o,e+h+n[2].width],c2:[o,e],c3:[o+s,e+n[0].width],c4:[o+s,e+h]},r[3],r[0],i.bottomLeftOuter,i.bottomLeftInner,i.topLeftOuter,i.topLeftInner)}}return u})}function f(n,t,i,r){var h=4*((Math.sqrt(2)-1)/3),e=i*h,s=r*h,u=n+i,f=t+r;return{topLeft:o({x:n,y:f},{x:n,y:f-s},{x:u-e,y:t},{x:u,y:t}),topRight:o({x:n,y:t},{x:n+e,y:t},{x:u,y:f-s},{x:u,y:f}),bottomRight:o({x:u,y:t},{x:u,y:t+s},{x:n+e,y:f},{x:n,y:f}),bottomLeft:o({x:u,y:f},{x:u-e,y:f},{x:n,y:t+s},{x:n,y:t})}}function et(n,t,i){var e=n.left,o=n.top,r=n.width,u=n.height,v=t[0][0]<r/2?t[0][0]:r/2,y=t[0][1]<u/2?t[0][1]:u/2,s=t[1][0]<r/2?t[1][0]:r/2,p=t[1][1]<u/2?t[1][1]:u/2,h=t[2][0]<r/2?t[2][0]:r/2,c=t[2][1]<u/2?t[2][1]:u/2,w=t[3][0]<r/2?t[3][0]:r/2,l=t[3][1]<u/2?t[3][1]:u/2,a=r-s,b=u-c,k=r-h,d=u-l;return{topLeftOuter:f(e,o,v,y).topLeft.subdivide(.5),topLeftInner:f(e+i[3].width,o+i[0].width,Math.max(0,v-i[3].width),Math.max(0,y-i[0].width)).topLeft.subdivide(.5),topRightOuter:f(e+a,o,s,p).topRight.subdivide(.5),topRightInner:f(e+Math.min(a,r+i[3].width),o+i[0].width,a>r+i[3].width?0:s-i[3].width,p-i[0].width).topRight.subdivide(.5),bottomRightOuter:f(e+k,o+b,h,c).bottomRight.subdivide(.5),bottomRightInner:f(e+Math.min(k,r-i[3].width),o+Math.min(b,u+i[0].width),Math.max(0,h-i[1].width),c-i[2].width).bottomRight.subdivide(.5),bottomLeftOuter:f(e,o+d,w,l).bottomLeft.subdivide(.5),bottomLeftInner:f(e+i[3].width,o+d,Math.max(0,w-i[3].width),l-i[2].width).bottomLeft.subdivide(.5)}}function o(n,t,i,r){var u=function(n,t,i){return{x:n.x+(t.x-n.x)*i,y:n.y+(t.y-n.y)*i}};return{start:n,startControl:t,endControl:i,end:r,subdivide:function(f){var e=u(n,t,f),s=u(t,i,f),h=u(i,r,f),c=u(e,s,f),l=u(s,h,f),a=u(c,l,f);return[o(n,e,c,a),o(a,l,h,r)]},curveTo:function(n){n.push(["bezierCurve",t.x,t.y,i.x,i.y,r.x,r.y])},curveToReversed:function(r){r.push(["bezierCurve",i.x,i.y,t.x,t.y,n.x,n.y])}}}function p(n,t,i,r,u,f,e){var o=[];return t[0]>0||t[1]>0?(o.push(["line",r[1].start.x,r[1].start.y]),r[1].curveTo(o)):o.push(["line",n.c1[0],n.c1[1]]),i[0]>0||i[1]>0?(o.push(["line",f[0].start.x,f[0].start.y]),f[0].curveTo(o),o.push(["line",e[0].end.x,e[0].end.y]),e[0].curveToReversed(o)):(o.push(["line",n.c2[0],n.c2[1]]),o.push(["line",n.c3[0],n.c3[1]])),t[0]>0||t[1]>0?(o.push(["line",u[1].end.x,u[1].end.y]),u[1].curveToReversed(o)):o.push(["line",n.c4[0],n.c4[1]]),o}function e(n,t,i,r,u,f,e){t[0]>0||t[1]>0?(n.push(["line",r[0].start.x,r[0].start.y]),r[0].curveTo(n),r[1].curveTo(n)):n.push(["line",f,e]);(i[0]>0||i[1]>0)&&n.push(["line",u[0].start.x,u[0].start.y])}function pt(n){return n.cssInt("zIndex")<0}function wt(n){return n.cssInt("zIndex")>0}function ot(n){return n.cssInt("zIndex")===0}function st(n){return["inline","inline-block","inline-table"].indexOf(n.css("display"))!==-1}function ht(n){return n instanceof k}function bt(n){return n.node.data.trim().length>0}function kt(n){return/^(normal|none|0px)$/.test(n.parent.css("letterSpacing"))}function dt(n){return["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(t){var r=n.css("border"+t+"Radius"),i=r.split(" ");return i.length<=1&&(i[1]=i[0]),i.map(ui)})}function gt(n){return n.nodeType===Node.TEXT_NODE||n.nodeType===Node.ELEMENT_NODE}function ni(n){var t=n.css("position"),i=["absolute","relative","fixed"].indexOf(t)!==-1?n.css("zIndex"):"auto";return i!=="auto"}function h(n){return n.css("position")!=="static"}function nt(n){return n.css("float")!=="none"}function ti(n){return["inline-block","inline-table"].indexOf(n.css("display"))!==-1}function c(n){var t=this;return function(){return!n.apply(t,arguments)}}function l(n){return n.node.nodeType===Node.ELEMENT_NODE}function a(n){return n.isPseudoElement===!0}function tt(n){return n.node.nodeType===Node.TEXT_NODE}function ii(n){return function(t,i){return t.cssInt("zIndex")+n.indexOf(t)/n.length-(i.cssInt("zIndex")+n.indexOf(i)/n.length)}}function ri(n){return n.getOpacity()<1}function ui(n){return parseInt(n,10)}function fi(n){return n.width}function ei(n){return n.node.nodeType!==Node.ELEMENT_NODE||["SCRIPT","HEAD","TITLE","OBJECT","BR","OPTION"].indexOf(n.node.nodeName)===-1}function it(n){return[].concat.apply([],n)}function oi(n){var t=n.substr(0,1);return t===n.substr(n.length-1)&&t.match(/'|"/)?n.substr(1,n.length-2):n}function si(n){for(var r=[],t=0,u=!1,i;n.length;)hi(n[t])===u?(i=n.splice(0,t),i.length&&r.push(v.ucs2.encode(i)),u=!u,t=0):t++,t>=n.length&&(i=n.splice(0,t),i.length&&r.push(v.ucs2.encode(i)));return r}function hi(n){return[32,13,10,9,45].indexOf(n)!==-1}function ci(n){return/[^\u0000-\u00ff]/.test(n)}var r=n("./log"),v=n("punycode"),w=n("./nodecontainer"),b=n("./textcontainer"),s=n("./pseudoelementcontainer"),ct=n("./fontmetrics"),u=n("./color"),k=n("./stackingcontext"),y=n("./utils"),d=y.bind,lt=y.getBounds,at=y.parseBackgrounds,vt=y.offsetBounds,g;i.prototype.calculateOverflowClips=function(){this.nodes.forEach(function(n){if(l(n)){a(n)&&n.appendToDOM();n.borders=this.parseBorders(n);var i=n.css("overflow")==="hidden"?[n.borders.clip]:[],t=n.parseClip();t&&["absolute","fixed"].indexOf(n.css("position"))!==-1&&i.push([["rect",n.bounds.left+t.left,n.bounds.top+t.top,t.right-t.left,t.bottom-t.top]]);n.clip=rt(n)?n.parent.clip.concat(i):i;n.backgroundClip=n.css("overflow")!=="hidden"?n.clip.concat([n.borders.clip]):n.clip;a(n)&&n.cleanDOM()}else tt(n)&&(n.clip=rt(n)?n.parent.clip:[]);a(n)||(n.bounds=null)},this)};i.prototype.asyncRenderer=function(n,t,i){i=i||Date.now();this.paint(n[this.renderIndex++]);n.length===this.renderIndex?t():i+20>Date.now()?this.asyncRenderer(n,t,i):setTimeout(d(function(){this.asyncRenderer(n,t)},this),0)};i.prototype.createPseudoHideStyles=function(n){this.createStyles(n,"."+s.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+':before { content: "" !important; display: none !important; }.'+s.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER+':after { content: "" !important; display: none !important; }')};i.prototype.disableAnimations=function(n){this.createStyles(n,"* { -webkit-animation: none !important; -moz-animation: none !important; -o-animation: none !important; animation: none !important; -webkit-transition: none !important; -moz-transition: none !important; -o-transition: none !important; transition: none !important;}")};i.prototype.createStyles=function(n,t){var i=n.createElement("style");i.innerHTML=t;n.body.appendChild(i)};i.prototype.getPseudoElements=function(n){var t=[[n]],i,r;return n.node.nodeType===Node.ELEMENT_NODE&&(i=this.getPseudoElement(n,":before"),r=this.getPseudoElement(n,":after"),i&&t.push(i),r&&t.push(r)),it(t)};i.prototype.getPseudoElement=function(n,t){var i=n.computedStyle(t),u,o,h;if(!i||!i.content||i.content==="none"||i.content==="-moz-alt-content"||i.display==="none")return null;var f=oi(i.content),c=f.substr(0,3)==="url",r=document.createElement(c?"img":"html2canvaspseudoelement"),e=new s(r,n,t);for(u=i.length-1;u>=0;u--)o=yt(i.item(u)),r.style[o]=i[o];return r.className=s.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+" "+s.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER,c?(r.src=at(f)[0].args[0],[e]):(h=document.createTextNode(f),r.appendChild(h),[e,new b(h,e)])};i.prototype.getChildren=function(n){return it([].filter.call(n.node.childNodes,gt).map(function(t){var i=[t.nodeType===Node.TEXT_NODE?new b(t,n):new w(t,n)].filter(ei);return t.nodeType===Node.ELEMENT_NODE&&i.length&&t.tagName!=="TEXTAREA"?i[0].isElementVisible()?i.concat(this.getChildren(i[0])):[]:i},this))};i.prototype.newStackingContext=function(n,t){var i=new k(t,n.getOpacity(),n.node,n.parent),r;n.cloneTo(i);r=t?i.getParentStack(this):i.parent.stack;r.contexts.push(i);n.stack=i};i.prototype.createStackingContexts=function(){this.nodes.forEach(function(n){l(n)&&(this.isRootElement(n)||ri(n)||ni(n)||this.isBodyWithTransparentRoot(n)||n.hasTransform())?this.newStackingContext(n,!0):l(n)&&(h(n)&&ot(n)||ti(n)||nt(n))?this.newStackingContext(n,!1):n.assignStack(n.parent.stack)},this)};i.prototype.isBodyWithTransparentRoot=function(n){return n.node.nodeName==="BODY"&&n.parent.color("backgroundColor").isTransparent()};i.prototype.isRootElement=function(n){return n.parent===null};i.prototype.sortStackingContexts=function(n){n.contexts.sort(ii(n.contexts.slice(0)));n.contexts.forEach(this.sortStackingContexts,this)};i.prototype.parseTextBounds=function(n){return function(t,i,r){var u,f,e;if(n.parent.css("textDecoration").substr(0,4)!=="none"||t.trim().length!==0){if(this.support.rangeBounds&&!n.parent.hasTransform())return u=r.slice(0,i).join("").length,this.getRangeBounds(n.node,u,t.length);if(n.node&&typeof n.node.data=="string")return f=n.node.splitText(t.length),e=this.getWrapperBounds(n.node,n.parent.hasTransform()),n.node=f,e}else(!this.support.rangeBounds||n.parent.hasTransform())&&(n.node=n.node.splitText(t.length));return{}}};i.prototype.getWrapperBounds=function(n,t){var i=n.ownerDocument.createElement("html2canvaswrapper"),r=n.parentNode,f=n.cloneNode(!0),u;return i.appendChild(n.cloneNode(!0)),r.replaceChild(i,n),u=t?vt(i):lt(i),r.replaceChild(f,i),u};i.prototype.getRangeBounds=function(n,t,i){var r=this.range||(this.range=n.ownerDocument.createRange());return r.setStart(n,t),r.setEnd(n,t+i),r.getBoundingClientRect()};i.prototype.parse=function(n){var r=n.contexts.filter(pt),i=n.children.filter(l),t=i.filter(c(nt)),u=t.filter(c(h)).filter(c(st)),f=i.filter(c(h)).filter(nt),e=t.filter(c(h)).filter(st),o=n.contexts.concat(t.filter(h)).filter(ot),s=n.children.filter(tt).filter(bt),a=n.contexts.filter(wt);r.concat(u).concat(f).concat(e).concat(o).concat(s).concat(a).forEach(function(n){this.renderQueue.push(n);ht(n)&&(this.parse(n),this.renderQueue.push(new ut))},this)};i.prototype.paint=function(n){try{n instanceof ut?this.renderer.ctx.restore():tt(n)?(a(n.parent)&&n.parent.appendToDOM(),this.paintText(n),a(n.parent)&&n.parent.cleanDOM()):this.paintNode(n)}catch(t){if(r(t),this.options.strict)throw t;}};i.prototype.paintNode=function(n){ht(n)&&(this.renderer.setOpacity(n.opacity),this.renderer.ctx.save(),n.hasTransform()&&this.renderer.setTransform(n.parseTransform()));n.node.nodeName==="INPUT"&&n.node.type==="checkbox"?this.paintCheckbox(n):n.node.nodeName==="INPUT"&&n.node.type==="radio"?this.paintRadio(n):this.paintElement(n)};i.prototype.paintElement=function(n){var t=n.parseBounds();this.renderer.clip(n.backgroundClip,function(){this.renderer.renderBackground(n,t,n.borders.borders.map(fi))},this);this.renderer.clip(n.clip,function(){this.renderer.renderBorders(n.borders.borders)},this);this.renderer.clip(n.backgroundClip,function(){var i,u;switch(n.node.nodeName){case"svg":case"IFRAME":i=this.images.get(n.node);i?this.renderer.renderImage(n,t,n.borders,i):r("Error loading <"+n.node.nodeName+">",n.node);break;case"IMG":u=this.images.get(n.node.src);u?this.renderer.renderImage(n,t,n.borders,u):r("Error loading <img>",n.node.src);break;case"CANVAS":this.renderer.renderImage(n,t,n.borders,{image:n.node});break;case"SELECT":case"INPUT":case"TEXTAREA":this.paintFormValue(n)}},this)};i.prototype.paintCheckbox=function(n){var r=n.parseBounds(),i=Math.min(r.width,r.height),t={width:i-1,height:i-1,top:r.top,left:r.left},f=[3,3],e=[f,f,f,f],o=[1,1,1,1].map(function(n){return{color:new u("#A5A5A5"),width:n}}),s=et(t,e,o);this.renderer.clip(n.backgroundClip,function(){this.renderer.rectangle(t.left+1,t.top+1,t.width-2,t.height-2,new u("#DEDEDE"));this.renderer.renderBorders(ft(o,t,s,e));n.node.checked&&(this.renderer.font(new u("#424242"),"normal","normal","bold",i-3+"px","arial"),this.renderer.text("\u2714",t.left+i/6,t.top+i-1))},this)};i.prototype.paintRadio=function(n){var t=n.parseBounds(),i=Math.min(t.width,t.height)-2;this.renderer.clip(n.backgroundClip,function(){this.renderer.circleStroke(t.left+1,t.top+1,i,new u("#DEDEDE"),1,new u("#A5A5A5"));n.node.checked&&this.renderer.circle(Math.ceil(t.left+i/4)+1,Math.ceil(t.top+i/4)+1,Math.floor(i/2),new u("#424242"))},this)};i.prototype.paintFormValue=function(n){var f=n.getValue(),u;if(f.length>0){var i=n.node.ownerDocument,t=i.createElement("html2canvaswrapper");["lineHeight","textAlign","fontFamily","fontWeight","fontSize","color","paddingLeft","paddingTop","paddingRight","paddingBottom","width","height","borderLeftStyle","borderTopStyle","borderLeftWidth","borderTopWidth","boxSizing","whiteSpace","wordWrap"].forEach(function(i){try{t.style[i]=n.css(i)}catch(u){r("html2canvas: Parse: Exception caught in renderFormValue: "+u.message)}});u=n.parseBounds();t.style.position="fixed";t.style.left=u.left+"px";t.style.top=u.top+"px";t.textContent=f;i.body.appendChild(t);this.paintText(new b(t.firstChild,n));i.body.removeChild(t)}};i.prototype.paintText=function(n){n.applyTextTransform();var i=v.ucs2.decode(n.node.data),r=(!this.options.letterRendering||kt(n))&&!ci(n.node.data)?si(i):i.map(function(n){return v.ucs2.encode([n])}),e=n.parent.fontWeight(),u=n.parent.css("fontSize"),f=n.parent.css("fontFamily"),t=n.parent.parseTextShadows();this.renderer.font(n.parent.color("color"),n.parent.css("fontStyle"),n.parent.css("fontVariant"),e,u,f);t.length?this.renderer.fontShadow(t[0].color,t[0].offsetX,t[0].offsetY,t[0].blur):this.renderer.clearShadow();this.renderer.clip(n.parent.clip,function(){r.map(this.parseTextBounds(n),this).forEach(function(t,i){t&&(this.renderer.text(r[i],t.left,t.bottom),this.renderTextDecoration(n.parent,t,this.fontMetrics.getMetrics(f,u)))},this)},this)};i.prototype.renderTextDecoration=function(n,t,i){switch(n.css("textDecoration").split(" ")[0]){case"underline":this.renderer.rectangle(t.left,Math.round(t.top+i.baseline+i.lineWidth),t.width,1,n.color("color"));break;case"overline":this.renderer.rectangle(t.left,Math.round(t.top),t.width,1,n.color("color"));break;case"line-through":this.renderer.rectangle(t.left,Math.ceil(t.top+i.middle+i.lineWidth),t.width,1,n.color("color"))}};g={inset:[["darken",.6],["darken",.1],["darken",.1],["darken",.6]]};i.prototype.parseBorders=function(n){var t=n.parseBounds(),i=dt(n),r=["Top","Right","Bottom","Left"].map(function(t,i){var e=n.css("border"+t+"Style"),r=n.color("border"+t+"Color"),f;return e==="inset"&&r.isBlack()&&(r=new u([255,255,255,r.a])),f=g[e]?g[e][i]:null,{width:n.cssInt("border"+t+"Width"),color:f?r[f[0]](f[1]):r,args:null}}),f=et(t,i,r);return{clip:this.parseBackgroundClip(n,f,r,i,t),borders:ft(r,t,f,i)}};i.prototype.parseBackgroundClip=function(n,t,i,r,u){var o=n.css("backgroundClip"),f=[];switch(o){case"content-box":case"padding-box":e(f,r[0],r[1],t.topLeftInner,t.topRightInner,u.left+i[3].width,u.top+i[0].width);e(f,r[1],r[2],t.topRightInner,t.bottomRightInner,u.left+u.width-i[1].width,u.top+i[0].width);e(f,r[2],r[3],t.bottomRightInner,t.bottomLeftInner,u.left+u.width-i[1].width,u.top+u.height-i[2].width);e(f,r[3],r[0],t.bottomLeftInner,t.topLeftInner,u.left+i[3].width,u.top+u.height-i[2].width);break;default:e(f,r[0],r[1],t.topLeftOuter,t.topRightOuter,u.left,u.top);e(f,r[1],r[2],t.topRightOuter,t.bottomRightOuter,u.left+u.width,u.top);e(f,r[2],r[3],t.bottomRightOuter,t.bottomLeftOuter,u.left+u.width,u.top+u.height);e(f,r[3],r[0],t.bottomLeftOuter,t.topLeftOuter,u.left,u.top+u.height)}return f};t.exports=i},{"./color":3,"./fontmetrics":7,"./log":13,"./nodecontainer":14,"./pseudoelementcontainer":18,"./stackingcontext":21,"./textcontainer":25,"./utils":26,punycode:1}],16:[function(n,t,i){function u(n,t,i){var h="withCredentials"in new XMLHttpRequest,r,u;return t?(r=e(h),u=o(t,n,r),h?s(u):f(i,u,r).then(function(n){return l(n.content)})):Promise.reject("No proxy configured")}function v(n,t,i){var r="crossOrigin"in new Image,u=e(r),s=o(t,n,u);return r?Promise.resolve(s):f(i,s,u).then(function(n){return"data:"+n.type+";base64,"+n.content})}function f(n,t,i){return new Promise(function(r,u){var f=n.createElement("script"),e=function(){delete window.html2canvas.proxy[i];n.body.removeChild(f)};window.html2canvas.proxy[i]=function(n){e();r(n)};f.src=t;f.onerror=function(n){e();u(n)};n.body.appendChild(f)})}function e(n){return n?"":"html2canvas_"+Date.now()+"_"+ ++a+"_"+Math.round(Math.random()*1e5)}function o(n,t,i){return n+"?url="+encodeURIComponent(t)+(i.length?"&callback=html2canvas.proxy."+i:"")}function y(n){return function(t){var e=new DOMParser,i,u,f;try{i=e.parseFromString(t,"text/html")}catch(o){r("DOMParser not supported, falling back to createHTMLDocument");i=document.implementation.createHTMLDocument("");try{i.open();i.write(t);i.close()}catch(s){r("createHTMLDocument write not supported, falling back to document.body.innerHTML");i.body.innerHTML=t}}return u=i.querySelector("base"),u&&u.href.host||(f=i.createElement("base"),f.href=n,i.head.insertBefore(f,i.head.firstChild)),i}}function p(n,t,i,r,f,e){return new u(n,t,window.document).then(y(n)).then(function(n){return c(n,i,r,f,e,0,0)})}var s=n("./xhr"),h=n("./utils"),r=n("./log"),c=n("./clone"),l=h.decode64,a=0;i.Proxy=u;i.ProxyURL=v;i.loadUrlDocument=p},{"./clone":2,"./log":13,"./utils":26,"./xhr":28}],17:[function(n,t){function r(n,t){var u=document.createElement("a"),r;u.href=n;n=u.href;this.src=n;this.image=new Image;r=this;this.promise=new Promise(function(u,f){r.image.crossOrigin="Anonymous";r.image.onload=u;r.image.onerror=f;new i(n,t,document).then(function(n){r.image.src=n})["catch"](f)})}var i=n("./proxy").ProxyURL;t.exports=r},{"./proxy":16}],18:[function(n,t){function i(n,t,i){r.call(this,n,t);this.isPseudoElement=!0;this.before=i===":before"}var r=n("./nodecontainer");i.prototype.cloneTo=function(n){i.prototype.cloneTo.call(this,n);n.isPseudoElement=!0;n.before=this.before};i.prototype=Object.create(r.prototype);i.prototype.appendToDOM=function(){this.before?this.parent.node.insertBefore(this.node,this.parent.node.firstChild):this.parent.node.appendChild(this.node);this.parent.node.className+=" "+this.getHideClass()};i.prototype.cleanDOM=function(){this.node.parentNode.removeChild(this.node);this.parent.node.className=this.parent.node.className.replace(this.getHideClass(),"")};i.prototype.getHideClass=function(){return this["PSEUDO_HIDE_ELEMENT_CLASS_"+(this.before?"BEFORE":"AFTER")]};i.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE="___html2canvas___pseudoelement_before";i.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER="___html2canvas___pseudoelement_after";t.exports=i},{"./nodecontainer":14}],19:[function(n,t){function i(n,t,i,r,u){this.width=n;this.height=t;this.images=i;this.options=r;this.document=u}var r=n("./log");i.prototype.renderImage=function(n,t,i,r){var f=n.cssInt("paddingLeft"),e=n.cssInt("paddingTop"),h=n.cssInt("paddingRight"),c=n.cssInt("paddingBottom"),u=i.borders,o=t.width-(u[1].width+u[3].width+f+h),s=t.height-(u[0].width+u[2].width+e+c);this.drawImage(r,0,0,r.image.width||o,r.image.height||s,t.left+f+u[3].width,t.top+e+u[0].width,o,s)};i.prototype.renderBackground=function(n,t,i){t.height>0&&t.width>0&&(this.renderBackgroundColor(n,t),this.renderBackgroundImage(n,t,i))};i.prototype.renderBackgroundColor=function(n,t){var i=n.color("backgroundColor");i.isTransparent()||this.rectangle(t.left,t.top,t.width,t.height,i)};i.prototype.renderBorders=function(n){n.forEach(this.renderBorder,this)};i.prototype.renderBorder=function(n){n.color.isTransparent()||n.args===null||this.drawShape(n.args,n.color)};i.prototype.renderBackgroundImage=function(n,t,i){var u=n.parseBackgroundImages();u.reverse().forEach(function(u,f,e){var o,s;switch(u.method){case"url":o=this.images.get(u.args[0]);o?this.renderBackgroundRepeating(n,t,o,e.length-(f+1),i):r("Error loading background-image",u.args[0]);break;case"linear-gradient":case"gradient":s=this.images.get(u.value);s?this.renderBackgroundGradient(s,t,i):r("Error loading background-image",u.args[0]);break;case"none":break;default:r("Unknown background-image type",u.args[0])}},this)};i.prototype.renderBackgroundRepeating=function(n,t,i,r,u){var f=n.parseBackgroundSize(t,i.image,r),e=n.parseBackgroundPosition(t,i.image,r,f),o=n.parseBackgroundRepeat(r);switch(o){case"repeat-x":case"repeat no-repeat":this.backgroundRepeatShape(i,e,f,t,t.left+u[3],t.top+e.top+u[0],99999,f.height,u);break;case"repeat-y":case"no-repeat repeat":this.backgroundRepeatShape(i,e,f,t,t.left+e.left+u[3],t.top+u[0],f.width,99999,u);break;case"no-repeat":this.backgroundRepeatShape(i,e,f,t,t.left+e.left+u[3],t.top+e.top+u[0],f.width,f.height,u);break;default:this.renderBackgroundRepeat(i,e,f,{top:t.top,left:t.left},u[3],u[0])}};t.exports=i},{"./log":13}],20:[function(n,t){function i(n,t){r.apply(this,arguments);this.canvas=this.options.canvas||this.document.createElement("canvas");this.options.canvas||(this.canvas.width=n,this.canvas.height=t);this.ctx=this.canvas.getContext("2d");this.taintCtx=this.document.createElement("canvas").getContext("2d");this.ctx.textBaseline="bottom";this.variables={};f("Initialized CanvasRenderer with size",n,"x",t)}function e(n){return n.length>0}var r=n("../renderer"),u=n("../lineargradientcontainer"),f=n("../log");i.prototype=Object.create(r.prototype);i.prototype.setFillStyle=function(n){return this.ctx.fillStyle=typeof n=="object"&&!!n.isColor?n.toString():n,this.ctx};i.prototype.rectangle=function(n,t,i,r,u){this.setFillStyle(u).fillRect(n,t,i,r)};i.prototype.circle=function(n,t,i,r){this.setFillStyle(r);this.ctx.beginPath();this.ctx.arc(n+i/2,t+i/2,i/2,0,Math.PI*2,!0);this.ctx.closePath();this.ctx.fill()};i.prototype.circleStroke=function(n,t,i,r,u,f){this.circle(n,t,i,r);this.ctx.strokeStyle=f.toString();this.ctx.stroke()};i.prototype.drawShape=function(n,t){this.shape(n);this.setFillStyle(t).fill()};i.prototype.taints=function(n){if(n.tainted===null){this.taintCtx.drawImage(n.image,0,0);try{this.taintCtx.getImageData(0,0,1,1);n.tainted=!1}catch(t){this.taintCtx=document.createElement("canvas").getContext("2d");n.tainted=!0}}return n.tainted};i.prototype.drawImage=function(n,t,i,r,u,f,e,o,s){(!this.taints(n)||this.options.allowTaint)&&this.ctx.drawImage(n.image,t,i,r,u,f,e,o,s)};i.prototype.clip=function(n,t,i){this.ctx.save();n.filter(e).forEach(function(n){this.shape(n).clip()},this);t.call(i);this.ctx.restore()};i.prototype.shape=function(n){return this.ctx.beginPath(),n.forEach(function(n,t){n[0]==="rect"?this.ctx.rect.apply(this.ctx,n.slice(1)):this.ctx[t===0?"moveTo":n[0]+"To"].apply(this.ctx,n.slice(1))},this),this.ctx.closePath(),this.ctx};i.prototype.font=function(n,t,i,r,u,f){this.setFillStyle(n).font=[t,i,r,u,f].join(" ").split(",")[0]};i.prototype.fontShadow=function(n,t,i,r){this.setVariable("shadowColor",n.toString()).setVariable("shadowOffsetY",t).setVariable("shadowOffsetX",i).setVariable("shadowBlur",r)};i.prototype.clearShadow=function(){this.setVariable("shadowColor","rgba(0,0,0,0)")};i.prototype.setOpacity=function(n){this.ctx.globalAlpha=n};i.prototype.setTransform=function(n){this.ctx.translate(n.origin[0],n.origin[1]);this.ctx.transform.apply(this.ctx,n.matrix);this.ctx.translate(-n.origin[0],-n.origin[1])};i.prototype.setVariable=function(n,t){return this.variables[n]!==t&&(this.variables[n]=this.ctx[n]=t),this};i.prototype.text=function(n,t,i){this.ctx.fillText(n,t,i)};i.prototype.backgroundRepeatShape=function(n,t,i,r,u,f,e,o,s){var h=[["line",Math.round(u),Math.round(f)],["line",Math.round(u+e),Math.round(f)],["line",Math.round(u+e),Math.round(o+f)],["line",Math.round(u),Math.round(o+f)]];this.clip([h],function(){this.renderBackgroundRepeat(n,t,i,r,s[3],s[0])},this)};i.prototype.renderBackgroundRepeat=function(n,t,i,r,u,f){var e=Math.round(r.left+t.left+u),o=Math.round(r.top+t.top+f);this.setFillStyle(this.ctx.createPattern(this.resizeImage(n,i),"repeat"));this.ctx.translate(e,o);this.ctx.fill();this.ctx.translate(-e,-o)};i.prototype.renderBackgroundGradient=function(n,t){if(n instanceof u){var i=this.ctx.createLinearGradient(t.left+t.width*n.x0,t.top+t.height*n.y0,t.left+t.width*n.x1,t.top+t.height*n.y1);n.colorStops.forEach(function(n){i.addColorStop(n.stop,n.color.toString())});this.rectangle(t.left,t.top,t.width,t.height,i)}};i.prototype.resizeImage=function(n,t){var i=n.image,u,r;return i.width===t.width&&i.height===t.height?i:(r=document.createElement("canvas"),r.width=t.width,r.height=t.height,u=r.getContext("2d"),u.drawImage(i,0,0,i.width,i.height,0,0,t.width,t.height),r)};t.exports=i},{"../lineargradientcontainer":12,"../log":13,"../renderer":19}],21:[function(n,t){function i(n,t,i,u){r.call(this,i,u);this.ownStacking=n;this.contexts=[];this.children=[];this.opacity=(this.parent?this.parent.stack.opacity:1)*t}var r=n("./nodecontainer");i.prototype=Object.create(r.prototype);i.prototype.getParentStack=function(n){var t=this.parent?this.parent.stack:null;return t?t.ownStacking?t:t.getParentStack(n):n.stack};t.exports=i},{"./nodecontainer":14}],22:[function(n,t){function i(n){this.rangeBounds=this.testRangeBounds(n);this.cors=this.testCORS();this.svg=this.testSVG()}i.prototype.testRangeBounds=function(n){var i,t,r,u,f=!1;return n.createRange&&(i=n.createRange(),i.getBoundingClientRect&&(t=n.createElement("boundtest"),t.style.height="123px",t.style.display="block",n.body.appendChild(t),i.selectNode(t),r=i.getBoundingClientRect(),u=r.height,u===123&&(f=!0),n.body.removeChild(t))),f};i.prototype.testCORS=function(){return typeof(new Image).crossOrigin!="undefined"};i.prototype.testSVG=function(){var n=new Image,t=document.createElement("canvas"),i=t.getContext("2d");n.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'><\/svg>";try{i.drawImage(n,0,0);t.toDataURL()}catch(r){return!1}return!0};t.exports=i},{}],23:[function(n,t){function i(n){this.src=n;this.image=null;var t=this;this.promise=this.hasFabric().then(function(){return t.isInline(n)?Promise.resolve(t.inlineFormatting(n)):r(n)}).then(function(n){return new Promise(function(i){window.html2canvas.svg.fabric.loadSVGFromString(n,t.createCanvas.call(t,i))})})}var r=n("./xhr"),u=n("./utils").decode64;i.prototype.hasFabric=function(){return!window.html2canvas.svg||!window.html2canvas.svg.fabric?Promise.reject(new Error("html2canvas.svg.js is not loaded, cannot render svg")):Promise.resolve()};i.prototype.inlineFormatting=function(n){return/^data:image\/svg\+xml;base64,/.test(n)?this.decode64(this.removeContentType(n)):this.removeContentType(n)};i.prototype.removeContentType=function(n){return n.replace(/^data:image\/svg\+xml(;base64)?,/,"")};i.prototype.isInline=function(n){return/^data:image\/svg\+xml/i.test(n)};i.prototype.createCanvas=function(n){var t=this;return function(i,r){var u=new window.html2canvas.svg.fabric.StaticCanvas("c");t.image=u.lowerCanvasEl;u.setWidth(r.width).setHeight(r.height).add(window.html2canvas.svg.fabric.util.groupSVGElements(i,r)).renderAll();n(u.lowerCanvasEl)}};i.prototype.decode64=function(n){return typeof atob=="function"?window.atob(n):u(n)};t.exports=i},{"./utils":26,"./xhr":28}],24:[function(n,t){function i(n,t){this.src=n;this.image=null;var i=this;this.promise=t?new Promise(function(t,r){i.image=new Image;i.image.onload=t;i.image.onerror=r;i.image.src="data:image/svg+xml,"+(new XMLSerializer).serializeToString(n);i.image.complete===!0&&t(i.image)}):this.hasFabric().then(function(){return new Promise(function(t){window.html2canvas.svg.fabric.parseSVGDocument(n,i.createCanvas.call(i,t))})})}var r=n("./svgcontainer");i.prototype=Object.create(r.prototype);t.exports=i},{"./svgcontainer":23}],25:[function(n,t){function i(n,t){r.call(this,n,t)}function u(n,t,i){if(n.length>0)return t+i.toUpperCase()}var r=n("./nodecontainer");i.prototype=Object.create(r.prototype);i.prototype.applyTextTransform=function(){this.node.data=this.transform(this.parent.css("textTransform"))};i.prototype.transform=function(n){var t=this.node.data;switch(n){case"lowercase":return t.toLowerCase();case"capitalize":return t.replace(/(^|\s|:|-|\(|\))([a-z])/g,u);case"uppercase":return t.toUpperCase();default:return t}};t.exports=i},{"./nodecontainer":14}],26:[function(n,t,i){i.smallImage=function(){return"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"};i.bind=function(n,t){return function(){return n.apply(t,arguments)}};i.decode64=function(n){for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=n.length,s,e,r,u,f,o,h,c="",t=0;t<l;t+=4)s=i.indexOf(n[t]),e=i.indexOf(n[t+1]),r=i.indexOf(n[t+2]),u=i.indexOf(n[t+3]),f=s<<2|e>>4,o=(e&15)<<4|r>>2,h=(r&3)<<6|u,c+=r===64?String.fromCharCode(f):u===64||u===-1?String.fromCharCode(f,o):String.fromCharCode(f,o,h);return c};i.getBounds=function(n){if(n.getBoundingClientRect){var t=n.getBoundingClientRect(),i=n.offsetWidth==null?t.width:n.offsetWidth;return{top:t.top,bottom:t.bottom||t.top+t.height,right:t.left+i,left:t.left,width:i,height:n.offsetHeight==null?t.height:n.offsetHeight}}return{}};i.offsetBounds=function(n){var t=n.offsetParent?i.offsetBounds(n.offsetParent):{top:0,left:0};return{top:n.offsetTop+t.top,bottom:n.offsetTop+n.offsetHeight+t.top,right:n.offsetLeft+t.left+n.offsetWidth,left:n.offsetLeft+t.left,width:n.offsetWidth,height:n.offsetHeight}};i.parseBackgrounds=function(n){var a=" \r\n\t",t,i,o,h,u,l=[],r=0,s=0,f,e,c=function(){t&&(i.substr(0,1)==='"'&&(i=i.substr(1,i.length-2)),i&&e.push(i),t.substr(0,1)==="-"&&(h=t.indexOf("-",1)+1)>0&&(o=t.substr(0,h),t=t.substr(h)),l.push({prefix:o,method:t.toLowerCase(),value:u,args:e,image:null}));e=[];t=o=i=u=""};return e=[],t=o=i=u="",n.split("").forEach(function(n){if(r!==0||!(a.indexOf(n)>-1)){switch(n){case'"':f?f===n&&(f=null):f=n;break;case"(":if(f)break;else{if(r===0){r=1;u+=n;return}s++}break;case")":if(f)break;else if(r===1){if(s===0){r=0;u+=n;c();return}s--}break;case",":if(f)break;else{if(r===0){c();return}if(r===1&&s===0&&!t.match(/^url$/i)){e.push(i);i="";u+=n;return}}}u+=n;r===0?t+=n:i+=n}}),c(),l}},{}],27:[function(n,t){function r(n){i.apply(this,arguments);this.type=n.args[0]==="linear"?i.TYPES.LINEAR:i.TYPES.RADIAL}var i=n("./gradientcontainer");r.prototype=Object.create(i.prototype);t.exports=r},{"./gradientcontainer":9}],28:[function(n,t){function i(n){return new Promise(function(t,i){var r=new XMLHttpRequest;r.open("GET",n);r.onload=function(){r.status===200?t(r.responseText):i(new Error(r.statusText))};r.onerror=function(){i(new Error("Network Error"))};r.send()})}t.exports=i},{}]},{},[4])(4)});$(window).on("DOMContentLoaded.wb.saisie.rwd",function(){function t(n){return n.children().eq(0).find("td").add(n.children().eq(0)).last()}function i(n){var t=n.children().eq(1).find("input,textarea,iframe").filter(function(){return this.type!=="hidden"&&this.type!=="checkbox"&&this.type!=="radio"}),i=t.siblings(".wbSaisieJetonsWrap");return i.length?i.find("input").last():t.first()}function r(n){var t=n[0].wbSaisieJetonsInitDejaFait;return t?n.siblings(".wbSaisieJetonsWrap"):n}function n(){$(".wbLibChamp").each(function(){function u(){var e=i(n),p;if(!e||!e.length){n.one("trigger.wb.saisie.rwd.riche",function(){u()});return}if(e.data("wbSaisieJetons")&&!e[0].wbSaisieJetonsInitDejaFait){n.one("trigger.wb.saisie.jeton.postinit",function(){u()});return}var g=e[0].wbSaisieJetonsInitDejaFait,l=r(e),h=e[0].tagName.toLowerCase()==="iframe",w=e[0].tagName.toLowerCase()==="textarea"||g&&l.hasClass("wbSaisieJetonsWrapVertical"),a=undefined,c=undefined,v=undefined,y=undefined,s=!1,o=n.add(f).add(e);$(window).on("mouseup.wb.saisie.rwd trigger.wb.saisie.rwd.mouseup",function(){o.removeClass("wbActif")});p=h?$(bIEAvec11?e[0].contentDocument.body:e[0].contentDocument):e;n.on("trigger.wb.saisie.rwd.valeurinitDepuisConteneur",function(){p.trigger("trigger.wb.saisie.rwd.valeurinit")});var b=function(){var u=n.clone(!1,!1),f;u.css({visibility:"hidden",position:"fixed"});f=u.add(u.children());f.css("transition","none").addClass("wbFocus");$(document.body).append(u);a=parseInt(u.children().first().css("top"))===0;c=parseInt(r(i(u)).css("paddingTop"));v=t(u).height();y=parseInt(u.children().first().css("marginTop"));f.remove()},k=function(){if(w&&a===undefined){b();$(window).one("trigger.wb.rwd.tranche.changement",b)}},d=function(){s=s||!1;!s&&w&&a&&c<v+y&&(l.css("paddingTop",v+y+c),s=!0)};p.on((h?"click":"focus")+".wb.saisie.rwd trigger.wb.saisie.rwd.focus",function(){if(k(),o.addClass("wbFocus"),d(),h)$(document).one("click.wb.saisie.rwd.blur",function(){o.removeClass("wbFocus")})}).on("blur.wb.saisie.rwd trigger.wb.saisie.rwd.blur",function(){o.removeClass("wbFocus");s&&!o.hasClass("wbSaisieNonVide")&&(l.css("paddingTop",c),s=!1)}).on("keyup.wb.saisie.rwd trigger.wb.saisie.rwd.keyup change.wb.saisie.rwd trigger.wb.saisie.rwd.valeurinit trigger.wb.saisie.rwd.postaffectation trigger.wb.autocomplete.select.post",function(n){if(h?this.body?this.body.innerText.trim():"":this.value){var t=n.type.toLowerCase()==="trigger";t&&k();o.addClass("wbSaisieNonVide");t&&d()}else o.removeClass("wbSaisieNonVide")}).on("mouseenter.wb.saisie.rwd trigger.wb.saisie.rwd.mouseenter",function(){o.addClass("wbSurvol")}).on("mouseleave.wb.saisie.rwd trigger.wb.saisie.rwd.mouseleave",function(){o.removeClass("wbSurvol")}).on("mousedown.wb.saisie.rwd trigger.wb.saisie.rwd.mousedown",function(){o.addClass("wbActif")}).on("mouseup.wb.saisie.rwd trigger.wb.saisie.rwd.mouseup",function(){o.removeClass("wbActif")}).trigger("trigger.wb.saisie.rwd.valeurinit")}if(!this.wbSaisieRwdBindDejaFait){this.wbSaisieRwdBindDejaFait=!0;var n=$(this),f=t(n);u()}})}window.NSPCS&&(NSPCS.NSUtil.ms_oNotificationsAjoutHTML.AddNotification(n),NSPCS.NSUtil.ms_oNotificationsFinAJAX.AddNotification(n));window.clWDUtil!==undefined&&(clWDUtil.m_oNotificationsAjoutHTML&&clWDUtil.m_oNotificationsAjoutHTML.AddNotification(n),clWDUtil.m_oNotificationsFinAJAX&&clWDUtil.m_oNotificationsFinAJAX.AddNotification(n));n()});$(window).on("trigger.wb.rwd.tranche.changement trigger.wb.plan.action.set.fin trigger.wb.disposition.visible.maj",function(){$($(".wbChampDisposition").get().reverse()).each(function(){var n=$(this),t=0;n.children().each(function(){var u=this,n=$(u),i=$(n[0].querySelectorAll("[style*=data-wbdispositioncell-"+this.id+"],[style*=data-wbdispositioncell-"+this.id.toLowerCase()+"]")),r;i.length!=0&&(r=!0,i.each(function(n,t){var f=i.eq(n);return f.hasClass("d-0")?!0:t.style.display==="none"||t.style.visibility==="hidden"?!0:getComputedStyle(t).visibility=="hidden"&&getComputedStyle(u).visibility!="hidden"?!0:(r=!1,!1)}),r?(n.addClass("d-0"),bToutesCellulesInvisibles=!1,++t):n.removeClass("d-0"))});t===n.children().length?n.addClass("d-0"):n.removeClass("d-0")})});if(jQuery().ready(function(n){function f(n,t,i){var r,u;if(i)for(r=0;r<i.length;++r)if(f({which:i.charCodeAt(r)},t))return!0;return n.namespace=="autocomplete.post.select.wb"?!0:(u=!1,$.each(t,function(t,i){if(typeof i=="number"?n.which===i:n.which===i.charCodeAt(0))return u=!0,!1;if(n.which!==undefined&&n.which===i.which){var r=!i.hasOwnProperty("altKey")||n.altKey===i.altKey,f=!i.hasOwnProperty("shiftKey")||n.shiftKey===i.shiftKey,e=!i.hasOwnProperty("ctrlKey")||n.ctrlKey===i.ctrlKey;if(r&&f&&e)return u=!0,!1}}),u)}function r(n){var t=0,i;return document.selection?(n.focus(),i=document.selection.createRange(),i.moveStart("character",-n.value.length),t=i.text.length):(n.selectionStart||n.selectionStart=="0")&&(t=n.selectionStart),t}function e(n,i){return t(n,!0)==i}function t(n,t){var i=n.m_sValeur||n.m_sLibelleHTML||n.m_sLibelle;return t&&(i=wbSansAccent(i).toLowerCase()),i}function c(n){return jQuery("<div />").text(n).html()}function o(n,t){var i=n.m_sLibelleHTML;return i||(n.m_sLibelle?i=n.m_sLibelle:n.m_sValeur&&(i=n.m_sValeur),t&&(i=c(i))),$.trim(i)}function i(n){$("[data-wb-saisie-jetons]").each(function(){function ht(){var n=$.extend({},w);n.m_tabJetons=[];c.find(".wbJeton").each(function(t){n.m_tabJetons[t]=$(this).data("wbJeton")});ft.value=JSON.stringify(n)}function ct(t){var r=$(ft).wbJsonParseAttr("value",!0)||{},i;for(t||et(!0),w=$.extend({m_sJetonListeSeparateur:"",m_bJetonAutoriseDoublon:!1,m_bJetonSupprimable:!0,m_tabJetons:[]},r),b=[],i=0;w.m_sJetonListeSeparateur&&i<w.m_sJetonListeSeparateur.length;++i)b.push(w.m_sJetonListeSeparateur[i]);b.push("\r");b.push("\n");it(n,!0,!0);d(t);c[0].scrollTo&&c[0].scrollTo(0,0)}function gt(){i[0].wbJetonAjoute=function(n,t){return typeof n=="object"?k(n):k({m_sLibelle:t,m_sValeur:n})};i[0].wbJetonInsere=function(n,t,i){return typeof t=="object"?k(t,n):k({m_sLibelle:i,m_sValeur:t},n)};i[0].wbJetonOccurrence=function(){return c.find(".wbJeton").length};i[0].wbJetonSupprime=function(n){if(typeof n=="string"){var t,i=wbSansAccent(n).toLowerCase();return c.find(".wbJeton").each(function(){var n=$(this);e(n.data("wbJeton"),i)&&(t=y(n,!0))}),t}return y(c.find(".wbJeton").eq(n-1),!0)};i[0].wbJetonSupprimeTout=function(){et(!0)};i[0].wbGetDinoJeton=function(n){return c.find(".wbJeton").eq(n-1).data("wbJeton")};i[0].wbGetJetonValeurMemoriseeChampSaisie=function(){return ot()};i[0].wbSetJetonValeurMemoriseeChampSaisie=function(n){i.val(n);et(!0);it();ht()};i[0].wbGetJetonValeurAfficheeChampSaisie=function(){var n=ot(!0);return i[0].wbGetJetonSaisieEncours()!=""&&(n+="\n",n+=i[0].wbGetJetonSaisieEncours()),n};i[0].wbJetonChargeDepuisChampCache=function(){return ct()};i[0].wbGetJetonSaisieEncours=function(){return i[0].type=="hidden"?"":i.val()};i[0].wbSetJetonSaisieEncours=function(n){return c.hasClass("wbFocus")?(i.val(n),d(),!0):!1};g.on("focus.wb.saisie.jeton.tab",function(n){if(i[0].readOnly){var t=c.find(".wbJeton").first();if(!t.length){g.emulateTab(1);n.stopPropagation();n.preventDefault();return}p(t)}nt();i.focus()});i.on("keydown.wb.saisie.jeton",lt);i.on("keypress.wb.saisie.jeton trigger.wb.autocomplete.select.post",at);i.on("paste.wb.saisie.jeton change.wb.saisie.jeton",function(n){lt(n);at(n,!0)});i.on("focus.wb.saisie.jeton",nt);i.on("blur.wb.saisie.jeton",rt);c.on("click.wb.saisie.jeton",c[0].wbWrappeFocus=function(n){var t,r;n!==undefined&&i.data("wbSaisieJetonFocus")||i[0].readOnly||(t=n&&n.target&&$(n.target).hasClass("wbJeton"),t&&c[0].scrollTo&&(r={y:c[0].scrollTop,x:c[0].scrollLeft}),nt(t),i.focus(),t&&c[0].scrollTo&&c[0].scrollTo(r.x,r.y))}).on("mousedown.wb.saisie.jeton",function(n){c.hasClass("wbFocus")&&n.target!=i[0]&&(n.preventDefault(),n.stopPropagation())});i.on("trigger.wb.saisie.jeton.cree trigger.wb.saisie.jeton.supprime",function(n){ht();c.hasClass("wbFocus")||(n&&n.namespace.indexOf("supprime")>-1&&i.val().indexOf("\n")===-1?(nt(n),rt(n)):i.data("wbSaisieJetonFocus")?i.val()==""&&rt(n):yt());c.find(".wbJeton").length||c.hasClass("wbFocus")||(c.closest(".wbSaisieNonVide").removeClass("wbSaisieNonVide"),i.trigger("trigger.wb.saisie.rwd.blur"))})}function lt(n){var t=c.find(".wbJeton.wbFocus"),f=!1,u=!0,o,s,l,a,e;switch(n.which){case 9:i.data("wbSaisieJetonFocus")&&i.val()!=""?vt():g.emulateTab(n.shiftKey?-1:1);u=!1;break;case 13:t.length&&(t.each(function(){clWDUtil.pfGetTraitement(i[0].name,86,undefined)(n,$(this).data("wbJeton"))}),u=!1,f=!0);break;case 36:r(i[0])===0&&(p(c.find(".wbJeton").first(),n.ctrlKey),f=!0,u=!1);break;case 35:i[0].readOnly?(p(c.find(".wbJeton").last(),n.ctrlKey),f=!0,u=!1):f=n.ctrlKey;break;case 8:t.length>1?(t.each(function(){y($(this),!1,n)}),u=!1):t.length==1?(o=t.prev(".wbJeton"),y(t,!1,n),o.length&&(p(o),f=!0,u=!1)):r(i[0])===0&&(s=i.prev(),s.length&&(y(s,!1,n),u=!1));break;case 46:t.length>1?(t.each(function(){y($(this),!1,n)}),u=!1):t.length==1?(l=t.next(".wbJeton"),y(t,!1,n),l.length&&(p(l),f=!0,u=!1)):r(i[0])===0&&(a=i.next(),a.length&&(y(a,!1,n),u=!1));break;case 27:i.val("");pt();i.focus();break;case 37:if(t.length){t.prev(".wbJeton").length?(p(t.first().prev(".wbJeton"),n.shiftKey),u=!1,f=!0):f=!0;break}else r(i[0])===0&&(p(c.find(".wbJeton").last()),f=!0,u=!1);break;case 39:if(t.length){p(t.last().next(".wbJeton"),n.shiftKey);u=!1;f=t.next(".wbJeton").length;break}break;default:t.length&&((n.which===67&&n.ctrlKey||n.which===16&&n.ctrlKey)&&i[0].select&&document.execCommand&&(e=$("<textarea style='opacity:0;position:fixed;top:-9999px;top:-999px;'/>"),$(document.body).append(e),e.val(t.data("wbJeton").m_sValeur+"\n"),e[0].select(),document.execCommand("copy"),e.remove()),u=!1,f=!0)}u||(n.stopPropagation(),n.preventDefault());f||h&&(n.ctrlKey||n.shiftKey)||tt();d(undefined,f)}function at(n,t){if(i.data("wbSaisieJetonFocus")&&!c.find(".wbJeton.wbFocus").length){var r;i.val()===""&&n&&n.type=="paste"&&(n.originalEvent.clipboardData||window.clipboardData)&&(r=(n.originalEvent.clipboardData||window.clipboardData).getData("Text"));f(n,b,r)?(n.preventDefault(),vt(!!t,n,r)):d();n.stopPropagation()}}function vt(n,t,i){it(t,n,!1,i)!==!1&&d(!n)}function ni(n){i.add(n).finish().animate({content:1},{easing:"linear",duration:350,start:function(){$(this).css("animation","shakeLightLittle 150ms ease-out")},complete:function(){$(this).css("animation","")}})}function et(n){c.find(".wbJeton").each(function(){y($(this),n)})}function tt(){c.find(".wbJeton").removeClass("wbFocus")}function p(n,t,r){var e,u,f;(i[0].type!=="hidden"&&(i[0].selectionStart=i[0].selectionEnd=0),n&&n.length)&&(e=n.hasClass("wbFocus"),t&&h||tt(),e||(n.addClass("wbFocus"),r||(u=$.extend({},n.position(),{bottom:n.position().top+n.height(),right:n.position().left+n.width()}),f={top:c.scrollTop(),bottom:c.scrollTop()+c.height(),left:c.scrollLeft(),right:c.scrollLeft()+c.width()},u.left>=f.left&&u.right<=f.right&&u.top>=f.top&&u.bottom<=f.bottom||n[0].scrollIntoView&&n[0].scrollIntoView())))}function y(n,t,r){var f,u,e;return n.length?(f=n.data("wbJeton"),!t&&!1===clWDUtil.pfGetTraitement(i[0].name,83,undefined)(r,n.data("wbJeton")))?!1:(u=n.next(".wbJeton"),u.length?(e=n.width(),u.css("marginLeft",e),u.animate({marginLeft:0},{easing:"easeOutCubic",duration:100}),n.remove()):n.remove(),i.trigger("trigger.wb.saisie.jeton.supprime",f),!0):!1}function k(n,r,u,f){var h,d,g,b,s,a,l,k;if(h=typeof n=="object"?n:{m_sLibelle:n,m_sValeur:f},!h.m_sLibelle&&!h.m_sValeur)return!1;if(!w.m_bJetonAutoriseDoublon&&(d=t(h,!0),(g=c.find(".wbJeton").filter(function(){var n=$(this);return e(n.data("wbJeton"),d)?!0:!1})).length))return ni(g),!1;if(b=o(h,!0),!b.length)return!1;s=$('<span class="wbJeton">'+b+'<span data-role="remove"><\/span><\/span>');h.m_sBulle&&s.attr("title",$("<div>"+h.m_sBulle+"<\/div>").text());a=v.jeton;a?(s.addClass("padding "+(a.style||"")+" "+(a.surcharge||"")),l=v.croix,l&&(l.planche&&s.children().first().addClass("wbplanche "+l.planche),l.chemin&&s.children().first().css({backgroundImage:'url("'+l.chemin+'")'}))):s.addClass("wbJetonDefaut");h.m_sCouleur&&s.css("color",h.m_sCouleur);h.m_sCouleurFond&&s.css("background-color",h.m_sCouleurFond);s.data("wbJeton",h);r!==undefined?(k=r<=1?i.parent().children(".wbJeton").first():i.parent().children(".wbJeton").eq(r-1),k.length?k.before(s):i.before(s)):i.before(s);s.on("click.wb.saisie.jeton","[data-role=remove]",function(n){y(s,!1,n);n.stopPropagation()});s.on("click.wb.saisie.jeton",function(n){switch(n.which){case 1:p(s,n.ctrlKey,!0);clWDUtil.pfGetTraitement(i[0].name,86,undefined)(n,s.data("wbJeton"))}}).on("mousedown.wb.saisie.jeton",function(n){switch(n.which){case 2:y(s,!1,n)}});return i.trigger("trigger.wb.saisie.jeton.cree",s),s.prevAll(".wbJeton").length}function it(n,t,r,u){for(var f,s,e,c,o=!1,h=0;r&&h<w.m_tabJetons.length;++h)k(w.m_tabJetons[h],undefined,n)||(o=!1);if(f=u||i.val(),!f)return o;for(s="",e=0;e<=f.length;++e)if(e==f.length||$.inArray(f[e],b)>-1){if(t&&e==f.length)i.val(s);else{if(c={m_sValeur:s},n&&clWDUtil.pfGetTraitement(i[0].name,82,undefined)(n,c)===!1){o=!1;continue}o=o||k(c,undefined,n)}s=""}else s+=f[e];return o}function d(n,t){var r=0,e,u,f;n?i.val(""):r=i.val().length;!t&&r&&tt();e=Math.ceil(r/5);i.attr("size",Math.max(bt,r));t||i.attr("type")=="hidden"||(u=i.offset().left-c.offset().left,f=i.offset().top-c.offset().top,(c[0].scrollTo&&c[0].scrollHeight>c[0].clientHeight&&(f<c[0].scrollTop||f>c[0].scrollTop+c[0].clientHeight)||c[0].scrollTo&&c[0].scrollWidth>c[0].clientWidth&&(u<c[0].scrollLeft||u>c[0].scrollLeft+c[0].clientWidth))&&c[0].scrollTo(u,f))}function rt(n){var t=i.val();if(t&&it(n)===!1){n.preventDefault();n.stopPropagation();setTimeout(function(){nt();i.focus();i.val(t)},10);return}tt();i.removeData("wbSaisieJetonFocus");yt();c.removeClass("wbFocus");pt()}function yt(){var n=ot();n==""||i.css("opacity",0).attr("type","hidden").val(n).trigger("change").attr("size",1)}function pt(){}function nt(n){i.attr("type",kt).data("wbSaisieJetonFocus",1);i.css("opacity",1);c.hasClass("wbFocus")||(i.val(""),c.addClass("wbFocus"),d(!0,n))}function ot(n){var i="",r="\n";return c.find(".wbJeton").each(function(){i!==""&&(i+=r);var u=$(this).data("wbJeton");i+=n?o(u):t(u)}),i}var c,ut,g,ft;if(!this.wbSaisieJetonsInitDejaFait){this.wbSaisieJetonsInitDejaFait=!0;var i=$(this),wt=this.hasAttribute("placeholder")?i.attr("placeholder"):"",bt=Math.max(1,wt.length),v=$.extend({sens:u,doublon:!1,champ:{style:"wbSaisieJetonsWrapDefautStyle "+i[0].id}},i.wbJsonParseAttr("data-wb-saisie-jetons",!0)||{}),w,b,kt=i.attr("type"),st=i.attr("class"),dt=i.is(":focus");i.attr("class",st+" wbSaisieJetonsInput").css({verticalAlign:"top"}).wrap($('<div class="'+st.replace("wbAutocomplete","").replace("wbAutocompleteFichier","")+" wbSaisieJetonsWrap wbSaisieJetonWrap"+i[0].id+'"><\/div>'));c=i.parent();c.wrapInner($('<div class="wbSaisieJetonsInnerWrap"><\/div>'));ut=c.children().last();c.parent().prepend($('<input type="text" style="position:fixed;top:-9999px;left:-9999px;opacity:0">'));g=c.parent().children().first();i.attr("tabindex")&&(g.attr("tabindex",i.attr("tabindex")),i.attr("tabindex",-1));v.sens==u||v.sens==l?ut.css({position:"absolute"}):v.sens==s?(c.css({width:"auto",display:"table"}),ut.css({display:"table-cell",verticalAlign:"middle"})):v.sens==a&&c.css({height:"auto"});v.sens==u||v.sens==s?c.addClass("wbSaisieJetonsWrapHorizontal"):c.addClass("wbSaisieJetonsWrapVertical");ft=document.getElementById(i[0].id+"_DATA");c.addClass(v.champ.style).attr("id",i[0].id);i.removeClass(v.champ.style).attr("id","");v.croix&&v.croix.avec!==!1?v.croix.chemin||c.addClass("wbSaisieJetonsWrapDefautCroix"):c.addClass("wbSaisieJetonsSansCroix");i.val("");ct(!0);gt();dt?i.focus():rt();i.trigger("trigger.wb.saisie.jeton.postinit")}})}var u=0,s=1,l=2,a=3,h=!1;window.NSPCS&&(NSPCS.NSUtil.ms_oNotificationsAjoutHTML.AddNotification(i),NSPCS.NSUtil.ms_oNotificationsFinAJAX.AddNotification(i));window.clWDUtil!==undefined&&(clWDUtil.m_oNotificationsAjoutHTML&&clWDUtil.m_oNotificationsAjoutHTML.AddNotification(i),clWDUtil.m_oNotificationsFinAJAX&&clWDUtil.m_oNotificationsFinAJAX.AddNotification(i));i(n)}),$.fn.wbComboPopupOuvre=function(n,t){var f,l,s,v,u,a,h,i,y;if(t&&t.length){if(f=$.event.fix(n),!bIEQuirks){if(f.button!=0)return;if(f.touches&&f.touches.length>1)return}var r=$(this),c=function(n){if(n.type!="trigger")if(n.type=="mousedown"||n.type=="focusin"){var i=$(n.target);if(i.closest(t).length)return}else if(n.type=="keydown"&&n.which!=27)return;clWDUtil.CelluleFermeDialogue(t[0].id.substr(3),document);n.preventDefault();n.stopPropagation()},p=function(n){var i,u;try{i=NSPCS.NSChamps.oGetChamp(t[0].id.substr(3),90).viGetPropriete(1,63);NSPCS.NSChamps.bEstValeurRenvoyeeDefaut(i)||(u=r.children().filter(function(){return this.innerText==i.toString()}),u.length&&(r[0].selectedIndex=u.first().index()))}catch(f){}clWDUtil.pfGetTraitement(r[0].name,85,undefined)(n);t.off("trigger.wb.combo.popup.ferme");$(document.body).off("mousedown.wb.combo.popup.ferme focusin.wb.combo.popup.ferme keydown.wb.combo.popup.ferme trigger.wb.combo.popup.ferme");$(window).off("resize.wb.combo.popup.ferme")};if(f.preventDefault(),r[0].disabled=!0,l=function(n){setTimeout(function(){if(r[0].disabled=!1,n){$(document.body).on("mousedown.wb.combo.popup.ferme keydown.wb.combo.popup.ferme trigger.wb.combo.popup.ferme resize.wb.combo.popup.ferme",c);$(window).on("resize.wb.combo.popup.ferme",c)}},10)},t.hasClass("WDPopupVisible")){c(f);f.stopPropagation();l(!1);return}t.css({visibility:"hidden",display:"block"});var e=r.offset(),w={width:r.outerWidth(),height:r.outerHeight()},o={};o.display="block";o.visibility="visible";s={width:t.outerWidth(),height:t.outerHeight()};v=window.nHauteurNavigateur-e.top;o.top=v>s.height||e.top-s.height<window.nBordHautNavigateur?e.top+w.height:e.top-s.height;o.left=e.left+s.width>window.nLargeurNavigateur?window.nLargeurNavigateur-s.width:e.left;clWDUtil.CelluleAfficheDialogue(t[0].id.substr(3),document,clWDUtil.ms_ePlaceSouris,undefined,0,o.left,o.top,!1,undefined);t.on("trigger.wb.combo.popup.ferme",p);u=r[0].name;u.indexOf("zrl_")===0&&(a=parseInt(u.substr(4,u.indexOf("_",4)-4)),isNaN(a)||(h=r.closest("[id^=con-],[id$=_HTE],[id$=_TB]"),i=h.attr("id"),i.indexOf("con-")===0?i=i.substr(4):i.indexOf("_HTE")===i.length-4?i=i.substr(0,i.length-4):i.indexOf("_TB")===i.length-3&&(i=i.substr(0,i.length-3),h=h.parent().closest("table")),h.siblings("[name$='"+i+"']").attr("value",a)),u=u.substr(u.lastIndexOf("ATT_")+4,u.length-u.lastIndexOf("_")));y=r.attr("data-wbAlias")||u;clWDUtil.pfGetTraitement(y,84,undefined)(f);l(!0)}},bCrm&&!bEdge&&navigator&&navigator.appVersion&&(navigator.appVersion.indexOf("Chrome/70")>-1||navigator.appVersion.indexOf("Chrome/71")>-1)){$(window).on("DOMContentLoaded.wb.chrome.cadrearrondi resize.wb.chrome.cadrearrondi trigger.wb.chrome.cadrearrondi trigger.wb.plan.action.set.fin trigger.wb.disposition.visible.maj",function(){var n=[],t=[];$(".wbCadreArrondi9Img").each(function(){var r,u,f,v,y;if(this.wbCadreArrondi9ImgDeja)return!0;var i=$(this),h=i.children("tbody").first(),l=h[0].offsetWidth,a=h[0].offsetHeight;if(l==0||a==0||(this.wbCadreArrondi9ImgDeja=!0,r=this.jdTdPrincipal||h.children("tr").children("td").filter(function(){return $(this).css("backgroundImage").indexOf("_wwcb1.png")>-1}),!r.length))return!0;this.jdTdPrincipal=r;var e=r.parent(),c=e.siblings().first().children("td"),o=r.index()>0?c.first()[0].offsetWidth:0,s=r.index()<c.length?c.last()[0].offsetWidth:0;--o;--s;u=e.prev().length?e.prev()[0].offsetHeight:0;f=e.next().length?e.next()[0].offsetHeight:0;u/=2;++u;++u;++u;f/=2;++f;++f;v=r.css("background-color");y=r.css("background-image");n.push(function(){i.css({backgroundColor:v,backgroundImage:y,backgroundClip:"content-box",backgroundOrigin:"content-box",boxSizing:"border-box",display:"grid",borderRadius:Math.max(o||s,u||f)});i.css("paddingLeft",o).css("paddingRight",s).css("paddingTop",u).css("paddingBottom",f);h.css("marginLeft",-o).css("marginRight",-s).css("marginTop",-u).css("marginBottom",-f).css("display","table").css("height","calc(100% + "+(u+f)+"px)").css("width","calc(100% + "+(o+s)+"px)");i.hasClass("wbCadreArrondi9ImgAncrageLargeur")?i.css("width","100%"):i.css("width",l);i.hasClass("wbCadreArrondi9ImgAncrageHauteur")?i.css("height","100%"):i.css("height",a)});t.push(function(){var t=r.get(0),n;window.MutationObserver&&t&&(n=i.get(0),n.wbObserverCadreArrondi||(n.wbObserverCadreArrondi=new MutationObserver(function(){$(".wbCadreArrondi9Img").filter(function(){return!!this.wbObserverCadreArrondi}).each(function(){this.wbObserverCadreArrondi.disconnect();this.wbCadreArrondi9ImgDeja=!1});$(window).trigger("trigger.wb.chrome.cadrearrondi")})),n.wbObserverCadreArrondi.observe(t,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))})});requestAnimationFrame(function(){for(var t=0;t<n.length;n[t++]());});requestAnimationFrame(function(){for(var n=0;n<t.length;t[n++]());})});window.clWDUtil!==undefined&&(clWDUtil.m_oNotificationsAjoutHTML&&clWDUtil.m_oNotificationsAjoutHTML.AddNotification(function(){$(window).trigger("trigger.wb.chrome.cadrearrondi")}),clWDUtil.m_oNotificationsFinAJAX&&clWDUtil.m_oNotificationsFinAJAX.AddNotification(function(){$(window).trigger("trigger.wb.chrome.cadrearrondi")}))}$(window).on("DOMContentLoaded.wb.bascule.init",function(){function n(){$(".wbInterrupteurBascule").each(function(){function u(n){return i.filter(function(){return this.checked&&(!n||!this.classList.contains("wbNotChecked"))||n&&this.classList.contains("wbChecked")}).index()}function o(n,t){if(i.removeClass("wbNotChecked").removeClass("wbChecked"),t){i.addClass("wbNotChecked");i.eq(n).removeClass("wbNotChecked").addClass("wbChecked");return}i[n].checked=!0;i.eq(n).trigger("change.wb.bascule")}function e(n){var t=u(n)==0?1:0;o(t,n)}function s(){function l(o,l,a,v,y,p,w){var b,d,k,g;if(!i[0].disabled&&(!o.button||o.button==0)){if(v>8&&(h=!0),h&&(o.preventDefault(),o.stopPropagation()),b=o&&o.touches&&o.touches[0]&&o.touches[0]&&o.touches[0].identifier?o.touches[0].identifier:0,a&&w&&w[b]&&w[b].start&&w[b].end&&(v=w[b].end.x-w[b].start.x,a="right",v<0&&(v=-v,a="left")),v&&a=="left"&&(v=-v),l=="end"||l=="cancel")return s!==undefined&&(d=!1,n[0].wbBasculeSortieEvent?((n[0].wbBasculeSortieEvent.offsetX<0&&u()==1||n[0].wbBasculeSortieEvent.offsetX>n[0].clientWidth&&u()==0||u()==1&&t[0].offsetLeft+t[0].clientWidth/2<f[0].clientWidth/2||u()==0&&t[0].offsetLeft+t[0].clientWidth/2>f[0].clientWidth/2)&&(d=!0),n[0].wbBasculeSortieEvent=undefined):d=t[0].offsetLeft>t[0].fGetPositionCurseurSelonFacteur(.5)!=(u()==1),d&&(e(),h=!0)),t[0].style.left="",t[0].classList.remove("wbActif"),f[0].classList.remove("wbActif"),n[0].classList.remove("wbActif"),s=undefined,i.removeClass("wbNotChecked").removeClass("wbChecked"),r.removeClass("wbNoTransition").removeClass("wbActif"),r.css("color",""),!h;if(l=="start"){var nt=extendEvent(o,jQuery.event.fix(o)),tt=r.first().offset().left,it=r.last().offset().left,rt=f.offset().left,ut=tt!=it&&tt<rt;c=ut&&(u()==0?nt.pageX<rt:nt.pageX>it);h=!1;s=t[0].offsetLeft;t[0].classList.add("wbActif");f[0].classList.add("wbActif");n[0].classList.add("wbActif");r.addClass("wbNoTransition").addClass("wbActif");r.each(function(){this.sCouleurAvantBascule=getComputedStyle(this).color});e(!0);r.each(function(){var i=getComputedStyle(this).color,r=this.sCouleurAvantBascule,n,t;this.sCouleurAvantBascule=undefined;n=clWDUtil.tabHTML2RVBA(r);t=clWDUtil.tabHTML2RVBA(i);this.fChangeCouleurSelonFacteur=function(i){var r=i*t[0]+(1-i)*n[0],u=i*t[1]+(1-i)*n[1],f=i*t[2]+(1-i)*n[2];this.style.color=clWDUtil.sRVBA2HTML([r,u,f,1])}});k=t[0].offsetLeft;n[0].fnGetFacteur=function(n){var t=Math.min(k,s),i=Math.max(k,s),r=Math.min(i,Math.max(t,s+n));return k>s?(r-t)/(i-t):1-(r-t)/(i-t)};t[0].fDeplaceCurseurSelonFacteur=function(n){t[0].style.left=t[0].fGetPositionCurseurSelonFacteur(n).toString()+"px"};t[0].fGetPositionCurseurSelonFacteur=function(n){return s+n*(k-s)};g=!1;n[0].fDeplaceSelonDistance=function(n){var i=this.fnGetFacteur(n);t[0].fDeplaceCurseurSelonFacteur(i);r.each(function(){this.fChangeCouleurSelonFacteur(i)});i>.5==!g&&(g=!g,e(!0))};e(!0)}s!==undefined&&v&&(a=="left"||a=="right")&&n[0].fDeplaceSelonDistance(v)}}var s,c=!1,h=!1;r.addClass("wbInterrupteurBascule-Libelle--Draggable");i.on("focus.wb.bascule.selection",function(){t[0].classList.add("wbFocus");f[0].classList.add("wbFocus")}).on("blur.wb.bascule.selection",function(){t[0].classList.remove("wbFocus");f[0].classList.remove("wbFocus")}).on("keydown.wb.bascule.change",function(n){n&&n.which===32&&(e(),n.preventDefault(),n.stopPropagation())});n.on("mouseleave.wb.bascule.swipe",function(i){t.hasClass("wbActif")&&(n[0].wbBasculeSortieEvent=extendEvent(i,jQuery.event.fix(i)),n.trigger("mouseup"))}).swipe({fingers:1,allowPageScroll:"vertical",triggerOnTouchEnd:!0,swipeStatus:l,tap:function(t){if(!i[0].disabled&&!c&&!(t.button&&t.button!=0)){if(n[0].basculeEnCours){t.preventDefault();t.stopPropagation();return}n[0].basculeEnCours=!0;e();setTimeout(function(){n[0].basculeEnCours=!1},300);navigator&&navigator.vibrate&&navigator.vibrate([10])}},swipe:function(n,t){i[0].disabled||n.button&&n.button!=0||(t=="left"&&u()!=0&&o(0),t=="right"&&u()!=1&&o(1))}})}if(!this.wbInterrupteurBasculeInitDejaFait){this.wbInterrupteurBasculeInitDejaFait=!0;var n=$(this),i=n.children("input"),r=n.children("label"),t=n.children(".wbInterrupteurBascule-Curseur"),f=n.children(".wbInterrupteurBascule-Glissiere");s()}})}window.NSPCS&&(NSPCS.NSUtil.ms_oNotificationsAjoutHTML.AddNotification(n),NSPCS.NSUtil.ms_oNotificationsFinAJAX.AddNotification(n));window.clWDUtil!==undefined&&(clWDUtil.m_oNotificationsAjoutHTML&&clWDUtil.m_oNotificationsAjoutHTML.AddNotification(n),clWDUtil.m_oNotificationsFinAJAX&&clWDUtil.m_oNotificationsFinAJAX.AddNotification(n));n()});
/*!
 * jQuery Color Animations v2.1.2
 * https://github.com/jquery/jquery-color
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * Date: Wed Jan 16 08:47:09 2013 -0600
 */
(function(n,t){function e(n,t,i){var r=s[t.type]||{};return n==null?i||!t.def?null:t.def:(n=r.floor?~~n:parseFloat(n),isNaN(n))?t.def:r.mod?(n+r.mod)%r.mod:0>n?0:r.max<n?r.max:n}function l(t){var e=i(),o=e._rgba=[];return(t=t.toLowerCase(),r(v,function(n,i){var r,s=i.re.exec(t),h=s&&i.parse(s),f=i.space||"rgba";if(h)return r=e[f](h),e[u[f].cache]=r[u[f].cache],o=e._rgba=r._rgba,!1}),o.length)?(o.join()==="0,0,0,0"&&n.extend(o,f.transparent),e):f[t]}function o(n,t,i){return(i=(i+1)%1,i*6<1)?n+(t-n)*i*6:i*2<1?t:i*3<2?n+(t-n)*(2/3-i)*6:n}var a=/^([\-+])=\s*(\d+\.?\d*)/,v=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(n){return[n[1],n[2],n[3],n[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(n){return[n[1]*2.55,n[2]*2.55,n[3]*2.55,n[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(n){return[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(n){return[parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16),parseInt(n[3]+n[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(n){return[n[1],n[2]/100,n[3]/100,n[4]]}}],i=n.Color=function(t,i,r,u){return new n.Color.fn.parse(t,i,r,u)},u={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},s={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},h=i.support={},c=n("<p>")[0],f,r=n.each;c.style.cssText="background-color:rgba(1,1,1,.5)";h.rgba=c.style.backgroundColor.indexOf("rgba")>-1;r(u,function(n,t){t.cache="_"+n;t.props.alpha={idx:3,type:"percent",def:1}});i.fn=n.extend(i.prototype,{parse:function(o,s,h,c){if(o===t)return this._rgba=[null,null,null,null],this;(o.jquery||o.nodeType)&&(o=n(o).css(s),s=t);var a=this,v=n.type(o),y=this._rgba=[];return(s!==t&&(o=[o,s,h,c],v="array"),v==="string")?this.parse(l(o)||f._default):v==="array"?(r(u.rgba.props,function(n,t){y[t.idx]=e(o[t.idx],t)}),this):v==="object"?(o instanceof i?r(u,function(n,t){o[t.cache]&&(a[t.cache]=o[t.cache].slice())}):r(u,function(t,i){var u=i.cache;r(i.props,function(n,t){if(!a[u]&&i.to){if(n==="alpha"||o[n]==null)return;a[u]=i.to(a._rgba)}a[u][t.idx]=e(o[n],t,!0)});a[u]&&n.inArray(null,a[u].slice(0,3))<0&&(a[u][3]=1,i.from&&(a._rgba=i.from(a[u])))}),this):void 0},is:function(n){var e=i(n),t=!0,f=this;return r(u,function(n,i){var o,u=e[i.cache];return u&&(o=f[i.cache]||i.to&&i.to(f._rgba)||[],r(i.props,function(n,i){if(u[i.idx]!=null)return t=u[i.idx]===o[i.idx]})),t}),t},_space:function(){var n=[],t=this;return r(u,function(i,r){t[r.cache]&&n.push(i)}),n.pop()},transition:function(n,t){var f=i(n),c=f._space(),o=u[c],l=this.alpha()===0?i("transparent"):this,a=l[o.cache]||o.to(l._rgba),h=a.slice();return f=f[o.cache],r(o.props,function(n,i){var c=i.idx,r=a[c],u=f[c],o=s[i.type]||{};u!==null&&(r===null?h[c]=u:(o.mod&&(u-r>o.mod/2?r+=o.mod:r-u>o.mod/2&&(r-=o.mod)),h[c]=e((u-r)*t+r,i)))}),this[c](h)},blend:function(t){if(this._rgba[3]===1)return this;var r=this._rgba.slice(),u=r.pop(),f=i(t)._rgba;return i(n.map(r,function(n,t){return(1-u)*f[t]+u*n}))},toRgbaString:function(){var i="rgba(",t=n.map(this._rgba,function(n,t){return n==null?t>2?1:0:n});return t[3]===1&&(t.pop(),i="rgb("),i+t.join()+")"},toHslaString:function(){var i="hsla(",t=n.map(this.hsla(),function(n,t){return n==null&&(n=t>2?1:0),t&&t<3&&(n=Math.round(n*100)+"%"),n});return t[3]===1&&(t.pop(),i="hsl("),i+t.join()+")"},toHexString:function(t){var i=this._rgba.slice(),r=i.pop();return t&&i.push(~~(r*255)),"#"+n.map(i,function(n){return n=(n||0).toString(16),n.length===1?"0"+n:n}).join("")},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString()}});i.fn.parse.prototype=i.fn;u.hsla.to=function(n){if(n[0]==null||n[1]==null||n[2]==null)return[null,null,null,n[3]];var i=n[0]/255,r=n[1]/255,f=n[2]/255,s=n[3],u=Math.max(i,r,f),e=Math.min(i,r,f),t=u-e,o=u+e,h=o*.5,c,l;return c=e===u?0:i===u?60*(r-f)/t+360:r===u?60*(f-i)/t+120:60*(i-r)/t+240,l=t===0?0:h<=.5?t/o:t/(2-o),[Math.round(c)%360,l,h,s==null?1:s]};u.hsla.from=function(n){if(n[0]==null||n[1]==null||n[2]==null)return[null,null,null,n[3]];var r=n[0]/360,u=n[1],t=n[2],e=n[3],i=t<=.5?t*(1+u):t+u-t*u,f=2*t-i;return[Math.round(o(f,i,r+1/3)*255),Math.round(o(f,i,r)*255),Math.round(o(f,i,r-1/3)*255),e]};r(u,function(u,f){var s=f.props,o=f.cache,h=f.to,c=f.from;i.fn[u]=function(u){if(h&&!this[o]&&(this[o]=h(this._rgba)),u===t)return this[o].slice();var l,a=n.type(u),v=a==="array"||a==="object"?u:arguments,f=this[o].slice();return r(s,function(n,t){var i=v[a==="object"?n:t.idx];i==null&&(i=f[t.idx]);f[t.idx]=e(i,t)}),c?(l=i(c(f)),l[o]=f,l):i(f)};r(s,function(t,r){i.fn[t]||(i.fn[t]=function(i){var f=n.type(i),h=t==="alpha"?this._hsla?"hsla":"rgba":u,o=this[h](),s=o[r.idx],e;return f==="undefined"?s:(f==="function"&&(i=i.call(this,s),f=n.type(i)),i==null&&r.empty)?this:(f==="string"&&(e=a.exec(i),e&&(i=s+parseFloat(e[2])*(e[1]==="+"?1:-1))),o[r.idx]=i,this[h](o))})})});i.hook=function(t){var u=t.split(" ");r(u,function(t,r){n.cssHooks[r]={set:function(t,u){var o,f,e="";if(u!=="transparent"&&(n.type(u)!=="string"||(o=l(u)))){if(u=i(o||u),!h.rgba&&u._rgba[3]!==1){for(f=r==="backgroundColor"?t.parentNode:t;(e===""||e==="transparent")&&f&&f.style;)try{e=n.css(f,"backgroundColor");f=f.parentNode}catch(s){}u=u.blend(e&&e!=="transparent"?e:"_default")}u=u.toRgbaString()}try{t.style[r]=u}catch(s){}}};n.fx.step[r]=function(t){t.colorInit||(t.start=i(t.elem,r),t.end=i(t.end),t.colorInit=!0);n.cssHooks[r].set(t.elem,t.start.transition(t.end,t.pos))}})};i.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor");n.cssHooks.borderColor={expand:function(n){var t={};return r(["Top","Right","Bottom","Left"],function(i,r){t["border"+r+"Color"]=n}),t}};f=n.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}})(jQuery);$.fn.wbGetBulle=function(){var n,t,i;if(this.length)return(n=this[0],!n)?void 0:n.title?n.title:(t=n.getAttribute("aria-describedby"),!t)?void 0:(i=document.getElementById(t),!i)?void 0:i.innerText}